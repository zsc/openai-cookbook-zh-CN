<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <title>å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder expanded" data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item active" style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="claude-3-mongodb-rag">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</h1>
<p>æœ¬æ•™ç¨‹å®ç°äº†ä¸€ä¸ªè¢«æç¤ºæ‰®æ¼”é£é™©æŠ•èµ„ç§‘æŠ€åˆ†æå¸ˆè§’è‰²çš„èŠå¤©æœºå™¨äººã€‚è¯¥èŠå¤©æœºå™¨äººæ˜¯ä¸€ä¸ªç®€å•çš„ RAG ç³»ç»Ÿï¼Œä»¥ä¸€ç³»åˆ—ç§‘æŠ€æ–°é—»æ–‡ç« ä½œä¸ºå…¶çŸ¥è¯†æ¥æºã€‚
æœ¬ç¬”è®°æœ¬æ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>éµå¾ªå…¨é¢çš„æ•™ç¨‹ï¼Œä»å®‰è£…å¿…è¦çš„åº“åˆ°é…ç½® MongoDB æ•°æ®åº“ï¼Œæ¥è®¾ç½®æ‚¨çš„å¼€å‘ç¯å¢ƒã€‚</li>
<li>å­¦ä¹ é«˜æ•ˆçš„æ•°æ®å¤„ç†æ–¹æ³•ï¼ŒåŒ…æ‹¬åˆ›å»ºå‘é‡æœç´¢ç´¢å¼•ä»¥åŠå‡†å¤‡æ•°æ®ä»¥ä¾›æ‘„å–å’ŒæŸ¥è¯¢å¤„ç†ã€‚</li>
<li>äº†è§£å¦‚ä½•åœ¨ RAG ç³»ç»Ÿä¸­ä½¿ç”¨ Claude 3 æ¨¡å‹ï¼Œä»¥æ ¹æ®ä»æ•°æ®åº“æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ç”Ÿæˆç²¾ç¡®çš„å“åº”ã€‚</li>
</ol>
<p>æ‚¨å°†éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>Anthropic API å¯†é’¥</li>
<li>VoyageAI API å¯†é’¥</li>
<li>Hugging Face è®¿é—®ä»¤ç‰Œ</li>
</ul>
<h2 id="1">æ­¥éª¤ 1ï¼šåº“å®‰è£…ã€æ•°æ®åŠ è½½å’Œå‡†å¤‡</h2>
<p>ä»¥ä¸‹æ˜¯å¯¹å®ç°ä»£ç ä¸­ä½¿ç”¨çš„å·¥å…·å’Œåº“çš„ç®€è¦è¯´æ˜ï¼š</p>
<ul>
<li>anthropicï¼šAnthropic çš„å®˜æ–¹ Python åº“ï¼Œå¯è®¿é—®æœ€å…ˆè¿›çš„è¯­è¨€æ¨¡å‹ã€‚è¯¥åº“æä¾›äº†å¯¹ Claude 3 ç³»åˆ—æ¨¡å‹çš„è®¿é—®ï¼Œè¿™äº›æ¨¡å‹å¯ä»¥ç†è§£æ–‡æœ¬å’Œå›¾åƒã€‚</li>
<li>datasetsï¼šè¯¥åº“æ˜¯ Hugging Face ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡å®‰è£…â€œdatasetsâ€ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®è®¸å¤šé¢„å¤„ç†å¥½çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®é›†å¯¹äºè®­ç»ƒå’Œå¾®è°ƒæœºå™¨å­¦ä¹ æ¨¡å‹æˆ–å¯¹å…¶æ€§èƒ½è¿›è¡ŒåŸºå‡†æµ‹è¯•è‡³å…³é‡è¦ã€‚</li>
<li>pandasï¼šè¿™ä¸ªæ•°æ®ç§‘å­¦åº“æä¾›äº†å¼ºå¤§çš„æ•°æ®ç»“æ„å’Œæ–¹æ³•ï¼Œç”¨äºæ•°æ®æ“ä½œã€å¤„ç†å’Œåˆ†æã€‚</li>
<li>voyageaiï¼šè¿™æ˜¯è®¿é—® VoyageAI çš„åµŒå…¥æ¨¡å‹å¥—ä»¶çš„å®˜æ–¹ Python å®¢æˆ·ç«¯åº“ã€‚</li>
<li>pymongoï¼šPyMongo æ˜¯ MongoDB çš„ Python å·¥å…·åŒ…ã€‚å®ƒæ”¯æŒä¸ MongoDB æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚</li>
</ul>
<pre class="codehilite"><code class="language-python">!pip install pymongo datasets pandas anthropic voyageai
</code></pre>

<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>å¯¼å…¥å¿…è¦çš„åº“ï¼š
- <code>os</code> ç”¨äºä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œ
- <code>requests</code> ç”¨äºå‘å‡º HTTP è¯·æ±‚ï¼Œ
- <code>BytesIO</code> ä» io æ¨¡å—ä¸­ç”¨äºåœ¨å†…å­˜ä¸­å¤„ç†åƒæ–‡ä»¶ä¸€æ ·çš„å­—èŠ‚å¯¹è±¡ï¼Œ
- <code>pandas</code>ï¼ˆåˆ«åä¸º pdï¼‰ç”¨äºæ•°æ®æ“ä½œå’Œåˆ†æï¼Œä»¥åŠ
- <code>userdata</code> ä» google.colab ä¸­ç”¨äºè®¿é—®å­˜å‚¨åœ¨ Google Colab Secrets ä¸­çš„ç¯å¢ƒå˜é‡ã€‚</li>
<li>å‡½æ•°å®šä¹‰ï¼šå®šä¹‰äº† <code>download_and_combine_parquet_files</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š
- <code>parquet_file_urls</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸² URL åˆ—è¡¨ï¼Œæ¯ä¸ª URL æŒ‡å‘ä¸€ä¸ªåŒ…å« tech-news-embedding æ•°æ®é›†å­é›†çš„ Parquet æ–‡ä»¶ã€‚
- <code>hf_token</code> æ˜¯ä¸€ä¸ªä»£è¡¨ Hugging Face æˆæƒä»¤ç‰Œçš„å­—ç¬¦ä¸²ã€‚å¯ä»¥åœ¨ <a href="https://huggingface.co/docs/hub/en/security-tokens#:~:text=To%20create%20an%20access%20token,you%27re%20ready%20to%20go!">Hugging Face å¹³å°</a> åˆ›å»ºæˆ–å¤åˆ¶è®¿é—®ä»¤ç‰Œã€‚</li>
<li>ä¸‹è½½å’Œè¯»å– Parquet æ–‡ä»¶ï¼šè¯¥å‡½æ•°éå† <code>parquet_file_urls</code> ä¸­çš„æ¯ä¸ª URLã€‚å¯¹äºæ¯ä¸ª URLï¼š
- ä½¿ç”¨ <code>requests.get</code> æ–¹æ³•å‘å‡º GET è¯·æ±‚ï¼Œä¼ é€’ URL å’Œæˆæƒæ ‡å¤´ã€‚
- æ£€æŸ¥å“åº”çŠ¶æ€ç æ˜¯å¦ä¸º 200ï¼ˆOKï¼‰ï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸã€‚
- å¦‚æœæˆåŠŸï¼Œå®ƒå°†å“åº”å†…å®¹è¯»å–åˆ° <code>BytesIO</code> å¯¹è±¡ä¸­ï¼ˆä»¥åœ¨å†…å­˜ä¸­å°†å…¶ä½œä¸ºæ–‡ä»¶å¤„ç†ï¼‰ï¼Œç„¶åä½¿ç”¨ <code>pandas.read_parquet</code> ä»è¯¥å¯¹è±¡ä¸­å°† Parquet æ–‡ä»¶è¯»å–åˆ° Pandas DataFrame ä¸­ã€‚
- å°† DataFrame è¿½åŠ åˆ° <code>all_dataframes</code> åˆ—è¡¨ä¸­ã€‚</li>
<li>åˆå¹¶ DataFrameï¼šåœ¨ä¸‹è½½å’Œè¯»å–æ‰€æœ‰ Parquet æ–‡ä»¶åˆ° DataFrame åï¼Œä¼šè¿›è¡Œæ£€æŸ¥ä»¥ç¡®ä¿ <code>all_dataframes</code> ä¸ä¸ºç©ºã€‚å¦‚æœå­˜åœ¨è¦å¤„ç†çš„ DataFrameï¼Œåˆ™ä½¿ç”¨ <code>pd.concat</code> å°†æ‰€æœ‰ DataFrame è¿æ¥æˆä¸€ä¸ª DataFrameï¼Œå¹¶å°† <code>ignore_index=True</code> ä»¥é‡æ–°ç´¢å¼•æ–°çš„åˆå¹¶ DataFrameã€‚è¿™ä¸ªåˆå¹¶çš„ DataFrame æ˜¯ <code>download_and_combine_parquet_files</code> å‡½æ•°ä¸­çš„æ€»ä½“å¤„ç†è¾“å‡ºã€‚</li>
</ol>
<pre class="codehilite"><code class="language-python">import os
import requests
from io import BytesIO
import pandas as pd
from google.colab import userdata

def download_and_combine_parquet_files(parquet_file_urls, hf_token):
    &quot;&quot;&quot;
    ä½¿ç”¨ç»™å®šçš„ Hugging Face ä»¤ç‰Œä»æä¾›çš„ URL ä¸‹è½½ Parquet æ–‡ä»¶ï¼Œ
    å¹¶è¿”å›ä¸€ä¸ªåˆå¹¶çš„ DataFrameã€‚

    å‚æ•°ï¼š

    - parquet_file_urlsï¼šå­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒParquet æ–‡ä»¶çš„ URLã€‚
    - hf_tokenï¼šå­—ç¬¦ä¸²ï¼ŒHugging Face æˆæƒä»¤ç‰Œã€‚

    è¿”å›å€¼ï¼š

    - combined_dfï¼šä¸€ä¸ªåŒ…å«æ‰€æœ‰ Parquet æ–‡ä»¶åˆå¹¶æ•°æ®çš„ pandas DataFrameã€‚
    &quot;&quot;&quot;
    headers = {&quot;Authorization&quot;: f&quot;Bearer {hf_token}&quot;}
    all_dataframes = []

    for parquet_file_url in parquet_file_urls:
        response = requests.get(parquet_file_url, headers=headers)
        if response.status_code == 200:
            parquet_bytes = BytesIO(response.content)
            df = pd.read_parquet(parquet_bytes)
            all_dataframes.append(df)
        else:
            print(f&quot;Failed to download Parquet file from {parquet_file_url}: {response.status_code}&quot;)

    if all_dataframes:
        combined_df = pd.concat(all_dataframes, ignore_index=True)
        return combined_df
    else:
        print(&quot;No dataframes to concatenate.&quot;)
        return None
</code></pre>

<p>ä¸‹é¢æ˜¯æœ¬æ•™ç¨‹æ‰€éœ€çš„ Parquet æ–‡ä»¶åˆ—è¡¨ã€‚æ‰€æœ‰æ–‡ä»¶çš„å®Œæ•´åˆ—è¡¨ä½äº <a href="https://huggingface.co/datasets/MongoDB/tech-news-embeddings/tree/refs%2Fconvert%2Fparquet/default/train">æ­¤å¤„</a>ã€‚æ¯ä¸ª Parquet æ–‡ä»¶ä»£è¡¨å¤§çº¦ 45,000 ä¸ªæ•°æ®ç‚¹ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œtech-news-embeddings æ•°æ®é›†çš„ä¸€ä¸ªå­é›†è¢«åˆ†ç»„åˆ°ä¸€ä¸ª DataFrame ä¸­ï¼Œç„¶åå°†å…¶åˆ†é…ç»™å˜é‡ <code>combined_df</code>ã€‚</p>
<pre class="codehilite"><code class="language-python"># å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„é“¾æ¥ä»¥åŠ è½½æ›´å¤šæ•°æ®
# æœ‰å…³æ•°æ®å®Œæ•´åˆ—è¡¨ï¼Œè¯·è®¿é—®ï¼šhttps://huggingface.co/datasets/MongoDB/tech-news-embeddings/tree/refs%2Fconvert%2Fparquet/default/train
parquet_files = [
    &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0000.parquet&quot;,
    # &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0001.parquet&quot;,
    # &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0002.parquet&quot;,
    # &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0003.parquet&quot;,
    # &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0004.parquet&quot;,
    # &quot;https://huggingface.co/api/datasets/AIatMongoDB/tech-news-embeddings/parquet/default/train/0005.parquet&quot;,
]

hf_token = userdata.get(&quot;HF_TOKEN&quot;)
combined_df = download_and_combine_parquet_files(parquet_files, hf_token)
</code></pre>

<p>ä½œä¸ºæ•°æ®å‡†å¤‡çš„æœ€åé˜¶æ®µï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†åˆ é™¤åˆ†ç»„æ•°æ®é›†ä¸­çš„ <code>_id</code> åˆ—çš„æ­¥éª¤ï¼Œå› ä¸ºå®ƒå¯¹äºæœ¬æ•™ç¨‹çš„åç»­æ­¥éª¤æ˜¯ä¸å¿…è¦çš„ã€‚æ­¤å¤–ï¼Œå°†æ¯ä¸ªæ•°æ®ç‚¹çš„åµŒå…¥åˆ—ä¸­çš„æ•°æ®ä» numpy æ•°ç»„è½¬æ¢ä¸º Python åˆ—è¡¨ï¼Œä»¥é˜²æ­¢åœ¨æ•°æ®æ‘„å–è¿‡ç¨‹ä¸­å‡ºç°ä¸ä¸å…¼å®¹æ•°æ®ç±»å‹ç›¸å…³çš„é”™è¯¯ã€‚</p>
<pre class="codehilite"><code class="language-python"># ä»åˆå§‹æ•°æ®é›†ä¸­åˆ é™¤ _id åˆ—
combined_df = combined_df.drop(columns=['_id'])

# åˆ é™¤åˆå§‹åµŒå…¥åˆ—ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ VoyageAI åµŒå…¥æ¨¡å‹åˆ›å»ºæ–°çš„åµŒå…¥
combined_df = combined_df.drop(columns=['embedding'])
</code></pre>

<pre class="codehilite"><code class="language-python">combined_df.head()
</code></pre>

<pre class="codehilite"><code class="language-python"># ç”±äº VoyageAI API çš„é€Ÿç‡é™åˆ¶ï¼Œå°†æœ¬æ–‡æ¡£æ•°é‡é™åˆ¶ä¸º 500 ä»¥ç”¨äºæ­¤æ¼”ç¤º
# åœ¨ VoyageAI é€Ÿç‡é™åˆ¶ä¸Šé˜…è¯»æ›´å¤šå†…å®¹ï¼šhttps://docs.voyageai.com/docs/rate-limits
max_documents = 500

if len(combined_df) &gt; max_documents:
    combined_df = combined_df[:max_documents]
</code></pre>

<pre class="codehilite"><code class="language-python">import voyageai
import time

vo = voyageai.Client(api_key=userdata.get(&quot;VOYAGE_API_KEY&quot;))

def get_embedding(text: str) -&gt; list[float]:
    if not text.strip():
      print(&quot;Attempted to get embedding for empty text.&quot;)
      return []

    embedding = vo.embed(text, model=&quot;voyage-large-2&quot;, input_type=&quot;document&quot;)

    return embedding.embeddings[0]

combined_df[&quot;embedding&quot;] = combined_df[&quot;description&quot;].apply(get_embedding)

combined_df.head()
</code></pre>

<h2 id="2">æ­¥éª¤ 2ï¼šæ•°æ®åº“å’Œé›†åˆåˆ›å»º</h2>
<p><strong>è¦åˆ›å»ºæ–°çš„ MongoDB æ•°æ®åº“ï¼Œè¯·è®¾ç½®æ•°æ®åº“é›†ç¾¤ï¼š</strong></p>
<ol>
<li>æ³¨å†Œä¸€ä¸ª <a href="https://www.mongodb.com/cloud/atlas/register?utm_campaign=devrel&amp;utm_source=community&amp;utm_medium=cta&amp;utm_content=Partner%20Cookbook&amp;utm_term=richmond.alake">å…è´¹çš„ MongoDB Atlas è´¦æˆ·</a>ï¼Œæˆ–ç°æœ‰ç”¨æˆ·ï¼Œè¯·<a href="https://account.mongodb.com/account/login?utm_campaign=devrel&amp;utm_source=community&amp;utm_medium=cta&amp;utm_content=Partner%20Cookbook&amp;utm_term=richmond.alake">ç™»å½• MongoDB Atlas</a></li>
<li>åœ¨å·¦ä¾§çª—æ ¼ä¸­é€‰æ‹©â€œæ•°æ®åº“â€é€‰é¡¹ï¼Œè¿™å°†å¯¼èˆªåˆ°æ•°æ®åº“éƒ¨ç½²é¡µé¢ï¼Œå…¶ä¸­åŒ…å«ä»»ä½•ç°æœ‰é›†ç¾¤çš„éƒ¨ç½²è§„èŒƒã€‚é€šè¿‡å•å‡»â€œ+åˆ›å»ºâ€æŒ‰é’®åˆ›å»ºæ–°çš„æ•°æ®åº“é›†ç¾¤ã€‚</li>
<li>
<p>æœ‰å…³æ•°æ®åº“é›†ç¾¤è®¾ç½®å’Œè·å– URI çš„å¸®åŠ©ï¼Œè¯·å‚é˜…æˆ‘ä»¬å…³äºè®¾ç½® MongoDB é›†ç¾¤å’Œè·å–è¿æ¥å­—ç¬¦ä¸²çš„æŒ‡å—ã€‚
æ³¨æ„ï¼šåˆ›å»ºæ¦‚å¿µéªŒè¯æ—¶ï¼Œè¯·å‹¿å¿˜è®°ä¸º Python ä¸»æœºæˆ–ä»»ä½• IP çš„ <code>0.0.0.0/0</code> å…è®¸ IP åœ°å€ã€‚</p>
</li>
<li>
<p>æˆåŠŸåˆ›å»ºå’Œéƒ¨ç½²é›†ç¾¤åï¼Œé›†ç¾¤å°†åœ¨â€œæ•°æ®åº“éƒ¨ç½²â€é¡µé¢ä¸Šå¯ç”¨ã€‚</p>
</li>
<li>å•å‡»é›†ç¾¤çš„â€œè¿æ¥â€æŒ‰é’®ï¼ŒæŸ¥çœ‹é€šè¿‡å„ç§è¯­è¨€é©±åŠ¨ç¨‹åºè¿æ¥åˆ°é›†ç¾¤çš„é€‰é¡¹ã€‚</li>
<li>æœ¬æ•™ç¨‹ä»…éœ€è¦é›†ç¾¤çš„ URIï¼ˆå”¯ä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ã€‚è·å– URI å¹¶å°†å…¶å¤åˆ¶åˆ°åä¸º <code>MONGO_URI</code> çš„å˜é‡çš„ Google Colabs Secrets ç¯å¢ƒä¸­ï¼Œæˆ–å°†å…¶æ”¾å…¥ <code>.env</code> æ–‡ä»¶æˆ–ç­‰æ•ˆæ–‡ä»¶ä¸­ã€‚</li>
</ol>
<p>åˆ›å»ºé›†ç¾¤åï¼Œå¯¼èˆªåˆ°é›†ç¾¤é¡µé¢ï¼Œç„¶åé€šè¿‡å•å‡» + åˆ›å»ºæ•°æ®åº“åœ¨ MongoDB Atlas é›†ç¾¤ä¸­åˆ›å»ºæ•°æ®åº“å’Œé›†åˆã€‚
æ•°æ®åº“å°†å‘½åä¸º <code>tech_news</code>ï¼Œé›†åˆå°†å‘½åä¸º <code>hacker_noon_tech_news</code>ã€‚</p>
<h2 id="3">æ­¥éª¤ 3ï¼šå‘é‡æœç´¢ç´¢å¼•åˆ›å»º</h2>
<p>æ­¤æ—¶ï¼Œæ‚¨å·²ç»åˆ›å»ºäº†é›†ç¾¤ã€æ•°æ®åº“å’Œé›†åˆã€‚</p>
<p>æœ¬èŠ‚ä¸­çš„æ­¥éª¤å¯¹äºç¡®ä¿å¯ä»¥ä½¿ç”¨è¾“å…¥åˆ°èŠå¤©æœºå™¨äººçš„æŸ¥è¯¢è¿›è¡Œå‘é‡æœç´¢ï¼Œå¹¶åœ¨ <code>hacker_noon_tech_news</code> é›†åˆä¸­çš„è®°å½•ä¹‹é—´è¿›è¡Œæœç´¢è‡³å…³é‡è¦ã€‚æ­¤æ­¥éª¤çš„ç›®çš„æ˜¯åˆ›å»ºå‘é‡æœç´¢ç´¢å¼•ã€‚ä¸ºæ­¤ï¼Œè¯·å‚é˜…å®˜æ–¹çš„ <a href="https://www.mongodb.com/docs/atlas/atlas-vector-search/create-index/">å‘é‡æœç´¢ç´¢å¼•åˆ›å»ºæŒ‡å—</a>ã€‚</p>
<p>åœ¨ä½¿ç”¨ MongoDB Atlas ä¸Šçš„ JSON ç¼–è¾‘å™¨åˆ›å»ºå‘é‡æœç´¢ç´¢å¼•æ—¶ï¼Œè¯·ç¡®ä¿æ‚¨çš„å‘é‡æœç´¢ç´¢å¼•åä¸º <code>vector_index</code>ï¼Œå¹¶ä¸”å‘é‡æœç´¢ç´¢å¼•å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre class="codehilite"><code>{
 &quot;fields&quot;: [{
     &quot;numDimensions&quot;: 1536,
     &quot;path&quot;: &quot;embedding&quot;,
     &quot;similarity&quot;: &quot;cosine&quot;,
     &quot;type&quot;: &quot;vector&quot;
   }]
}
</code></pre>

<h2 id="4">æ­¥éª¤ 4ï¼šæ•°æ®æ‘„å–</h2>
<p>å°†æ•°æ®æ‘„å–åˆ°å…ˆå‰æ­¥éª¤ä¸­åˆ›å»ºçš„ MongoDB æ•°æ®åº“ä¸­ã€‚å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>è¿æ¥åˆ°æ•°æ®åº“å’Œé›†åˆ</li>
<li>æ¸…é™¤é›†åˆä¸­çš„ä»»ä½•ç°æœ‰è®°å½•</li>
<li>åœ¨æ‘„å–ä¹‹å‰å°†æ•°æ®é›†çš„ Pandas DataFrame è½¬æ¢ä¸ºå­—å…¸</li>
<li>ä½¿ç”¨æ‰¹é‡æ“ä½œå°†å­—å…¸æ‘„å–åˆ° MongoDB ä¸­</li>
</ul>
<p>æœ¬æ•™ç¨‹éœ€è¦é›†ç¾¤çš„ URIï¼ˆå”¯ä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰ã€‚è·å– URI å¹¶å°†å…¶å¤åˆ¶åˆ°åä¸º <code>MONGO_URI</code> çš„å˜é‡çš„ Google Colab Secrets ç¯å¢ƒä¸­ï¼Œæˆ–å°†å…¶æ”¾å…¥ <code>.env</code> æ–‡ä»¶æˆ–ç­‰æ•ˆæ–‡ä»¶ä¸­ã€‚</p>
<pre class="codehilite"><code class="language-python">import pymongo
from google.colab import userdata

def get_mongo_client(mongo_uri):
  &quot;&quot;&quot;å»ºç«‹ä¸ MongoDB çš„è¿æ¥ã€‚&quot;&quot;&quot;
  try:
    client = pymongo.MongoClient(mongo_uri)
    print(&quot;Connection to MongoDB successful&quot;)
    return client
  except pymongo.errors.ConnectionFailure as e:
    print(f&quot;Connection failed: {e}&quot;)
    return None

mongo_uri = userdata.get('MONGO_URI')
if not mongo_uri:
  print(&quot;MONGO_URI not set in environment variables&quot;)

mongo_client = get_mongo_client(mongo_uri)

DB_NAME=&quot;tech_news&quot;
COLLECTION_NAME=&quot;hacker_noon_tech_news&quot;

db = mongo_client[DB_NAME]
collection = db[COLLECTION_NAME]
</code></pre>

<pre class="codehilite"><code>Connection to MongoDB successful
</code></pre>

<pre class="codehilite"><code class="language-python"># ä¸ºç¡®ä¿æˆ‘ä»¬å¤„ç†çš„æ˜¯ä¸€ä¸ªå…¨æ–°çš„é›†åˆ
# åˆ é™¤é›†åˆä¸­ä»»ä½•ç°æœ‰çš„è®°å½•
collection.delete_many({})
</code></pre>

<pre class="codehilite"><code>DeleteResult({'n': 228012, 'electionId': ObjectId('7fffffff000000000000000e'), 'opTime': {'ts': Timestamp(1709660559, 7341), 't': 14}, 'ok': 1.0, '$clusterTime': {'clusterTime': Timestamp(1709660559, 7341), 'signature': {'hash': b'jT\xf1\xb4\xa9\xd3\xe3suu\x03`\x15(}\x8f\x00\x9f\xe9\x8a', 'keyId': 7320226449804230661}}, 'operationTime': Timestamp(1709660559, 7341)}, acknowledged=True)
</code></pre>

<pre class="codehilite"><code class="language-python"># æ•°æ®æ‘„å–
combined_df_json = combined_df.to_dict(orient='records')
collection.insert_many(combined_df_json)
</code></pre>

<h2 id="5">æ­¥éª¤ 5ï¼šå‘é‡æœç´¢</h2>
<p>æœ¬èŠ‚å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå‘é‡æœç´¢è‡ªå®šä¹‰å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ç”¨æˆ·æŸ¥è¯¢ï¼Œå¯¹åº”äºèŠå¤©æœºå™¨äººçš„æ¡ç›®ã€‚è¯¥å‡½æ•°è¿˜æ¥å—ç¬¬äºŒä¸ªå‚æ•° <code>collection</code>ï¼Œå®ƒæŒ‡å‘åŒ…å«è®°å½•çš„æ•°æ®åº“é›†åˆï¼Œå‘é‡æœç´¢æ“ä½œåº”é’ˆå¯¹è¿™äº›è®°å½•è¿›è¡Œã€‚</p>
<p><code>vector_search</code> å‡½æ•°ç”Ÿæˆä¸€ä¸ªå‘é‡æœç´¢ç»“æœï¼Œè¯¥ç»“æœæºè‡ª MongoDB èšåˆç®¡é“ä¸­æ¦‚è¿°çš„ä¸€ç³»åˆ—æ“ä½œã€‚æ­¤ç®¡é“åŒ…æ‹¬ <code>$vectorSearch</code> å’Œ <code>$project</code> é˜¶æ®µï¼Œå¹¶æ ¹æ®ç”¨æˆ·æŸ¥è¯¢çš„å‘é‡åµŒå…¥æ‰§è¡ŒæŸ¥è¯¢ã€‚ç„¶åï¼Œå®ƒæ ¼å¼åŒ–ç»“æœï¼Œçœç•¥äº†åç»­è¿‡ç¨‹ä¸éœ€è¦ä»»ä½•è®°å½•å±æ€§ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰§è¡Œä»¥ä¸‹æ“ä½œä»¥å®ç°ç”µå½±çš„è¯­ä¹‰æœç´¢ï¼š</p>
<ol>
<li>å®šä¹‰ <code>vector_search</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»¥ç”¨æˆ·æŸ¥è¯¢å’Œ MongoDB é›†åˆä½œä¸ºè¾“å…¥ï¼Œå¹¶æ ¹æ®å‘é‡ç›¸ä¼¼æ€§æœç´¢è¿”å›åŒ¹é…æ–‡æ¡£çš„åˆ—è¡¨ã€‚</li>
<li>é€šè¿‡è°ƒç”¨å…ˆå‰å®šä¹‰çš„ <code>get_embedding</code> å‡½æ•°æ¥ç”Ÿæˆç”¨æˆ·æŸ¥è¯¢çš„åµŒå…¥ï¼Œè¯¥å‡½æ•°å°†æŸ¥è¯¢å­—ç¬¦ä¸²è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºã€‚</li>
<li>æ„å»ºä¸€ä¸ªç”¨äº MongoDB çš„ aggregate å‡½æ•°çš„ç®¡é“ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š<code>$vectorSearch</code> å’Œ <code>$project</code>ã€‚</li>
<li><code>$vectorSearch</code> é˜¶æ®µæ‰§è¡Œå®é™…çš„å‘é‡æœç´¢ã€‚ç´¢å¼•å­—æ®µæŒ‡å®šè¦ç”¨äºå‘é‡æœç´¢çš„å‘é‡ç´¢å¼•ï¼Œè¿™åº”ä¸å…ˆå‰æ­¥éª¤ä¸­å‘é‡æœç´¢ç´¢å¼•å®šä¹‰ä¸­è¾“å…¥çš„åç§°ç›¸å¯¹åº”ã€‚<code>queryVector</code> å­—æ®µæ¥å—ç”¨æˆ·æŸ¥è¯¢çš„åµŒå…¥è¡¨ç¤ºã€‚<code>path</code> å­—æ®µå¯¹åº”äºåŒ…å«åµŒå…¥çš„æ–‡æ¡£å­—æ®µã€‚<code>numCandidates</code> æŒ‡å®šè¦è€ƒè™‘çš„å€™é€‰æ–‡æ¡£æ•°é‡ä»¥åŠè¦è¿”å›çš„ç»“æœæ•°é‡é™åˆ¶ã€‚</li>
<li><code>$project</code> é˜¶æ®µæ ¼å¼åŒ–ç»“æœï¼Œä»¥æ’é™¤ <code>_id</code> å’Œ <code>embedding</code> å­—æ®µã€‚</li>
<li>aggregate æ‰§è¡Œå®šä¹‰çš„ç®¡é“ä»¥è·å–å‘é‡æœç´¢ç»“æœã€‚æœ€åä¸€æ­¥å°†ä»æ•°æ®åº“è¿”å›çš„æ¸¸æ ‡è½¬æ¢ä¸ºåˆ—è¡¨ã€‚</li>
</ol>
<pre class="codehilite"><code class="language-python">def vector_search(user_query, collection):
    &quot;&quot;&quot;
    æ ¹æ®ç”¨æˆ·æŸ¥è¯¢åœ¨ MongoDB é›†åˆä¸­æ‰§è¡Œå‘é‡æœç´¢ã€‚

    å‚æ•°ï¼š
    user_query (str)ï¼šç”¨æˆ·çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚
    collection (MongoCollection)ï¼šè¦æœç´¢çš„ MongoDB é›†åˆã€‚

    è¿”å›å€¼ï¼š
    listï¼šåŒ¹é…æ–‡æ¡£çš„åˆ—è¡¨ã€‚
    &quot;&quot;&quot;

    # ä¸ºç”¨æˆ·æŸ¥è¯¢ç”ŸæˆåµŒå…¥
    query_embedding = get_embedding(user_query)

    if query_embedding is None:
        return &quot;Invalid query or embedding generation failed.&quot;

    # å®šä¹‰å‘é‡æœç´¢ç®¡é“
    pipeline = [
        {
            &quot;$vectorSearch&quot;: {
                &quot;index&quot;: &quot;vector_index&quot;,
                &quot;queryVector&quot;: query_embedding,
                &quot;path&quot;: &quot;embedding&quot;,
                &quot;numCandidates&quot;: 150,  # è¦è€ƒè™‘çš„å€™é€‰åŒ¹é…æ•°é‡
                &quot;limit&quot;: 5  # è¿”å›å‰ 5 ä¸ªåŒ¹é…é¡¹
            }
        },
        {
            &quot;$project&quot;: {
                &quot;_id&quot;: 0,  # æ’é™¤ _id å­—æ®µ
                &quot;embedding&quot;: 0,  # æ’é™¤ embedding å­—æ®µ
                &quot;score&quot;: {
                    &quot;$meta&quot;: &quot;vectorSearchScore&quot;  # åŒ…æ‹¬æœç´¢åˆ†æ•°
                }
            }
        }
    ]

    # æ‰§è¡Œæœç´¢
    results = collection.aggregate(pipeline)
    return list(results)
</code></pre>

<h2 id="6-claude-3">æ­¥éª¤ 6ï¼šä½¿ç”¨ Claude 3 æ¨¡å‹å¤„ç†ç”¨æˆ·æŸ¥è¯¢</h2>
<p>æœ¬æ•™ç¨‹çš„æœ€åä¸€éƒ¨åˆ†æ¦‚è¿°äº†æ‰§è¡Œçš„æ“ä½œé¡ºåºå¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¥å—ç”¨æˆ·æŸ¥è¯¢ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰ã€‚</li>
<li>ä½¿ç”¨ VoyageAI åµŒå…¥æ¨¡å‹ä¸ºç”¨æˆ·æŸ¥è¯¢ç”ŸæˆåµŒå…¥ã€‚</li>
<li>åŠ è½½ Anthropic Claude 3ï¼Œç‰¹åˆ«æ˜¯â€œclaude-3-opus-20240229â€æ¨¡å‹ï¼Œä½œä¸º RAG ç³»ç»Ÿçš„åŸºç¡€æ¨¡å‹ã€‚</li>
<li>ä½¿ç”¨ç”¨æˆ·æŸ¥è¯¢çš„åµŒå…¥æ‰§è¡Œå‘é‡æœç´¢ï¼Œä»¥ä»çŸ¥è¯†åº“ä¸­è·å–ç›¸å…³ä¿¡æ¯ï¼Œä¸ºåŸºç¡€æ¨¡å‹æä¾›é¢å¤–ä¸Šä¸‹æ–‡ã€‚</li>
<li>å°†ç”¨æˆ·æŸ¥è¯¢å’Œæ”¶é›†åˆ°çš„é¢å¤–ä¿¡æ¯æäº¤ç»™åŸºç¡€æ¨¡å‹ä»¥ç”Ÿæˆå“åº”ã€‚</li>
</ul>
<p>ä¸€ä¸ªé‡è¦çš„æ³¨æ„äº‹é¡¹æ˜¯ï¼Œç”¨æˆ·æŸ¥è¯¢åµŒå…¥çš„ç»´åº¦ä¸ MongoDB Atlas ä¸Šçš„å‘é‡æœç´¢ç´¢å¼•å®šä¹‰ä¸­è®¾ç½®çš„ç»´åº¦ç›¸åŒ¹é…ã€‚</p>
<p>æ­¤æ­¥éª¤ä¸­çš„ä¸‹ä¸€æ­¥æ˜¯å¯¼å…¥ anthropic åº“å¹¶åŠ è½½å®¢æˆ·ç«¯ä»¥è®¿é—® anthropic å¤„ç†æ¶ˆæ¯å’Œè®¿é—® Claude æ¨¡å‹çš„æ–¹æ³•ã€‚ç¡®ä¿æ‚¨è·å– Anthropic API å¯†é’¥ï¼Œè¯¥å¯†é’¥ä½äº <a href="https://console.anthropic.com/settings/keys">å®˜æ–¹ Anthropic ç½‘ç«™</a> çš„è®¾ç½®é¡µé¢ä¸­ã€‚</p>
<pre class="codehilite"><code class="language-python">import anthropic
client = anthropic.Client(api_key=userdata.get(&quot;ANTHROPIC_API_KEY&quot;))
</code></pre>

<p>ä¸‹é¢æ˜¯å¯¹ä¸‹é¢ä»£ç ç‰‡æ®µä¸­æ“ä½œçš„æ›´è¯¦ç»†æè¿°ï¼š</p>
<ol>
<li>å‘é‡æœç´¢æ‰§è¡Œï¼šè¯¥å‡½æ•°é¦–å…ˆä½¿ç”¨ç”¨æˆ·çš„æŸ¥è¯¢å’ŒæŒ‡å®šçš„é›†åˆä½œä¸ºå‚æ•°è°ƒç”¨ <code>vector_search</code>ã€‚è¿™ä¼šåœ¨é›†åˆå†…æ‰§è¡Œæœç´¢ï¼Œåˆ©ç”¨å‘é‡åµŒå…¥æ¥æŸ¥æ‰¾ä¸æŸ¥è¯¢ç›¸å…³çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>ç¼–è¯‘æœç´¢ç»“æœï¼š<code>search_result</code> åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç”¨äºèšåˆæœç´¢ä¿¡æ¯ã€‚é€šè¿‡è¿­ä»£ <code>vector_search</code> å‡½æ•°è¿”å›çš„ç»“æœæ¥ç¼–è¯‘æœç´¢ç»“æœï¼Œå°†æ¯ä¸ªé¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€å…¬å¸åç§°ã€URLã€å‘å¸ƒæ—¥æœŸã€æ–‡ç«  URL å’Œæè¿°ï¼‰æ ¼å¼åŒ–ä¸ºäººç±»å¯è¯»çš„å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨æ¯ä¸ªæ¡ç›®æœ«å°¾é™„åŠ ä¿¡æ¯å’Œæ¢è¡Œç¬¦ <code>\n</code>ã€‚</li>
<li>ä½¿ç”¨ Anthropic å®¢æˆ·ç«¯ç”Ÿæˆå“åº”ï¼šç„¶åï¼Œè¯¥å‡½æ•°æ„å»ºä¸€ä¸ªè¯·æ±‚åˆ° Anthropic APIï¼ˆé€šè¿‡å®¢æˆ·ç«¯å¯¹è±¡ï¼Œå¯èƒ½æ˜¯å…ˆå‰åˆ›å»ºçš„ <code>anthropic.Client</code> ç±»çš„å®ä¾‹ï¼‰ã€‚å®ƒæŒ‡å®šï¼š
- è¦ä½¿ç”¨çš„æ¨¡å‹ï¼ˆâ€œclaude-3-opus-20240229â€ï¼‰è¡¨ç¤º Claude 3 æ¨¡å‹çš„ç‰¹å®šç‰ˆæœ¬ã€‚
- ç”Ÿæˆå“åº”çš„æœ€å¤§ä»¤ç‰Œé™åˆ¶ï¼ˆ<code>max_tokens=1024</code>ï¼‰ã€‚
- ç³»ç»Ÿæè¿°æŒ‡å¯¼æ¨¡å‹å……å½“â€œé£é™©æŠ•èµ„ç§‘æŠ€åˆ†æå¸ˆâ€ï¼Œå¯ä»¥è®¿é—®ç§‘æŠ€å…¬å¸æ–‡ç« å’Œä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨æ­¤ä¸Šä¸‹æ–‡æä¾›å»ºè®®ã€‚
- è¦å¤„ç†çš„å®é™…æ¶ˆæ¯ç»“åˆäº†ç”¨æˆ·æŸ¥è¯¢å’Œæ”¶é›†åˆ°çš„æœç´¢ç»“æœä½œä¸ºä¸Šä¸‹æ–‡ã€‚</li>
<li>è¿”å›ç”Ÿæˆçš„å“åº”å’Œæœç´¢ç»“æœï¼šå®ƒä»å“åº”å†…å®¹çš„ç¬¬ä¸€é¡¹ä¸­æå–å¹¶è¿”å›å“åº”æ–‡æœ¬ï¼Œä»¥åŠç¼–è¯‘çš„æœç´¢ç»“æœã€‚</li>
</ol>
<pre class="codehilite"><code class="language-python">def handle_user_query(query, collection):

  get_knowledge = vector_search(query, collection)

  search_result = ''
  for result in get_knowledge:
    search_result += (
        f&quot;Title: {result.get('title', 'N/A')}, &quot;
        f&quot;Company Name: {result.get('companyName', 'N/A')}, &quot;
        f&quot;Company URL: {result.get('companyUrl', 'N/A')}, &quot;
        f&quot;Date Published: {result.get('published_at', 'N/A')}, &quot;
        f&quot;Article URL: {result.get('url', 'N/A')}, &quot;
        f&quot;Description: {result.get('description', 'N/A')}, \n&quot;
    )

  response = client.messages.create(
    model=&quot;claude-3-opus-20240229&quot;,
    max_tokens=1024,
    system=&quot;You are Venture Captital Tech Analyst with access to some tech company articles and information. You use the information you are given to provide advice.&quot;,
    messages=[
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Answer this user query: &quot; + query + &quot; with the following context: &quot; + search_result}
    ]
  )

  return (response.content[0].text), search_result
</code></pre>

<p>æœ¬æ•™ç¨‹çš„æœ€åä¸€æ­¥æ˜¯åˆå§‹åŒ–æŸ¥è¯¢ï¼Œå°†å…¶ä¼ é€’ç»™ <code>handle_user_query</code> å‡½æ•°å¹¶æ‰“å°è¿”å›çš„å“åº”ã€‚</p>
<pre class="codehilite"><code class="language-python"># è¿›è¡ŒæŸ¥è¯¢å¹¶æ£€ç´¢æ¥æº
query = &quot;Give me the best tech stock to invest in and tell me why&quot;
response, source_information = handle_user_query(query, collection)

print(f&quot;Response: {response}&quot;)
print(f&quot;\\nSource Information: \\n{source_information}&quot;)
</code></pre>

<pre class="codehilite"><code>Response: Based on the information provided in the article titles and descriptions, Alibaba Group Holding Limited appears to be a top technology stock pick for 2023 according to renowned investor Ray Dalio. The article &quot;Top 10 Technology Stocks to Buy in 2023 According to Ray Dalio&quot; suggests that Alibaba is one of Dalio's favored tech investments for the year.

As a venture capital tech analyst, I would recommend considering an investment in Alibaba for the following reasons:

1. Endorsement from a respected investor: Ray Dalio, known for his successful investment strategies, has included Alibaba in his top 10 technology stock picks for 2023. His backing lends credibility to the investment potential of the company.

2. Strong market position: Alibaba is a leading e-commerce company in China with a significant market share. It has a diversified business model spanning e-commerce, cloud computing, digital media, and entertainment.

3. Growth potential: With China's large and growing middle class, Alibaba is well-positioned to benefit from increasing consumer spending and the shift towards online shopping.

However, it's essential to consider the following points as well:

1. Regulatory risks: Chinese tech companies, including Alibaba, have faced increased regulatory scrutiny in recent times. Changes in government policies could impact the company's growth and profitability.

2. Competition: While Alibaba is a dominant player, it faces competition from other tech giants like Tencent and JD.com in various business segments.

3. Geopolitical tensions: Ongoing tensions between the U.S. and China could lead to market volatility and impact investor sentiment towards Chinese stocks.

As with any investment, it's crucial to conduct thorough research, consider your risk tolerance, and diversify your portfolio. Keep in mind that the information provided here is based on limited data points, and stock prices can be influenced by various factors beyond the scope of this context.
Source Information: 
Title: Top 10 Technology Stocks to Buy in 2023 According to Ray Dalio, Company Name: ALIBABA GROUP HOLDING LIMITED, Company URL: https://hackernoon.com/company/alibabagroupholdinglimited, Date Published: 2023-04-21 11:58:00, Article URL: https://uk.finance.yahoo.com/news/top-10-technology-stocks-buy-155830366.html, Description: In this article we discuss the top 10 technology stocks to buy in 2023 according to Ray Dalio. If you want to skip our detailed analysis of Dalioâ€™s investment philosophy and portfolio construction, 
Title: 3 Tech Stocks I Love Right Now, Company Name: 10Clouds, Company URL: https://hackernoon.com/company/10clouds, Date Published: 2023-04-02 11:30:00, Article URL: https://www.msn.com/en-xl/money/other/3-tech-stocks-i-love-right-now/ar-AA19n9Ht, Description: These are tech giants but they''re also great investments., 
Title: 3 Millionaire-Maker Hydrogen Stocks to Buy Before the Window Closes, Company Name: Air Products &amp; Chemicals, Company URL: https://hackernoon.com/company/airproductschemicals, Date Published: 2023-07-28 12:18:00, Article URL: https://www.msn.com/en-us/money/topstocks/3-millionaire-maker-hydrogen-stocks-to-buy-before-the-window-closes/ar-AA1etN8O, Description: These are the best hydrogen stocks to buy with multibagger returns potential.More From InvestorPlace Buy This $5 Stock BEFORE This Apple Project Goes Live Wall Street Titan: Hereâ€™s My #1 Stock for 2023 The $1 Investment You MUST Take Advantage of Right Now It doesnâ€™t matter if you have $500 or $5 million., 
Title: Why it may be time to sell the pop in tech stocks: BlackRock, Company Name: BlackRock, Company URL: https://hackernoon.com/company/blackrock, Date Published: 2023-02-13 19:06:00, Article URL: https://news.yahoo.com/why-it-may-be-time-to-sell-the-pop-in-tech-stocks-blackrock-190606866.html, Description: Household tech names like Apple Meta and Netflix have soared so far in 2023 but one strategist says the gains aren''t likely to last. It''s time to take profits on tech stocks â€” the early sector winner of 2023 â€” as the Federal Reserve may soon dash hopes for a pivot on interest rates, 
Title: The harsh reality for investors eyeing tech stocks in 2023: Morning Brief, Company Name: 10Clouds, Company URL: https://hackernoon.com/company/10clouds, Date Published: 2023-01-02 11:18:00, Article URL: https://news.yahoo.com/the-harsh-reality-for-investors-eyeing-tech-stocks-in-2023-morning-brief-111854804.html, Description: Curious on how to buy battered tech stocks? Here''s a quick tip. More on that and what else to watch in business on Monday.,
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="misc/prompt_caching_zh.html" class="nav-link prev">â† ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</a><a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="nav-link next">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ â†’</a></nav>
        </main>
    </div>
</body>
</html>