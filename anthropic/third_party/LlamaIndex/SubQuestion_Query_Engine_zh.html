<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <title>SubQuestionQueryEngine</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder expanded" data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="subquestionqueryengine">SubQuestionQueryEngine</h1>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦è·¨è¶Šå¤šä¸ªæ–‡æ¡£æ¥å›ç­”å¤æ‚æŸ¥è¯¢çš„åœºæ™¯ã€‚</p>
<p>åœ¨æœ¬ Notebook ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•é€šè¿‡å°†å¤æ‚æŸ¥è¯¢åˆ†è§£ä¸ºæ›´ç®€å•çš„å­æŸ¥è¯¢ï¼Œå¹¶åˆ©ç”¨ <code>SubQuestionQueryEngine</code> æ¥ç”Ÿæˆç­”æ¡ˆï¼Œä»è€Œè§£å†³è·¨è¶Šå¤šä¸ªæ–‡æ¡£çš„å¤æ‚æŸ¥è¯¢é—®é¢˜ã€‚</p>
<h3 id="_1">å®‰è£…</h3>
<pre class="codehilite"><code class="language-python">!pip install llama-index
!pip install llama-index-llms-anthropic
!pip install llama-index-embeddings-huggingface
</code></pre>

<h3 id="api">è®¾ç½® API å¯†é’¥</h3>
<pre class="codehilite"><code class="language-python">import os
os.environ['ANTHROPIC_API_KEY'] = 'YOUR ANTHROPIC API KEY'
</code></pre>

<h3 id="llm-embedding">è®¾ç½® LLM å’Œ Embedding æ¨¡å‹</h3>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ Anthropic æœ€æ–°å‘å¸ƒçš„ <code>Claude-3 Opus</code> LLMã€‚</p>
<pre class="codehilite"><code class="language-python">from llama_index.llms.anthropic import Anthropic
from llama_index.embeddings.huggingface import HuggingFaceEmbedding
</code></pre>

<pre class="codehilite"><code class="language-python">llm = Anthropic(temperature=0.0, model='claude-3-opus-20240229')
embed_model = HuggingFaceEmbedding(model_name=&quot;BAAI/bge-base-en-v1.5&quot;)
</code></pre>

<pre class="codehilite"><code class="language-python">from llama_index.core import Settings
Settings.llm = llm
Settings.embed_model = embed_model
Settings.chunk_size = 512
</code></pre>

<h3 id="_2">è®¾ç½®æ—¥å¿—</h3>
<pre class="codehilite"><code class="language-python"># æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚
# è¯¦æƒ…ï¼šJupyter åœ¨åå°è¿è¡Œä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚
#          è¿™ä¼šå¯¼è‡´æˆ‘ä»¬åœ¨å¯åŠ¨äº‹ä»¶å¾ªç¯ä»¥è¿›è¡Œå¼‚æ­¥æŸ¥è¯¢æ—¶å‡ºç°åµŒå¥—äº‹ä»¶å¾ªç¯ã€‚
#          è¿™é€šå¸¸æ˜¯ä¸å…è®¸çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ nest_asyncio æ¥æ–¹ä¾¿åœ°å…è®¸å®ƒã€‚
import nest_asyncio

nest_asyncio.apply()

import logging
import sys

# è®¾ç½®æ ¹è®°å½•å™¨
logger = logging.getLogger()
logger.setLevel(logging.INFO)  # å°†è®°å½•å™¨çº§åˆ«è®¾ç½®ä¸º INFO

# æ¸…é™¤æ‰€æœ‰ç°æœ‰çš„å¤„ç†ç¨‹åº
logger.handlers = []

# è®¾ç½® StreamHandler ä»¥è¾“å‡ºåˆ° sys.stdout (Colab çš„è¾“å‡º)
handler = logging.StreamHandler(sys.stdout)
handler.setLevel(logging.INFO)  # å°†å¤„ç†ç¨‹åºçº§åˆ«è®¾ç½®ä¸º INFO

# å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°è®°å½•å™¨
logger.addHandler(handler)

from IPython.display import display, HTML
</code></pre>

<h3 id="_3">ä¸‹è½½æ•°æ®</h3>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ Uber å’Œ Lyft 2021 å¹´çš„ 10K SEC æ–‡ä»¶ã€‚</p>
<pre class="codehilite"><code class="language-python">!wget 'https://raw.githubusercontent.com/run-llama/llama_index/main/docs/examples/data/10k/uber_2021.pdf' -O './uber_2021.pdf'
!wget 'https://raw.githubusercontent.com/run-llama/llama_index/main/docs/examples/data/10k/lyft_2021.pdf' -O './lyft_2021.pdf'
</code></pre>

<pre class="codehilite"><code>--2024-03-08 07:07:32--  https://raw.githubusercontent.com/run-llama/llama_index/main/docs/examples/data/10k/uber_2021.pdf
æ­£åœ¨è§£æ raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.109.133, 185.199.108.133, 185.199.110.133, ...
æ­£åœ¨è¿æ¥ raw.githubusercontent.com (raw.githubusercontent.com)|185.199.109.133|:443... å·²è¿æ¥ã€‚
å·²å‘é€ HTTP è¯·æ±‚ï¼Œç­‰å¾…å“åº”... 200 OK
æ–‡ä»¶å¤§å°ï¼š1880483 (1.8M) [application/octet-stream]
æ­£åœ¨ä¿å­˜åˆ° â€˜./uber_2021.pdfâ€™

./uber_2021.pdf     100%[===================&gt;]   1.79M  --.-KB/s    åœ¨ 0.02s å†…

2024-03-08 07:07:32 (87.4 MB/s) - â€˜./uber_2021.pdfâ€™ å·²ä¿å­˜ [1880483/1880483]

--2024-03-08 07:07:33--  https://raw.githubusercontent.com/run-llama/llama_index/main/docs/examples/data/10k/lyft_2021.pdf
æ­£åœ¨è§£æ raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.110.133, 185.199.111.133, 185.199.109.133, ...
æ­£åœ¨è¿æ¥ raw.githubusercontent.com (raw.githubusercontent.com)|185.199.110.133|:443... å·²è¿æ¥ã€‚
å·²å‘é€ HTTP è¯·æ±‚ï¼Œç­‰å¾…å“åº”... 200 OK
æ–‡ä»¶å¤§å°ï¼š1440303 (1.4M) [application/octet-stream]
æ­£åœ¨ä¿å­˜åˆ° â€˜./lyft_2021.pdfâ€™

./lyft_2021.pdf     100%[===================&gt;]   1.37M  --.-KB/s    åœ¨ 0.02s å†…

2024-03-08 07:07:33 (74.9 MB/s) - â€˜./lyft_2021.pdfâ€™ å·²ä¿å­˜ [1440303/1440303]
</code></pre>

<h3 id="_4">åŠ è½½æ•°æ®</h3>
<pre class="codehilite"><code class="language-python">from llama_index.core import SimpleDirectoryReader
lyft_docs = SimpleDirectoryReader(input_files=[&quot;lyft_2021.pdf&quot;]).load_data()
uber_docs = SimpleDirectoryReader(input_files=[&quot;uber_2021.pdf&quot;]).load_data()
</code></pre>

<pre class="codehilite"><code class="language-python">print(f'å·²åŠ è½½ Lyft 10-K æ–‡ä»¶ï¼ŒåŒ…å« {len(lyft_docs)} é¡µ')
print(f'å·²åŠ è½½ Uber 10-K æ–‡ä»¶ï¼ŒåŒ…å« {len(uber_docs)} é¡µ')
</code></pre>

<pre class="codehilite"><code>å·²åŠ è½½ Lyft 10-K æ–‡ä»¶ï¼ŒåŒ…å« 238 é¡µ
å·²åŠ è½½ Uber 10-K æ–‡ä»¶ï¼ŒåŒ…å« 307 é¡µ
</code></pre>

<h3 id="_5">ç´¢å¼•æ•°æ®</h3>
<pre class="codehilite"><code class="language-python">from llama_index.core import VectorStoreIndex
lyft_index = VectorStoreIndex.from_documents(lyft_docs[:100])
uber_index = VectorStoreIndex.from_documents(uber_docs[:100])
</code></pre>

<h3 id="_6">åˆ›å»ºæŸ¥è¯¢å¼•æ“</h3>
<pre class="codehilite"><code class="language-python">lyft_engine = lyft_index.as_query_engine(similarity_top_k=5)
</code></pre>

<pre class="codehilite"><code class="language-python">uber_engine = uber_index.as_query_engine(similarity_top_k=5)
</code></pre>

<h3 id="_7">æŸ¥è¯¢</h3>
<pre class="codehilite"><code class="language-python">response = await lyft_engine.aquery('What is the revenue of Lyft in 2021? Answer in millions with page reference')
display(HTML(f'&lt;p style=&quot;font-size:20px&quot;&gt;{response.response}&lt;/p&gt;'))
</code></pre>

<pre class="codehilite"><code>HTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
</code></pre>

<p style="font-size:20px">æ ¹æ®ç¬¬ 79 é¡µçš„åˆå¹¶è¿è¥æŠ¥è¡¨ï¼ŒLyft åœ¨æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥çš„è´¢å¹´æ€»æ”¶å…¥ä¸º 32.083 äº¿ç¾å…ƒã€‚</p>

<pre class="codehilite"><code class="language-python">response = await uber_engine.aquery('What is the revenue of Uber in 2021? Answer in millions, with page reference')
display(HTML(f'&lt;p style=&quot;font-size:20px&quot;&gt;{response.response}&lt;/p&gt;'))
</code></pre>

<pre class="codehilite"><code>HTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
</code></pre>

<p style="font-size:20px">æ ¹æ®ç¬¬ 77 é¡µçš„åˆå¹¶è¿è¥æŠ¥è¡¨ï¼ŒUber åœ¨æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥çš„è´¢å¹´æ”¶å…¥ä¸º 174.55 äº¿ç¾å…ƒã€‚</p>

<h3 id="_8">åˆ›å»ºå·¥å…·</h3>
<pre class="codehilite"><code class="language-python">from llama_index.core.tools import QueryEngineTool, ToolMetadata
from llama_index.core.query_engine import SubQuestionQueryEngine

query_engine_tools = [
    QueryEngineTool(
        query_engine=lyft_engine,
        metadata=ToolMetadata(name='lyft_10k', description='æä¾› 2021 å¹´ Lyft è´¢åŠ¡ä¿¡æ¯')
    ),
    QueryEngineTool(
        query_engine=uber_engine,
        metadata=ToolMetadata(name='uber_10k', description='æä¾› 2021 å¹´ Uber è´¢åŠ¡ä¿¡æ¯')
    ),
]
</code></pre>

<h3 id="subquestionqueryengine_1">åˆ›å»º <code>SubQuestionQueryEngine</code></h3>
<pre class="codehilite"><code class="language-python">sub_question_query_engine = SubQuestionQueryEngine.from_defaults(query_engine_tools=query_engine_tools)
</code></pre>

<h3 id="_9">æŸ¥è¯¢</h3>
<pre class="codehilite"><code class="language-python">response = await sub_question_query_engine.aquery('Compare revenue growth of Uber and Lyft from 2020 to 2021')
</code></pre>

<pre class="codehilite"><code>HTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
ç”Ÿæˆäº† 4 ä¸ªå­é—®é¢˜ã€‚
 [1;3;38;2;237;90;200m[uber_10k] Q: What was Uber's revenue in 2020?
 [0m [1;3;38;2;90;149;237m[uber_10k] Q: What was Uber's revenue in 2021?
 [0m [1;3;38;2;11;159;203m[lyft_10k] Q: What was Lyft's revenue in 2020?
 [0m [1;3;38;2;155;135;227m[lyft_10k] Q: What was Lyft's revenue in 2021?
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;11;159;203m[lyft_10k] A: æ ¹æ® Lyft çš„åˆå¹¶è¿è¥æŠ¥è¡¨æ•°æ®ï¼ŒLyft åœ¨ 2020 å¹´çš„æ€»æ”¶å…¥ä¸º 2,364,681,000 ç¾å…ƒã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;90;149;237m[uber_10k] A: æ ¹æ® Uber çš„åˆå¹¶è¿è¥æŠ¥è¡¨ï¼ŒUber åœ¨ 2021 å¹´çš„æ”¶å…¥ä¸º 174.55 äº¿ç¾å…ƒã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;237;90;200m[uber_10k] A: æ ¹æ® Uber çš„åˆå¹¶è¿è¥æŠ¥è¡¨ï¼ŒUber åœ¨ 2020 å¹´çš„æ”¶å…¥ä¸º 111.39 äº¿ç¾å…ƒã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;155;135;227m[lyft_10k] A: æ ¹æ® Lyft çš„åˆå¹¶è¿è¥æŠ¥è¡¨ï¼ŒLyft åœ¨æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥çš„è´¢å¹´æ€»æ”¶å…¥ä¸º 3,208,323,000 ç¾å…ƒã€‚è¿™åŒ…æ‹¬ï¼š

- æ ¹æ® ASC 606 çš„å®¢æˆ·åˆåŒæ”¶å…¥ä¸º 2,957,979,000 ç¾å…ƒ
- æ ¹æ® ASC 842 çš„ç§Ÿèµæ”¶å…¥ä¸º 250,344,000 ç¾å…ƒ

å› æ­¤ï¼ŒLyft åœ¨æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥çš„è´¢å¹´æ€»æ”¶å…¥ä¸º 3,208,323,000 ç¾å…ƒã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
</code></pre>

<pre class="codehilite"><code class="language-python">display(HTML(f'&lt;p style=&quot;font-size:20px&quot;&gt;{response.response}&lt;/p&gt;'))
</code></pre>

<p style="font-size:20px">ä» 2020 å¹´åˆ° 2021 å¹´ï¼ŒUber å’Œ Lyft çš„æ”¶å…¥éƒ½å®ç°äº†æ˜¾è‘—å¢é•¿ï¼š

Uber çš„æ”¶å…¥ä» 2020 å¹´çš„ 111.39 äº¿ç¾å…ƒå¢é•¿åˆ° 2021 å¹´çš„ 174.55 äº¿ç¾å…ƒï¼ŒåŒæ¯”å¢é•¿çº¦ 56.7%ã€‚

Lyft çš„æ€»æ”¶å…¥ä» 2020 å¹´çš„ 2,364,681,000 ç¾å…ƒå¢é•¿åˆ° 2021 å¹´çš„ 3,208,323,000 ç¾å…ƒï¼Œå¢é•¿äº†çº¦ 35.7%ã€‚

å› æ­¤ï¼Œè™½ç„¶ Lyft çš„æ”¶å…¥åŸºæ•°è¾ƒä½ï¼Œä½† Uber åœ¨ 2020 å¹´è‡³ 2021 å¹´é—´çš„æ”¶å…¥å¢é•¿ç™¾åˆ†æ¯”æ›´é«˜ï¼ˆåˆ†åˆ«ä¸º 56.7% å’Œ 35.7%ï¼‰ã€‚

ç”±äº 2020 å¹´æ–°å† ç–«æƒ…å¯¹ä¸¤å®¶å…¬å¸çš„å«è½¦ä¸šåŠ¡äº§ç”Ÿäº†é‡å¤§å½±å“ï¼Œä¸¤å®¶å…¬å¸åœ¨ 2021 å¹´éƒ½å‡ºç°äº†å¼ºåŠ²åå¼¹ã€‚ä½† Uber çš„æ”¶å…¥å¢é•¿é€Ÿåº¦æ›´å¿«ï¼Œè¾¾åˆ°äº† 175 äº¿ç¾å…ƒï¼Œè€Œ Lyft ä¸º 32 äº¿ç¾å…ƒã€‚</p>

<pre class="codehilite"><code class="language-python">response = await sub_question_query_engine.aquery('Compare the investments made by Uber and Lyft')
</code></pre>

<pre class="codehilite"><code>HTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
ç”Ÿæˆäº† 4 ä¸ªå­é—®é¢˜ã€‚
 [1;3;38;2;237;90;200m[uber_10k] Q: What investments did Uber make in 2021
 [0m [1;3;38;2;90;149;237m[uber_10k] Q: What was the total amount invested by Uber in 2021
 [0m [1;3;38;2;11;159;203m[lyft_10k] Q: What investments did Lyft make in 2021
 [0m [1;3;38;2;155;135;227m[lyft_10k] Q: What was the total amount invested by Lyft in 2021
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;90;149;237m[uber_10k] A: æ ¹æ®æä¾›çš„å†…å®¹ï¼ŒUber åœ¨ 2021 å¹´è¿›è¡Œäº†ä»¥ä¸‹æŠ•èµ„ï¼š

- æ”¶è´­ä¸šåŠ¡ 23 äº¿ç¾å…ƒï¼ˆå‡€é¢ï¼Œæ‰£é™¤å·²æ”¶è´­ç°é‡‘ï¼‰
- è´­ä¹°å¯äº¤æ˜“è¯åˆ¸ 11 äº¿ç¾å…ƒ
- è´­ä¹°éå¯äº¤æ˜“è‚¡æƒè¯åˆ¸ 9.82 äº¿ç¾å…ƒ
- è´­ä¹°åº”æ”¶ç¥¨æ® 2.97 äº¿ç¾å…ƒ
- è´­ä¹°ç‰©ä¸šå’Œè®¾å¤‡ 2.98 äº¿ç¾å…ƒ

å› æ­¤ï¼ŒUber åœ¨ 2021 å¹´çš„æ€»æŠ•èµ„çº¦ä¸º 50 äº¿ç¾å…ƒï¼Œæ¶µç›–äº†ä¸šåŠ¡æ”¶è´­ã€å¯äº¤æ˜“å’Œéå¯äº¤æ˜“è¯åˆ¸ã€åº”æ”¶ç¥¨æ®ä»¥åŠç‰©ä¸šå’Œè®¾å¤‡è´­ä¹°ã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;11;159;203m[lyft_10k] A: æ ¹æ®æä¾›çš„å†…å®¹ï¼ŒLyft åœ¨ 2021 å¹´æŠ•èµ„äºå¯äº¤æ˜“è¯åˆ¸å’Œå®šæœŸå­˜æ¬¾ï¼š

- Lyft åœ¨ 2021 å¹´è´­ä¹°äº†ä»·å€¼ 38 äº¿ç¾å…ƒçš„å¯äº¤æ˜“è¯åˆ¸ã€‚è¿™äº›å¯äº¤æ˜“è¯åˆ¸åŒ…æ‹¬æŠ•èµ„çº§åˆ«çš„å¯ä¾›å‡ºå”®çš„å€ºåŠ¡è¯åˆ¸ã€‚

- Lyft åœ¨ 2021 å¹´è¿˜æŠ•èµ„äº†ä»·å€¼ 5 äº¿ç¾å…ƒçš„å®šæœŸå­˜æ¬¾ã€‚è¿™äº›å®šæœŸå­˜æ¬¾æŒ‰æˆæœ¬è®¡ä»·ï¼Œæ¥è¿‘å…¬å…ä»·å€¼ã€‚

æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥ï¼ŒLyft çš„æŠ•èµ„ç»„åˆçš„åŠ æƒå¹³å‡å‰©ä½™æœŸé™ä¸åˆ°ä¸€å¹´ã€‚Lyft çš„æŠ•èµ„æ”¿ç­–æ—¨åœ¨æœ€å¤§é™åº¦åœ°é™ä½ä¿¡ç”¨æŸå¤±é£é™©ã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;237;90;200m[uber_10k] A: æ ¹æ®æä¾›çš„å†…å®¹ï¼ŒUber åœ¨ 2021 å¹´çš„æŠ•èµ„æ—¨åœ¨ï¼š

- é€šè¿‡æ¿€åŠ±æªæ–½ã€æŠ˜æ‰£å’Œä¿ƒé”€æ´»åŠ¨ï¼Œå¢åŠ ä½¿ç”¨å…¶å¹³å°çš„å¸æœºã€æ¶ˆè´¹è€…ã€å•†æˆ·ã€æ‰˜è¿äººå’Œè¿è¥å•†çš„æ•°é‡
- åœ¨ç°æœ‰å¸‚åœºå’Œæ–°å¸‚åœºè¿›è¡Œæ‰©å¼ 
- å¢åŠ ç ”å‘æ”¯å‡º
- æ‰©å¤§è¥é”€æ¸ é“å’Œè¿è¥
- é›‡ä½£æ›´å¤šå‘˜å·¥
- åœ¨å…¶å¹³å°å¢åŠ æ–°äº§å“å’Œæ–°æœåŠ¡

å†…å®¹è¡¨æ˜ï¼ŒUber é¢„è®¡ç”±äºæŒç»­è¿›è¡Œæ­¤ç±»æŠ•èµ„è€Œå¯¼è‡´è¿è¥è´¹ç”¨å¤§å¹…å¢åŠ ï¼Œå› æ­¤åœ¨çŸ­æœŸå†…ä¼šäº§ç”ŸäºæŸã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
 [1;3;38;2;155;135;227m[lyft_10k] A: æ ¹æ®ä¸Šä¸‹æ–‡ä¸­æä¾›çš„è´¢åŠ¡ä¿¡æ¯ï¼Œç°é‡‘æµé‡è¡¨æ˜¾ç¤º Lyft åœ¨æˆªè‡³ 2021 å¹´ 12 æœˆ 31 æ—¥çš„è´¢å¹´ï¼ŒæŠ•èµ„æ´»åŠ¨äº§ç”Ÿçš„å‡€ç°é‡‘ä¸º 2.67 äº¿ç¾å…ƒã€‚è¿™ä¸»è¦åŒ…æ‹¬ï¼š

- å¯äº¤æ˜“è¯åˆ¸çš„é”€å”®å’Œåˆ°æœŸæ‰€å¾—æ¬¾é¡¹ 38 äº¿ç¾å…ƒ
- å®šæœŸå­˜æ¬¾åˆ°æœŸ 6.755 äº¿ç¾å…ƒ
- éƒ¨åˆ†è¢«è´­ä¹°å¯äº¤æ˜“è¯åˆ¸ 38 äº¿ç¾å…ƒå’Œå®šæœŸå­˜æ¬¾ 5 äº¿ç¾å…ƒæ‰€æŠµæ¶ˆ

å› æ­¤ï¼Œè™½ç„¶é”€å”®/åˆ°æœŸæ‰€å¾—æ¬¾é¡¹æ€»é¢çº¦ä¸º 45 äº¿ç¾å…ƒï¼Œä½† Lyft å°†å¤§éƒ¨åˆ†èµ„é‡‘è¿›è¡Œäº†å†æŠ•èµ„ï¼Œ2021 å¹´çš„å‡€æ–°å¢æŠ•èµ„çº¦ä¸º 2.67 äº¿ç¾å…ƒã€‚
 [0mHTTP Request: POST https://api.anthropic.com/v1/messages &quot;HTTP/1.1 200 OK&quot;
</code></pre>

<pre class="codehilite"><code class="language-python">display(HTML(f'&lt;p style=&quot;font-size:20px&quot;&gt;{response.response}&lt;/p&gt;'))
</code></pre>

<p style="font-size:20px">2021 å¹´ï¼ŒUber å’Œ Lyft çš„æŠ•èµ„ç±»å‹æœ‰æ‰€ä¸åŒï¼š

Uber çš„æ€»æŠ•èµ„çº¦ä¸º 50 äº¿ç¾å…ƒï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š

- 23 äº¿ç¾å…ƒç”¨äºæ”¶è´­ä¸šåŠ¡
- 11 äº¿ç¾å…ƒç”¨äºå¯äº¤æ˜“è¯åˆ¸
- 9.82 äº¿ç¾å…ƒç”¨äºéå¯äº¤æ˜“è‚¡æƒè¯åˆ¸
- 2.97 äº¿ç¾å…ƒç”¨äºåº”æ”¶ç¥¨æ®
- 2.98 äº¿ç¾å…ƒç”¨äºç‰©ä¸šå’Œè®¾å¤‡

Lyft çš„å‡€æŠ•èµ„çº¦ä¸º 2.67 äº¿ç¾å…ƒï¼Œä¸»è¦ç”¨äºï¼š

- å¯äº¤æ˜“è¯åˆ¸ï¼Œè´­ä¹°é¢ä¸º 38 äº¿ç¾å…ƒï¼Œä½†é”€å”®å’Œåˆ°æœŸé¢ä¹Ÿä¸º 38 äº¿ç¾å…ƒ
- å®šæœŸå­˜æ¬¾ 5 äº¿ç¾å…ƒï¼Œä½†åˆ°æœŸé¢ä¸º 6.755 äº¿ç¾å…ƒ

å› æ­¤ï¼ŒUber å¤§é‡æŠ•èµ„äºæ”¶è´­ä¸šåŠ¡ã€è¯åˆ¸ã€ç¥¨æ®å’Œç‰©ä¸šï¼Œè€Œ Lyft åˆ™ä¸“æ³¨äºçŸ­æœŸå¯äº¤æ˜“è¯åˆ¸å’Œå®šæœŸå­˜æ¬¾ï¼Œå¹¶å°†å¤§éƒ¨åˆ†æ”¶ç›Šè¿›è¡Œäº†å†æŠ•èµ„ã€‚ä¸ Lyft çš„å‡€æŠ•èµ„ç›¸æ¯”ï¼ŒUber çš„æ€»æŠ•èµ„é¢è¦å¤§å¾—å¤šã€‚</p>

<pre class="codehilite"><code class="language-python">
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="misc/speculative_prompt_caching_zh.html" class="nav-link prev">â† æŠ•æœºæ€§æç¤ºç¼“å­˜</a><a href="tool_use/tool_choice_zh.html" class="nav-link next">é€‰æ‹©å·¥å…· â†’</a></nav>
        </main>
    </div>
</body>
</html>