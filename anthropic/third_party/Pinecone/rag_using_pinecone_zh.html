<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <title>ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder expanded" data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="pinecone">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</h1>
<p>æœ¬ç¬”è®°æœ¬æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡ä¸€ç§ç§°ä¸ºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„æŠ€æœ¯ï¼Œå°† Claude ä¸ Pinecone å‘é‡æ•°æ®åº“ä¸­çš„æ•°æ®è¿æ¥èµ·æ¥ã€‚æˆ‘ä»¬å°†æ¶µç›–ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>ä½¿ç”¨ Voyage AI çš„åµŒå…¥æ¨¡å‹åµŒå…¥æ•°æ®é›†</li>
<li>å°†åµŒå…¥ä¸Šä¼ åˆ° Pinecone ç´¢å¼•</li>
<li>ä»å‘é‡æ•°æ®åº“æ£€ç´¢ä¿¡æ¯</li>
<li>ä½¿ç”¨ Claude å›ç­”æ¥è‡ªæ•°æ®åº“çš„ä¿¡æ¯</li>
</ol>
<h2 id="_1">è®¾ç½®</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®‰è£…å¿…è¦çš„åº“å¹¶è®¾ç½®æˆ‘ä»¬å°†åœ¨æ­¤ç¬”è®°æœ¬ä¸­ä½¿ç”¨çš„ API å¯†é’¥ã€‚æˆ‘ä»¬éœ€è¦è·å–ä¸€ä¸ª <a href="https://docs.anthropic.com/claude/reference/getting-started-with-the-api">Claude API å¯†é’¥</a>ã€ä¸€ä¸ªå…è´¹çš„ <a href="https://docs.pinecone.io/docs/quickstart">Pinecone API å¯†é’¥</a> å’Œä¸€ä¸ªå…è´¹çš„ <a href="https://docs.voyageai.com/install/">Voyage AI API å¯†é’¥</a>ã€‚</p>
<pre class="codehilite"><code class="language-python">%pip install anthropic datasets pinecone-client voyageai
</code></pre>

<pre class="codehilite"><code class="language-python">#åœ¨æ­¤å¤„æ’å…¥æ‚¨çš„ API å¯†é’¥
ANTHROPIC_API_KEY=&quot;&lt;YOUR_ANTHROPIC_API_KEY&gt;&quot;
PINECONE_API_KEY=&quot;&lt;YOUR_PINECONE_API_KEY&gt;&quot;
VOYAGE_API_KEY=&quot;&lt;YOUR_VOYAGE_API_KEY&gt;&quot;
</code></pre>

<h2 id="_2">ä¸‹è½½æ•°æ®é›†</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬ä¸‹è½½åŒ…å« 10k å¤šä¸ªäºšé©¬é€Šäº§å“æè¿°çš„äºšé©¬é€Šäº§å“æ•°æ®é›†ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° DataFrame ä¸­ã€‚</p>
<pre class="codehilite"><code class="language-python">import pandas as pd

# ä¸‹è½½ JSONL æ–‡ä»¶
!wget https://www-cdn.anthropic.com/48affa556a5af1de657d426bcc1506cdf7e2f68e/amazon-products.jsonl

data = []
with open('amazon-products.jsonl', 'r') as file:
    for line in file:
        try:
            data.append(eval(line))
        except:
            pass

df = pd.DataFrame(data)
display(df.head())
len(df)
</code></pre>

<h2 id="_3">å‘é‡æ•°æ®åº“</h2>
<p>è¦åˆ›å»ºæˆ‘ä»¬çš„å‘é‡æ•°æ®åº“ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€ä¸ªæ¥è‡ª Pinecone çš„å…è´¹ API å¯†é’¥ã€‚è·å¾—å¯†é’¥åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼åˆå§‹åŒ–æ•°æ®åº“ï¼š</p>
<pre class="codehilite"><code class="language-python">from pinecone import Pinecone

pc = Pinecone(api_key=PINECONE_API_KEY)
</code></pre>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¾ç½®ç´¢å¼•è§„èŒƒï¼Œå®ƒå…è®¸æˆ‘ä»¬å®šä¹‰è¦åœ¨å…¶ä¸­éƒ¨ç½²ç´¢å¼•çš„äº‘æä¾›å•†å’ŒåŒºåŸŸã€‚æ‚¨å¯ä»¥åœ¨<a href="https://www.pinecone.io/docs/data-types/metadata/">æ­¤å¤„</a>æ‰¾åˆ°æ‰€æœ‰å¯ç”¨æä¾›å•†å’ŒåŒºåŸŸçš„åˆ—è¡¨ã€‚</p>
<pre class="codehilite"><code class="language-python">from pinecone import ServerlessSpec

spec = ServerlessSpec(
    cloud=&quot;aws&quot;, region=&quot;us-west-2&quot;
)
</code></pre>

<p>ç„¶åï¼Œæˆ‘ä»¬åˆå§‹åŒ–ç´¢å¼•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Voyage çš„â€œvoyage-2â€æ¨¡å‹æ¥åˆ›å»ºåµŒå…¥ï¼Œå› æ­¤æˆ‘ä»¬å°†ç»´åº¦è®¾ç½®ä¸º 1024ã€‚</p>
<pre class="codehilite"><code class="language-python">index_name = 'amazon-products'
existing_indexes = [
    index_info[&quot;name&quot;] for index_info in pc.list_indexes()
]

# æ£€æŸ¥ç´¢å¼•æ˜¯å¦å·²å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ï¼Œåˆ™ä¸åº”å­˜åœ¨ï¼‰
if index_name not in existing_indexes:
    # å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºç´¢å¼•
    pc.create_index(
        index_name,
        dimension=1024,  # voyage-2 åµŒå…¥çš„ç»´åº¦
        metric='dotproduct',
        spec=spec
    )
    # ç­‰å¾…ç´¢å¼•åˆå§‹åŒ–
    while not pc.describe_index(index_name).status['ready']:
        time.sleep(1)

# è¿æ¥åˆ°ç´¢å¼•
index = pc.Index(index_name)
time.sleep(1)
# æŸ¥çœ‹ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯
index.describe_index_stats()
</code></pre>

<p>æˆ‘ä»¬åº”è¯¥çœ‹åˆ°æ–°çš„ Pinecone ç´¢å¼•çš„ total_vector_count ä¸º 0ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•å‘é‡ã€‚</p>
<h2 id="_4">åµŒå…¥</h2>
<p>è¦å¼€å§‹ä½¿ç”¨ Voyage çš„åµŒå…¥ï¼Œè¯·è®¿é—®<a href="https://www.voyageai.com">æ­¤å¤„</a>è·å– API å¯†é’¥ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬è®¾ç½®æˆ‘ä»¬çš„ Voyage å®¢æˆ·ç«¯ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>embed</code> æ–¹æ³•åˆ›å»ºåµŒå…¥ã€‚è¦äº†è§£æœ‰å…³å°† Voyage åµŒå…¥ä¸ Claude ç»“åˆä½¿ç”¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://github.com/anthropics/anthropic-cookbook/blob/main/third_party/VoyageAI/how_to_create_embeddings.html">æ­¤ç¬”è®°æœ¬</a>ã€‚</p>
<pre class="codehilite"><code class="language-python">import voyageai

vo = voyageai.Client(api_key=VOYAGE_API_KEY)

texts = [&quot;Sample text 1&quot;, &quot;Sample text 2&quot;]

result = vo.embed(texts, model=&quot;voyage-2&quot;, input_type=&quot;document&quot;)
print(result.embeddings[0])
print(result.embeddings[1])
</code></pre>

<h2 id="pinecone_1">å°†æ•°æ®ä¸Šä¼ åˆ° Pinecone ç´¢å¼•</h2>
<p>è®¾ç½®å¥½åµŒå…¥æ¨¡å‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è·å–äº§å“æè¿°ï¼ŒåµŒå…¥å®ƒä»¬ï¼Œå¹¶å°†åµŒå…¥ä¸Šä¼ åˆ° Pinecone ç´¢å¼•ã€‚</p>
<pre class="codehilite"><code class="language-python">from tqdm.auto import tqdm
from time import sleep

descriptions = df[&quot;text&quot;].tolist()
batch_size = 100  # ä¸€æ¬¡åˆ›å»ºå’Œæ’å…¥å¤šå°‘ä¸ªåµŒå…¥

for i in tqdm(range(0, len(descriptions), batch_size)):
    # æŸ¥æ‰¾æ‰¹æ¬¡çš„ç»“æŸ
    i_end = min(len(descriptions), i+batch_size)
    descriptions_batch = descriptions[i:i_end]
    # åˆ›å»ºåµŒå…¥ï¼ˆæ·»åŠ  try-except ä»¥é¿å… RateLimitErrorã€‚Voyage ç›®å‰æ¯åˆ†é’Ÿå…è®¸ 300 ä¸ªè¯·æ±‚ã€‚ï¼‰
    done = False
    while not done:
        try:
            res = vo.embed(descriptions_batch, model=&quot;voyage-2&quot;, input_type=&quot;document&quot;)
            done = True
        except:
            sleep(5)

    embeds = [record for record in res.embeddings]
    # ä¸ºæ¯ä¸ªæ–‡æœ¬åˆ›å»ºå”¯ä¸€ ID
    ids_batch = [f&quot;description_{idx}&quot; for idx in range(i, i_end)]

    # ä¸ºæ¯ä¸ªæ–‡æœ¬åˆ›å»ºå…ƒæ•°æ®å­—å…¸
    metadata_batch = [{'description': description} for description in descriptions_batch]

    to_upsert = list(zip(ids_batch, embeds, metadata_batch))

    # æ’å…¥åˆ° Pinecone
    index.upsert(vectors=to_upsert)
</code></pre>

<h2 id="_5">è¿›è¡ŒæŸ¥è¯¢</h2>
<p>åœ¨å¡«å……äº†ç´¢å¼•åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è¿›è¡ŒæŸ¥è¯¢ä»¥è·å–ç»“æœã€‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œå¯¹å…¶è¿›è¡ŒåµŒå…¥ï¼Œç„¶ååœ¨ç´¢å¼•ä¸­æŸ¥è¯¢å®ƒï¼Œä»¥è¿”å›è¯­ä¹‰ä¸Šç›¸ä¼¼çš„äº§å“æè¿°ã€‚</p>
<pre class="codehilite"><code class="language-python">USER_QUESTION = &quot;I want to get my daughter more interested in science. What kind of gifts should I get her?&quot;

question_embed = vo.embed([USER_QUESTION], model=&quot;voyage-2&quot;, input_type=&quot;query&quot;)
results = index.query(
            vector=question_embed.embeddings, top_k=5, include_metadata=True
        )
results
</code></pre>

<pre class="codehilite"><code>{'matches': [{'id': 'description_1771',
              'metadata': {'description': 'Product Name: Scientific Explorer '
                                          'My First Science Kids Science '
                                          'Experiment Kit\n'
                                          '\n'
                                          'About Product: Experiments to spark '
                                          'creativity and curiosity | Grow '
                                          'watery crystals, create a rainbow '
                                          'in a plate, explore the science of '
                                          'color and more | Represents STEM '
                                          '(Science, Technology, Engineering, '
                                          'Math) principles â€“ open ended toys '
                                          'to construct, engineer, explorer '
                                          'and experiment | Includes cross '
                                          'linked polyacrylamide, 3 color '
                                          'tablets, 3 mixing cups, 3 test '
                                          'tubes, caps and stand, pipette, '
                                          'mixing tray, magnifier and '
                                          'instructions | Recommended for '
                                          'children 4 years of age and older '
                                          'with adult supervision\n'
                                          '\n'
                                          'Categories: Toys &amp; Games | Learning '
                                          '&amp; Education | Science Kits &amp; Toys'},
              'score': 0.772703767,
              'values': []},
             {'id': 'description_3133',
              'metadata': {'description': 'Product Name: Super Science Magnet '
                                          'Kit.\n'
                                          '\n'
                                          'About Product: \n'
                                          '\n'
                                          'Categories: Toys &amp; Games | Learning '
                                          '&amp; Education | Science Kits &amp; Toys'},
              'score': 0.765997052,
              'values': []},
             {'id': 'description_1792',
              'metadata': {'description': 'Product Name: BRIGHT Atom Model - '
                                          'Student\n'
                                          '\n'
                                          'About Product: \n'
                                          '\n'
                                          'Categories: Toys &amp; Games | Learning '
                                          '&amp; Education | Science Kits &amp; Toys'},
              'score': 0.765654,
              'values': []},
             {'id': 'description_1787',
              'metadata': {'description': 'Product Name: Thames &amp; Kosmos '
                                          'Biology Genetics and DNA\n'
                                          '\n'
                                          'About Product: Learn the basics of '
                                          'genetics and DNA. | Assemble a '
                                          'model to see the elegant '
                                          'double-stranded Helical structure '
                                          &quot;of DNA. | A parents' Choice Gold &quot;
                                          'award winner | 20 experiments in '
                                          'the 48 page full color experiment '
                                          'manual and learning guide\n'
                                          '\n'
                                          'Categories: Toys &amp; Games | Learning '
                                          '&amp; Education | Science Kits &amp; Toys'},
              'score': 0.765174091,
              'values': []},
             {'id': 'description_120',
              'metadata': {'description': 'Product Name: Educational Insights '
                                          &quot;Nancy B's Science Club Binoculars &quot;
                                          'and Wildlife Activity Journal\n'
                                          '\n'
                                          'About Product: From bird search and '
                                          'ecosystem challenges to creative '
                                          'writing and drawing exercises, this '
                                          'set is perfect for the nature lover '
                                          'in your life! | Includes 4x '
                                          'magnification binoculars and '
                                          '22-page activity journal packed '
                                          'with scientific activities! | '
                                          'Binoculars are lightweight, yet '
                                          'durable. | Supports STEM learning, '
                                          'providing hands-on experience with '
                                          'a key scientific tool. | Great '
                                          'introductory tool for young '
                                          'naturalists on-the-go! | Part of '
                                          &quot;the Nancy B's Science Club line, &quot;
                                          'designed to encourage scientific '
                                          'confidence. | Winner of the '
                                          &quot;Parents' Choice Recommended Award. &quot;
                                          '| Scientific experience designed '
                                          'specifically for kids ages 8-11.\n'
                                          '\n'
                                          'Categories: Electronics | Camera &amp; '
                                          'Photo | Binoculars &amp; Scopes | '
                                          'Binoculars'},
              'score': 0.765075564,
              'values': []}],
 'namespace': '',
 'usage': {'read_units': 6}}
</code></pre>

<h2 id="_6">ä¼˜åŒ–æœç´¢</h2>
<p>è¿™äº›ç»“æœå¾ˆå¥½ï¼Œä½†æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å®ƒä»¬ã€‚ä½¿ç”¨ Claudeï¼Œæˆ‘ä»¬å¯ä»¥è·å–ç”¨æˆ·çš„é—®é¢˜å¹¶ä»ä¸­ç”Ÿæˆæœç´¢å…³é”®å­—ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¯¹ç´¢å¼•æ‰§è¡Œå¹¿æ³›ã€å¤šæ ·åŒ–çš„æœç´¢ï¼Œä»¥è·å¾—æ›´ç›¸å…³çš„äº§å“æè¿°ã€‚</p>
<pre class="codehilite"><code class="language-python">import anthropic

client = anthropic.Anthropic(api_key=ANTHROPIC_API_KEY)
def get_completion(prompt):
    completion = client.completions.create(
        model=&quot;claude-2.1&quot;,
        prompt=prompt,
        max_tokens_to_sample=1024,
    )
    return completion.completion
</code></pre>

<pre class="codehilite"><code class="language-python">def create_keyword_prompt(question):
    return f&quot;&quot;&quot;\n\nHuman: Given a question, generate a list of 5 very diverse search keywords that can be used to search for products on Amazon.

The question is: {question}

Output your keywords as a JSON that has one property &quot;keywords&quot; that is a list of strings. Only output valid JSON.\n\nAssistant:{{&quot;&quot;&quot;
</code></pre>

<p>è®¾ç½®å¥½ Anthropic å®¢æˆ·ç«¯å¹¶åˆ›å»ºå¥½æç¤ºåï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å§‹ä»é—®é¢˜ä¸­ç”Ÿæˆå…³é”®å­—ã€‚æˆ‘ä»¬å°†ä»¥ JSON å¯¹è±¡çš„å½¢å¼è¾“å‡ºå…³é”®å­—ï¼Œä»¥ä¾¿å¯ä»¥è½»æ¾åœ°ä» Claude çš„è¾“å‡ºä¸­è§£æå®ƒä»¬ã€‚</p>
<pre class="codehilite"><code class="language-python">keyword_json = &quot;{&quot; + get_completion(create_keyword_prompt(USER_QUESTION))
print(keyword_json)
</code></pre>

<pre class="codehilite"><code class="language-python">import json

# ä» JSON ä¸­æå–å…³é”®å­—
data = json.loads(keyword_json)
keywords_list = data['keywords']
print(keywords_list)
</code></pre>

<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†å…³é”®å­—åˆ—è¡¨ï¼Œè®©æˆ‘ä»¬åµŒå…¥æ¯ä¸ªå…³é”®å­—ï¼Œåœ¨ç´¢å¼•ä¸­æŸ¥è¯¢å®ƒä»¬ï¼Œå¹¶è¿”å›æœ€ç›¸å…³çš„ 3 ä¸ªäº§å“æè¿°ã€‚</p>
<pre class="codehilite"><code class="language-python">results_list = []
for keyword in keywords_list:
    # è·å–å…³é”®å­—çš„åµŒå…¥
    query_embed = vo.embed([keyword], model=&quot;voyage-2&quot;, input_type=&quot;query&quot;)
    # åœ¨ Pinecone ç´¢å¼•ä¸­æœç´¢åµŒå…¥
    search_results = index.query(vector=query_embed.embeddings, top_k=3, include_metadata=True)
    # å°†æœç´¢ç»“æœé™„åŠ åˆ°åˆ—è¡¨ä¸­
    for search_result in search_results.matches:
            results_list.append(search_result['metadata']['description'])
print(len(results_list))
</code></pre>

<h2 id="claude">ä½¿ç”¨ Claude å›ç­”</h2>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ç³»åˆ—äº§å“æè¿°ï¼Œè®©æˆ‘ä»¬å°†å®ƒä»¬æ ¼å¼åŒ–ä¸º Claude å·²ç»è®­ç»ƒè¿‡çš„æœç´¢æ¨¡æ¿ï¼Œå¹¶å°†æ ¼å¼åŒ–çš„æè¿°ä¼ é€’åˆ°å¦ä¸€ä¸ªæç¤ºä¸­ã€‚</p>
<pre class="codehilite"><code class="language-python"># æ ¼å¼åŒ–æœç´¢ç»“æœ
def format_results(extracted: list[str]) -&gt; str:
        result = &quot;\n&quot;.join(
            [
                f'&lt;item index=&quot;{i+1}&quot;&gt;\n&lt;page_content&gt;\n{r}\n&lt;/page_content&gt;\n&lt;/item&gt;'
                for i, r in enumerate(extracted)
            ]
        )

        return f&quot;\n&lt;search_results&gt;\n{result}\n&lt;/search_results&gt;&quot;

def create_answer_prompt(results_list, question):
    return f&quot;&quot;&quot;\n\nHuman: {format_results(results_list)} Using the search results provided within the &lt;search_results&gt;&lt;/search_results&gt; tags, please answer the following question &lt;question&gt;{question}&lt;/question&gt;. Do not reference the search results in your answer.\n\nAssistant:&quot;&quot;&quot;
</code></pre>

<p>æœ€åï¼Œè®©æˆ‘ä»¬æå‡ºåŸå§‹ç”¨æˆ·çš„é—®é¢˜ï¼Œå¹¶ä» Claude é‚£é‡Œå¾—åˆ°ç­”æ¡ˆã€‚</p>
<pre class="codehilite"><code class="language-python">answer = get_completion(create_answer_prompt(results_list, USER_QUESTION))
print(answer)
</code></pre>

<pre class="codehilite"><code> ä¸ºäº†è®©æ‚¨çš„å¥³å„¿å¯¹ç§‘å­¦æ›´æ„Ÿå…´è¶£ï¼Œæˆ‘å»ºè®®ç»™å¥¹ä¹°ä¸€å¥—é€‚åˆå¥¹å¹´é¾„çš„ç§‘å­¦å·¥å…·åŒ…æˆ–å¥—è£…ï¼Œè®©å¥¹èƒ½å¤ŸåŠ¨æ‰‹è¿›è¡Œæ¢ç´¢å’Œå®éªŒã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¹´å¹¼çš„å­©å­ï¼Œæ‚¨å¯ä»¥å°è¯•å…¥é—¨çº§çš„åŒ–å­¦å¥—è£…ã€ç£é“å¥—è£…æˆ–æ°´æ™¶ç”Ÿé•¿å¥—ä»¶ã€‚å¯¹äºå¹´é¾„è¾ƒå¤§çš„å­©å­ï¼Œå¯ä»¥å¯»æ‰¾è§£å†³æ›´é«˜çº§ç§‘å­¦åŸç†çš„å·¥å…·åŒ…ï¼Œå¦‚ç‰©ç†å­¦ã€å·¥ç¨‹å­¦ã€æœºå™¨äººå­¦ç­‰ã€‚å…³é”®æ˜¯é€‰æ‹©èƒ½å¤Ÿæ¿€å‘å¥¹å¤©ç”Ÿçš„å¥½å¥‡å¿ƒï¼Œå¹¶è®©å¥¹é€šè¿‡æ´»åŠ¨ã€è§‚å¯Ÿå’Œå‘ç°æ¥ç§¯ææ¢ç´¢æ¦‚å¿µçš„ä¸œè¥¿ã€‚ç”¨ç§‘å­¦ä¹¦ç±ã€åšç‰©é¦†å‚è§‚ã€çºªå½•ç‰‡ä»¥åŠå…³äºå¥¹åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­é‡åˆ°çš„ç§‘å­¦çš„è°ˆè¯æ¥è¡¥å……è¿™äº›å·¥å…·åŒ…ã€‚è®©ç§‘å­¦å˜å¾—æœ‰è¶£å’Œå¼•äººå…¥èƒœæ˜¯åŸ¹å…»å¥¹å…´è¶£çš„å…³é”®ã€‚
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="nav-link prev">â† å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</a><a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="nav-link next">ReAct Agent â†’</a></nav>
        </main>
    </div>
</body>
</html>