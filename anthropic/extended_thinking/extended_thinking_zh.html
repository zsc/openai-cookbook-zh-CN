<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <title>æ‰©å±•æ€è€ƒ</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="_1">æ‰©å±•æ€è€ƒ</h1>
<h2 id="_2">ç›®å½•</h2>
<ul>
<li><a href="#setup">è®¾ç½®</a></li>
<li><a href="#basic-example">åŸºæœ¬ç¤ºä¾‹</a></li>
<li><a href="#streaming-with-extended-thinking">æµå¼ä¼ è¾“ä¸æ‰©å±•æ€è€ƒ</a></li>
<li><a href="#token-counting-and-context-window-management">ä»¤ç‰Œè®¡æ•°ä¸ä¸Šä¸‹æ–‡çª—å£ç®¡ç†</a></li>
<li><a href="#understanding-redacted-thinking-blocks">ç†è§£å·²ç¼–è¾‘çš„æ€è€ƒå—</a></li>
<li><a href="#handling-error-cases">å¤„ç†é”™è¯¯æƒ…å†µ</a></li>
</ul>
<p>æœ¬ç¬”è®°æœ¬æ¼”ç¤ºäº†å¦‚ä½•å°† Claude 3.7 Sonnet çš„æ‰©å±•æ€è€ƒåŠŸèƒ½ä¸å„ç§ç¤ºä¾‹å’Œè¾¹ç¼˜æƒ…å†µç»“åˆä½¿ç”¨ã€‚</p>
<p>æ‰©å±•æ€è€ƒä¸º Claude 3.7 Sonnet æä¾›äº†å¢å¼ºçš„å¤æ‚ä»»åŠ¡æ¨ç†èƒ½åŠ›ï¼ŒåŒæ—¶åœ¨æä¾›æœ€ç»ˆç­”æ¡ˆä¹‹å‰ï¼Œè¿˜èƒ½é€æ˜åœ°å±•ç¤ºå…¶é€æ­¥æ€è€ƒè¿‡ç¨‹ã€‚å¯ç”¨æ‰©å±•æ€è€ƒåï¼ŒClaude ä¼šåˆ›å»º <code>thinking</code> å†…å®¹å—ï¼Œåœ¨å…¶ä¸­è¾“å‡ºå…¶å†…éƒ¨æ¨ç†ã€‚åœ¨ç²¾å¿ƒåˆ¶ä½œæœ€ç»ˆå“åº”ä¹‹å‰ï¼ŒClaude ä¼šæ•´åˆæ­¤æ¨ç†çš„è§è§£ã€‚æœ‰å…³æ‰©å±•æ€è€ƒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„<a href="https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking">æ–‡æ¡£</a>ã€‚</p>
<h2 id="_3">è®¾ç½®</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®‰è£…å¿…è¦çš„åŒ…å¹¶è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒã€‚</p>
<pre class="codehilite"><code class="language-python">%pip install anthropic
</code></pre>

<pre class="codehilite"><code class="language-python">import anthropic
import os

# å°†æ‚¨çš„ API å¯†é’¥è®¾ç½®ä¸ºç¯å¢ƒå˜é‡æˆ–ç›´æ¥è®¾ç½®
# os.environ[&quot;ANTHROPIC_API_KEY&quot;] = &quot;your-api-key-here&quot;

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = anthropic.Anthropic()

# è¾…åŠ©å‡½æ•°
def print_thinking_response(response):
    &quot;&quot;&quot;ä»¥æ€è€ƒå—çš„å½¢å¼ç¾è§‚åœ°æ‰“å°æ¶ˆæ¯å“åº”ã€‚&quot;&quot;&quot;
    print(&quot;\n==== FULL RESPONSE ====&quot;)
    for block in response.content:
        if block.type == &quot;thinking&quot;:
            print(&quot;\nğŸ§  THINKING BLOCK:&quot;)
            # ä¸ºä¾¿äºé˜…è¯»ï¼Œæ˜¾ç¤ºæˆªæ–­çš„æ€è€ƒå†…å®¹
            print(block.thinking[:500] + &quot;...&quot; if len(block.thinking) &gt; 500 else block.thinking)
            print(f&quot;\n[Signature available: {bool(getattr(block, 'signature', None))}]&quot;)
            if hasattr(block, 'signature') and block.signature:
                print(f&quot;[Signature (first 50 chars): {block.signature[:50]}...]&quot;)
        elif block.type == &quot;redacted_thinking&quot;:
            print(&quot;\nğŸ”’ REDACTED THINKING BLOCK:&quot;)
            print(f&quot;[Data length: {len(block.data) if hasattr(block, 'data') else 'N/A'}]&quot;)
        elif block.type == &quot;text&quot;:
            print(&quot;\nâœ“ FINAL ANSWER:&quot;)
            print(block.text)

    print(&quot;\n==== END RESPONSE ====&quot;)

def count_tokens(messages):
    &quot;&quot;&quot;è®¡ç®—ç»™å®šæ¶ˆæ¯åˆ—è¡¨çš„ä»¤ç‰Œæ•°ã€‚&quot;&quot;&quot;
    result = client.messages.count_tokens(
        model=&quot;claude-3-7-sonnet-20250219&quot;,
        messages=messages
    )
    return result.input_tokens
</code></pre>

<h2 id="_4">åŸºæœ¬ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹å¼€å§‹ï¼Œå±•ç¤ºæ‰©å±•æ€è€ƒçš„å®é™…åº”ç”¨ï¼š</p>
<pre class="codehilite"><code class="language-python">def basic_thinking_example():
    response = client.messages.create(
        model=&quot;claude-3-7-sonnet-20250219&quot;,
        max_tokens=4000,
        thinking= {
            &quot;type&quot;: &quot;enabled&quot;,
            &quot;budget_tokens&quot;: 2000
        },
        messages=[{
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;è§£å†³è¿™ä¸ªè°œé¢˜ï¼šä¸‰ä¸ªäººå…¥ä½ä¸€å®¶é…’åº—ã€‚ä»–ä»¬æ”¯ä»˜äº† 30 ç¾å…ƒç»™ç»ç†ã€‚ç»ç†å‘ç°æˆ¿é—´åªèŠ±äº† 25 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ç»™äº†ç¤¼å®¾å‘˜ 5 ç¾å…ƒï¼Œè®©ä»–é€€è¿˜ç»™ä¸‰ä¸ªäººã€‚ç„¶è€Œï¼Œç¤¼å®¾å‘˜å†³å®šç•™ä¸‹ 2 ç¾å…ƒï¼Œå¹¶æ¯äººé€€è¿˜ 1 ç¾å…ƒã€‚ç°åœ¨ï¼Œæ¯ä¸ªäººæ”¯ä»˜äº† 10 ç¾å…ƒå¹¶æ”¶å›äº† 1 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ä»¬æ¯äººæ”¯ä»˜äº† 9 ç¾å…ƒï¼Œæ€»å…± 27 ç¾å…ƒã€‚ç¤¼å®¾å‘˜ç•™ä¸‹äº† 2 ç¾å…ƒï¼Œæ€»å…± 29 ç¾å…ƒã€‚ç¼ºå¤±çš„ 1 ç¾å…ƒåœ¨å“ªé‡Œï¼Ÿ&quot;
        }]
    )

    print_thinking_response(response)

basic_thinking_example()
</code></pre>

<pre class="codehilite"><code>==== FULL RESPONSE ====

ğŸ§  THINKING BLOCK:
è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

åˆå§‹æƒ…å†µï¼š

- ä¸‰ä¸ªäººæ¯äººæ”¯ä»˜ 10 ç¾å…ƒï¼Œæ€»å…±æ”¯ä»˜ 30 ç¾å…ƒç»™ç»ç†ã€‚
- æˆ¿é—´å®é™…èŠ±è´¹ 25 ç¾å…ƒã€‚
- ç»ç†ç»™äº†ç¤¼å®¾å‘˜ 5 ç¾å…ƒï¼Œè®©ä»–é€€è¿˜ç»™é¡¾å®¢ã€‚
- ç¤¼å®¾å‘˜ç•™ä¸‹ 2 ç¾å…ƒï¼Œå¹¶æ¯äººé€€è¿˜ 1 ç¾å…ƒï¼ˆæ€»å…±é€€è¿˜ 3 ç¾å…ƒï¼‰ã€‚

äº¤æ˜“åï¼š

- æ¯ä¸ªäººå®é™…æ”¯ä»˜äº† 9 ç¾å…ƒï¼ˆä»–ä»¬æ”¯ä»˜äº† 10 ç¾å…ƒï¼Œæ”¶å›äº† 1 ç¾å…ƒï¼‰ã€‚
- æ‰€ä»¥ä¸‰ä¸ªäººä¸€å…±æ”¯ä»˜äº† 27 ç¾å…ƒã€‚
- é…’åº—ä¸ºæˆ¿é—´ä¿ç•™äº† 25 ç¾å…ƒã€‚
- ç¤¼å®¾å‘˜ä¿ç•™äº† 2 ç¾å…ƒã€‚

æ‰€ä»¥ï¼Œè¿™...

[Signature available: True]
[Signature (first 50 chars): EuYBCkQYAiJAGF6X7aWRuRByTdymAUdNOMC++3ZqSJv7jcY5Ly...]

âœ“ FINAL ANSWER:
# é…’åº—è´¦å•è°œé¢˜è§£ç­”

è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„è¯¯å¯¼æ€§è°œé¢˜ï¼Œå®ƒé€šè¿‡æ··åˆä¸åŒçš„ä¼šè®¡æ–¹æ³•æ¥æ··æ·†æˆ‘ä»¬ã€‚

## å®é™…çš„èµ„é‡‘æµå‘

1. ä¸‰ä¸ªäººæ¯äººæ”¯ä»˜ 10 ç¾å…ƒï¼Œæ€»è®¡ 30 ç¾å…ƒ
2. é…’åº—ä¿ç•™ 25 ç¾å…ƒç”¨äºæˆ¿é—´
3. ç¤¼å®¾å‘˜ä¿ç•™ 2 ç¾å…ƒ
4. å®¢äººæ”¶åˆ° 3 ç¾å…ƒé€€æ¬¾ï¼ˆæ¯äºº 1 ç¾å…ƒï¼‰

## è°œé¢˜ä¸­çš„ä¼šè®¡é”™è¯¯

å½“è°œé¢˜è¯•å›¾ç›¸åŠ æ—¶å°±ä¼šå‡ºç°é”™è¯¯ï¼š

- å®¢äººæ”¯ä»˜çš„é‡‘é¢ï¼ˆé€€æ¬¾åæ€»è®¡ 27 ç¾å…ƒï¼‰
- ç¤¼å®¾å‘˜ä¿ç•™çš„é‡‘é¢ï¼ˆ2 ç¾å…ƒï¼‰

è¿™æ˜¯ä¸æ­£ç¡®çš„ä¼šè®¡å¤„ç†ï¼Œå› ä¸ºç¤¼å®¾å‘˜ä¿ç•™çš„ 2 ç¾å…ƒå·²ç»åŒ…å«åœ¨å®¢äººæ”¯ä»˜çš„ 27 ç¾å…ƒä¸­ã€‚è¿™ç¬”é’±åº”è¯¥ä»å•ä¸€çš„è§’åº¦æ¥è¿½è¸ªã€‚

## æ­£ç¡®çš„ä¼šè®¡å¤„ç†

ä»å®¢äººçš„è§’åº¦æ¥çœ‹ï¼š

- 27 ç¾å…ƒï¼ˆä»–ä»¬æœ€ç»ˆæ”¯ä»˜çš„é‡‘é¢ï¼‰
- = 25 ç¾å…ƒï¼ˆç»™é…’åº—ï¼‰+ 2 ç¾å…ƒï¼ˆç»™ç¤¼å®¾å‘˜ï¼‰

æ²¡æœ‰ç¼ºå¤±çš„ç¾å…ƒã€‚è¿™ä¸ªè°œé¢˜é€šè¿‡ä¸æ°å½“åœ°æ··åˆä¸åŒçš„ä¼šè®¡è§’åº¦æ¥åˆ¶é€ æ··ä¹±ã€‚

==== END RESPONSE ====
</code></pre>

<h2 id="_5">æµå¼ä¼ è¾“ä¸æ‰©å±•æ€è€ƒ</h2>
<p>æ­¤ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•å¤„ç†å¸¦æ€è€ƒå†…å®¹çš„æµå¼ä¼ è¾“ï¼š</p>
<pre class="codehilite"><code class="language-python">def streaming_with_thinking():
    with client.messages.stream(
        model=&quot;claude-3-7-sonnet-20250219&quot;,
        max_tokens=4000,
        thinking={
            &quot;type&quot;: &quot;enabled&quot;,
            &quot;budget_tokens&quot;: 2000
        },
        messages=[{
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;è§£å†³è¿™ä¸ªè°œé¢˜ï¼šä¸‰ä¸ªäººå…¥ä½ä¸€å®¶é…’åº—ã€‚ä»–ä»¬æ”¯ä»˜äº† 30 ç¾å…ƒç»™ç»ç†ã€‚ç»ç†å‘ç°æˆ¿é—´åªèŠ±äº† 25 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ç»™äº†ç¤¼å®¾å‘˜ 5 ç¾å…ƒï¼Œè®©ä»–é€€è¿˜ç»™ä¸‰ä¸ªäººã€‚ç„¶è€Œï¼Œç¤¼å®¾å‘˜å†³å®šç•™ä¸‹ 2 ç¾å…ƒï¼Œå¹¶æ¯äººé€€è¿˜ 1 ç¾å…ƒã€‚ç°åœ¨ï¼Œæ¯ä¸ªäººæ”¯ä»˜äº† 10 ç¾å…ƒå¹¶æ”¶å›äº† 1 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ä»¬æ¯äººæ”¯ä»˜äº† 9 ç¾å…ƒï¼Œæ€»å…± 27 ç¾å…ƒã€‚ç¤¼å®¾å‘˜ç•™ä¸‹äº† 2 ç¾å…ƒï¼Œæ€»å…± 29 ç¾å…ƒã€‚ç¼ºå¤±çš„ 1 ç¾å…ƒåœ¨å“ªé‡Œï¼Ÿ&quot;
        }]
    ) as stream:
        # è·Ÿè¸ªæˆ‘ä»¬å½“å‰æ­£åœ¨æ„å»ºçš„å†…å®¹
        current_block_type = None
        current_content = &quot;&quot;

        for event in stream:
            if event.type == &quot;content_block_start&quot;:
                current_block_type = event.content_block.type
                print(f&quot;\n--- Starting {current_block_type} block ---&quot;)
                current_content = &quot;&quot;

            elif event.type == &quot;content_block_delta&quot;:
                if event.delta.type == &quot;thinking_delta&quot;:
                    print(event.delta.thinking, end=&quot;&quot;, flush=True)  # åªæ‰“å°æ€è€ƒçš„çœç•¥å·ä»¥é¿å…æ··ä¹±
                    current_content += event.delta.thinking
                elif event.delta.type == &quot;text_delta&quot;:
                    print(event.delta.text, end=&quot;&quot;, flush=True)
                    current_content += event.delta.text

            elif event.type == &quot;content_block_stop&quot;:
                if current_block_type == &quot;thinking&quot;:
                    # åªæ˜¾ç¤ºæ€è€ƒå†…å®¹çš„æ‘˜è¦
                    print(f&quot;\n[Completed thinking block, {len(current_content)} characters]&quot;)
                elif current_block_type == &quot;redacted_thinking&quot;:
                    print(&quot;\n[Redacted thinking block]&quot;)
                print(f&quot;--- Finished {current_block_type} block ---\n&quot;)
                current_block_type = None

            elif event.type == &quot;message_stop&quot;:
                print(&quot;\n--- Message complete ---&quot;)

streaming_with_thinking()
</code></pre>

<pre class="codehilite"><code>--- Starting thinking block ---
è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

åˆå§‹æƒ…å†µï¼š

- ä¸‰ä¸ªäººæ¯äººæ”¯ä»˜ 10 ç¾å…ƒï¼Œæ€»å…±æ”¯ä»˜ 30 ç¾å…ƒç»™ç»ç†ã€‚
- æˆ¿é—´å®é™…èŠ±è´¹ 25 ç¾å…ƒã€‚
- ç»ç†ç»™äº†ç¤¼å®¾å‘˜ 5 ç¾å…ƒï¼Œè®©ä»–é€€è¿˜ç»™é¡¾å®¢ã€‚
- ç¤¼å®¾å‘˜ç•™ä¸‹ 2 ç¾å…ƒï¼Œå¹¶æ¯äººé€€è¿˜ 1 ç¾å…ƒï¼ˆæ€»å…±é€€è¿˜ 3 ç¾å…ƒï¼‰ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ†æä¸€ä¸‹è´¦ç›®ï¼š

å®é™…æƒ…å†µï¼š

- ä¸‰ä¸ªäººæœ€åˆæ”¯ä»˜äº† 30 ç¾å…ƒã€‚
- ä»–ä»¬æ”¶å›äº†æ€»å…± 3 ç¾å…ƒï¼ˆæ¯äºº 1 ç¾å…ƒï¼‰ã€‚
- æ‰€ä»¥ä»–ä»¬å®é™…æ”¯ä»˜äº† 30 ç¾å…ƒ - 3 ç¾å…ƒ = 27 ç¾å…ƒã€‚
- åœ¨è¿™ 27 ç¾å…ƒä¸­ï¼Œ25 ç¾å…ƒç»™äº†é…’åº—ä½œä¸ºæˆ¿é—´è´¹ç”¨ã€‚
- å‰©ä½™çš„ 2 ç¾å…ƒç»™äº†ç¤¼å®¾å‘˜ã€‚
- 25 ç¾å…ƒ + 2 ç¾å…ƒ = 27 ç¾å…ƒï¼Œè¿™ä¸å®¢äººæ”¯ä»˜çš„é‡‘é¢ç›¸ç¬¦ã€‚ä¸€åˆ‡éƒ½å¹³è¡¡äº†ã€‚

è°œé¢˜ä¸­çš„é”™è¯¯åœ¨äºå®ƒæå‡ºçš„é—®é¢˜æ–¹å¼ã€‚è°œé¢˜è¯´â€œæ¯ä¸ªäººæ”¯ä»˜äº† 10 ç¾å…ƒå¹¶æ”¶å›äº† 1 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ä»¬æ¯äººæ”¯ä»˜äº† 9 ç¾å…ƒï¼Œæ€»å…± 27 ç¾å…ƒã€‚ç¤¼å®¾å‘˜ç•™ä¸‹äº† 2 ç¾å…ƒï¼Œæ€»å…± 29 ç¾å…ƒã€‚â€è¿™æ˜¯æ··åˆäº†ä¸åŒçš„ä¼šè®¡æ–¹æ³•ã€‚

å®¢äººæ€»å…±æ”¯ä»˜çš„ 27 ç¾å…ƒåº”åˆ†ä¸ºï¼š

- 25 ç¾å…ƒç”¨äºæˆ¿é—´
- 2 ç¾å…ƒç»™ç¤¼å®¾å‘˜

å½“æˆ‘ä»¬æŠŠç¤¼å®¾å‘˜çš„ 2 ç¾å…ƒåŠ åˆ°å®¢äººçš„ 27 ç¾å…ƒä¸Šæ—¶ï¼Œæˆ‘ä»¬é‡å¤è®¡ç®—äº† 2 ç¾å…ƒï¼Œè¿™é€ æˆäº†ç¼ºå¤± 1 ç¾å…ƒçš„å‡è±¡ã€‚è¿™ç¬”é’±åº”è¯¥ä»ä¸åŒçš„ä¼šè®¡è§’åº¦æ¥è€ƒè™‘ã€‚

å¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯ï¼šæœ€åˆçš„ 30 ç¾å…ƒä¸­ï¼Œ25 ç¾å…ƒç»™äº†é…’åº—ï¼Œ3 ç¾å…ƒé€€è¿˜ç»™äº†å®¢äººï¼Œ2 ç¾å…ƒç»™äº†ç¤¼å®¾å‘˜ã€‚æ€»è®¡ 25 ç¾å…ƒ + 3 ç¾å…ƒ + 2 ç¾å…ƒ = 30 ç¾å…ƒï¼Œæ‰€ä»¥ä¸€åˆ‡éƒ½å·²æ ¸ç®—ã€‚
[Completed thinking block, 1492 characters]
--- Finished thinking block ---


--- Starting text block ---
# ç¼ºå¤±çš„ 1 ç¾å…ƒè°œé¢˜è§£ç­”

è¿™ä¸ªè°œé¢˜ä½¿ç”¨äº†è¯¯å¯¼æ€§çš„ä¼šè®¡æ–¹å¼ï¼Œé€ æˆäº†æ··ä¹±ã€‚è®©æˆ‘ä»¬æ¥æ¾„æ¸…ä¸€ä¸‹å®é™…å‘ç”Ÿçš„æƒ…å†µï¼š

## æ­£ç¡®çš„ä¼šè®¡å¤„ç†ï¼š

- ä¸‰ä¸ªäººæœ€åˆæ€»å…±æ”¯ä»˜äº† 30 ç¾å…ƒ
- æˆ¿é—´è´¹ç”¨ä¸º 25 ç¾å…ƒ
- ç¤¼å®¾å‘˜ä¿ç•™äº† 2 ç¾å…ƒ
- å®¢äººæ”¶å›äº† 3 ç¾å…ƒï¼ˆæ¯äºº 1 ç¾å…ƒï¼‰

é‚£ä¹ˆæ‰€æœ‰çš„é’±éƒ½å»å“ªå„¿äº†ï¼Ÿ

- 25 ç¾å…ƒç»™äº†é…’åº—
- 2 ç¾å…ƒç»™äº†ç¤¼å®¾å‘˜
- 3 ç¾å…ƒé€€è¿˜ç»™äº†å®¢äºº
- 25 ç¾å…ƒ + 2 ç¾å…ƒ + 3 ç¾å…ƒ = 30 ç¾å…ƒ âœ“

## è°œé¢˜ä¸­çš„é”™è¯¯ï¼š
è°œé¢˜é”™è¯¯åœ°å°†å®¢äººæ”¯ä»˜çš„ 27 ç¾å…ƒï¼ˆé€€æ¬¾åï¼‰ä¸ç¤¼å®¾å‘˜ä¿ç•™çš„ 2 ç¾å…ƒç›¸åŠ ã€‚è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºç¤¼å®¾å‘˜ä¿ç•™çš„ 2 ç¾å…ƒå·²ç»æ˜¯ 27 ç¾å…ƒçš„ä¸€éƒ¨åˆ†ã€‚

è°œé¢˜é€šè¿‡æ··åˆä¸¤ç§ä¸åŒçš„è§†è§’æ¥åˆ¶é€ ç¼ºå¤±ä¸€ç¾å…ƒçš„å‡è±¡ï¼š

1. å®¢äººæ”¯ä»˜çš„æ€»é‡‘é¢ï¼ˆ27 ç¾å…ƒï¼‰
2. æœ€åˆçš„ 30 ç¾å…ƒå»å‘ï¼ˆé…’åº— + ç¤¼å®¾å‘˜ + é€€æ¬¾ï¼‰

æ²¡æœ‰ç¼ºå¤±çš„ç¾å…ƒâ€”â€”è¿™åªæ˜¯ä¸€ä¸ªä¼šè®¡æŠ€å·§ï¼--- Finished text block ---


--- Message complete ---
</code></pre>

<h2 id="_6">ä»¤ç‰Œè®¡æ•°ä¸ä¸Šä¸‹æ–‡çª—å£ç®¡ç†</h2>
<p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•è·Ÿè¸ªæ‰©å±•æ€è€ƒçš„ä»¤ç‰Œä½¿ç”¨æƒ…å†µï¼š</p>
<pre class="codehilite"><code class="language-python">def token_counting_example():
    # å®šä¹‰ä¸€ä¸ªåˆ›å»ºç¤ºä¾‹æ¶ˆæ¯çš„å‡½æ•°
    def create_sample_messages():
        messages = [{
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;è§£å†³è¿™ä¸ªè°œé¢˜ï¼šä¸‰ä¸ªäººå…¥ä½ä¸€å®¶é…’åº—ã€‚ä»–ä»¬æ”¯ä»˜äº† 30 ç¾å…ƒç»™ç»ç†ã€‚ç»ç†å‘ç°æˆ¿é—´åªèŠ±äº† 25 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ç»™äº†ç¤¼å®¾å‘˜ 5 ç¾å…ƒï¼Œè®©ä»–é€€è¿˜ç»™ä¸‰ä¸ªäººã€‚ç„¶è€Œï¼Œç¤¼å®¾å‘˜å†³å®šç•™ä¸‹ 2 ç¾å…ƒï¼Œå¹¶æ¯äººé€€è¿˜ 1 ç¾å…ƒã€‚ç°åœ¨ï¼Œæ¯ä¸ªäººæ”¯ä»˜äº† 10 ç¾å…ƒå¹¶æ”¶å›äº† 1 ç¾å…ƒï¼Œæ‰€ä»¥ä»–ä»¬æ¯äººæ”¯ä»˜äº† 9 ç¾å…ƒï¼Œæ€»å…± 27 ç¾å…ƒã€‚ç¤¼å®¾å‘˜ç•™ä¸‹äº† 2 ç¾å…ƒï¼Œæ€»å…± 29 ç¾å…ƒã€‚ç¼ºå¤±çš„ 1 ç¾å…ƒåœ¨å“ªé‡Œï¼Ÿ&quot;
        }]
        return messages

    # åœ¨ä¸ä½¿ç”¨æ‰©å±•æ€è€ƒçš„æƒ…å†µä¸‹è®¡ç®—ä»¤ç‰Œæ•°
    base_messages = create_sample_messages()
    base_token_count = count_tokens(base_messages)
    print(f&quot;åŸºç¡€ä»¤ç‰Œè®¡æ•°ï¼ˆä»…è¾“å…¥ï¼‰ï¼š{base_token_count}&quot;)

    # å‘é€å¸¦æ€è€ƒçš„è¯·æ±‚å¹¶æ£€æŸ¥å®é™…ä½¿ç”¨æƒ…å†µ
    response = client.messages.create(
        model=&quot;claude-3-7-sonnet-20250219&quot;,
        max_tokens=8000,
        thinking = {
            &quot;type&quot;: &quot;enabled&quot;,
            &quot;budget_tokens&quot;: 2000
        },
        messages=base_messages
    )

    # è®¡ç®—å¹¶æ‰“å°ä»¤ç‰Œä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯
    thinking_tokens = sum(
        len(block.thinking.split()) * 1.3  # å¤§è‡´ä¼°ç®—
        for block in response.content 
        if block.type == &quot;thinking&quot;
    )

    final_answer_tokens = sum(
        len(block.text.split()) * 1.3  # å¤§è‡´ä¼°ç®—
        for block in response.content 
        if block.type == &quot;text&quot;
    )

    print(f&quot;\nä¼°è®¡ä½¿ç”¨çš„æ€è€ƒä»¤ç‰Œæ•°ï¼š~{int(thinking_tokens)}&quot;)
    print(f&quot;ä¼°è®¡çš„æœ€ç»ˆç­”æ¡ˆä»¤ç‰Œæ•°ï¼š~{int(final_answer_tokens)}&quot;)
    print(f&quot;æ€»ä¼°è®¡è¾“å‡ºä»¤ç‰Œæ•°ï¼š~{int(thinking_tokens + final_answer_tokens)}&quot;)
    print(f&quot;è¾“å…¥ä»¤ç‰Œæ•° + max_tokens = {base_token_count + 8000}&quot;)
    print(f&quot;æ€è€ƒåå¯ç”¨äºæœ€ç»ˆç­”æ¡ˆçš„ä»¤ç‰Œæ•°ï¼š~{8000 - int(thinking_tokens)}&quot;)

    # ä½¿ç”¨é€’å¢çš„æ€è€ƒé¢„ç®—è¿›è¡Œæ¼”ç¤º
    thinking_budgets = [1024, 2000, 4000, 8000, 16000, 32000]
    context_window = 200000
    for budget in thinking_budgets:
        print(f&quot;\næ€è€ƒé¢„ç®—ä¸º {budget} ä»¤ç‰Œæ—¶ï¼š&quot;)
        print(f&quot;è¾“å…¥ä»¤ç‰Œæ•°ï¼š{base_token_count}&quot;)
        print(f&quot;æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š{base_token_count + budget + 1000}&quot;)  # åŠ ä¸Š 1000 ç”¨äºæœ€ç»ˆç­”æ¡ˆ
        print(f&quot;å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š{context_window - (base_token_count + budget + 1000)}&quot;)

        if base_token_count + budget + 1000 &gt; context_window:
            print(&quot;è­¦å‘Šï¼šè¿™å°†è¶…å‡º 200k ä»¤ç‰Œçš„ä¸Šä¸‹æ–‡çª—å£ï¼&quot;)

# å–æ¶ˆæ³¨é‡Šä»¥è¿è¡Œç¤ºä¾‹
token_counting_example()
</code></pre>

<pre class="codehilite"><code>åŸºç¡€ä»¤ç‰Œè®¡æ•°ï¼ˆä»…è¾“å…¥ï¼‰ï¼š125

ä¼°è®¡ä½¿ç”¨çš„æ€è€ƒä»¤ç‰Œæ•°ï¼š~377
ä¼°è®¡çš„æœ€ç»ˆç­”æ¡ˆä»¤ç‰Œæ•°ï¼š~237
æ€»ä¼°è®¡è¾“å‡ºä»¤ç‰Œæ•°ï¼š~614
è¾“å…¥ä»¤ç‰Œæ•° + max_tokens = 8125
æ€è€ƒåå¯ç”¨äºæœ€ç»ˆç­”æ¡ˆçš„ä»¤ç‰Œæ•°ï¼š~7623

æ€è€ƒé¢„ç®—ä¸º 1024 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š2149
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š197851

æ€è€ƒé¢„ç®—ä¸º 2000 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š3125
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š196875

æ€è€ƒé¢„ç®—ä¸º 4000 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š5125
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š194875

æ€è€ƒé¢„ç®—ä¸º 8000 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š9125
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š190875

æ€è€ƒé¢„ç®—ä¸º 16000 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š17125
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š182875

æ€è€ƒé¢„ç®—ä¸º 32000 ä»¤ç‰Œæ—¶ï¼š
è¾“å…¥ä»¤ç‰Œæ•°ï¼š125
æ‰€éœ€æœ€å¤§ä»¤ç‰Œæ•°ï¼š33125
å‰©ä½™ä¸Šä¸‹æ–‡çª—å£ï¼š166875
</code></pre>

<h2 id="_7">ç†è§£å·²ç¼–è¾‘çš„æ€è€ƒå—</h2>
<p>æœ‰æ—¶ Claude çš„å†…éƒ¨æ¨ç†ä¼šè¢«å®‰å…¨ç³»ç»Ÿæ ‡è®°ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬ä¼šåŠ å¯†éƒ¨åˆ†æˆ–å…¨éƒ¨ <code>thinking</code> å—ï¼Œå¹¶å°†å…¶ä½œä¸º <code>redacted_thinking</code> å—è¿”å›ç»™æ‚¨ã€‚è¿™äº›å·²ç¼–è¾‘çš„æ€è€ƒå—åœ¨ä¼ é€’å› API æ—¶ä¼šè¢«è§£å¯†ï¼Œä½¿ Claude èƒ½å¤Ÿåœ¨ä¸ä¸¢å¤±ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ç»§ç»­å“åº”ã€‚</p>
<p>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨è§¦å‘å·²ç¼–è¾‘æ€è€ƒå—çš„ç‰¹æ®Šæµ‹è¯•å­—ç¬¦ä¸²æ¥å¤„ç†å®ƒä»¬ï¼š</p>
<pre class="codehilite"><code class="language-python">def redacted_thinking_example():
    # ä½¿ç”¨è§¦å‘å·²ç¼–è¾‘æ€è€ƒçš„ç‰¹æ®Šæµ‹è¯•å­—ç¬¦ä¸²
    response = client.messages.create(
        model=&quot;claude-3-7-sonnet-20250219&quot;,
        max_tokens=4000,
        thinking={
            &quot;type&quot;: &quot;enabled&quot;,
            &quot;budget_tokens&quot;: 2000
        },
        messages=[{
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;ANTHROPIC_MAGIC_STRING_TRIGGER_REDACTED_THINKING_46C9A13E193C177646C7398A98432ECCCE4C1253D5E2D82641AC0E52CC2876CB&quot;
        }]
    )

    # è¯†åˆ«å·²ç¼–è¾‘çš„æ€è€ƒå—
    redacted_blocks = [block for block in response.content if block.type == &quot;redacted_thinking&quot;]
    thinking_blocks = [block for block in response.content if block.type == &quot;thinking&quot;]
    text_blocks = [block for block in response.content if block.type == &quot;text&quot;]
    print(response.content)
    print(f&quot;å“åº”åŒ…å« {len(response.content)} ä¸ªæ€»å—ï¼š&quot;)
    print(f&quot;- {len(redacted_blocks)} ä¸ªå·²ç¼–è¾‘çš„æ€è€ƒå—&quot;)
    print(f&quot;- {len(thinking_blocks)} ä¸ªå¸¸è§„æ€è€ƒå—&quot;)
    print(f&quot;- {len(text_blocks)} ä¸ªæ–‡æœ¬å—&quot;)

    # æ˜¾ç¤ºå·²ç¼–è¾‘å—çš„æ•°æ®å±æ€§
    if redacted_blocks:
        print(f&quot;\nå·²ç¼–è¾‘çš„æ€è€ƒå—åŒ…å«åŠ å¯†æ•°æ®ï¼š&quot;)
        for i, block in enumerate(redacted_blocks[:3]):  # æœ€å¤šæ˜¾ç¤ºå‰ 3 ä¸ª
            print(f&quot;å— {i+1} æ•°æ®é¢„è§ˆï¼š{block.data[:50]}...&quot;)

    # æ‰“å°æœ€ç»ˆæ–‡æœ¬è¾“å‡º
    if text_blocks:
        print(f&quot;\næœ€ç»ˆæ–‡æœ¬å“åº”ï¼š&quot;)
        print(text_blocks[0].text)

# å–æ¶ˆæ³¨é‡Šä»¥è¿è¡Œç¤ºä¾‹
redacted_thinking_example()
</code></pre>

<pre class="codehilite"><code>[TextBlock(citations=None, text=None, type='redacted_thinking', data='EvAFCoYBGAIiQL7asmglEdeKXw4EdihR2gBQ7O7+j/dGecLjsS2PMgW9av+NRwuIV2nFD4I61hUHrp5vzJF7/y+i/vvbnxaRnwMqQMizGiLSDcowtEvP9EcIT4d75iPhZ8TaiVdD22bZp3YVcc0laY8u1lEJTSesgLUywuc3QHZcg4NZ7tKjWwKgcVUSDHgb6gZUK9aP47KvNxoMCNjkIDR40zmq/QmVIjBSCnvTMSUE+jnmLZSq1TZO9T7ImALNJt8I5j1ls24CO1fibsRThJ7Ha5A0/tuEKVoqlgRc+e2tS+BQMXx572lT4Hkl4aVpcM4SQbqBjeVeR3NmCBLoOxlQ2JLiIYwMHUS/K9GDLyMQcYd1KUWgN34CZRK7k44CSkNsO8oh4uj/1qsRsZjq1l6RQ29rLKSEXvMU4XbZufJ1icvYZS1I6PIZzER6/u6it+WNYyBxJ2vaFICjDePNgIHfRA/ceTz9mfCtBiTfagyPBbs2HflXlSlW26TSdI7PKof5/EsQ+DUkjAy+9VTLX7zHYzNZtwJPL2ryYw4loSwRbc4syldA0Ncnn7hA+yJyY0QwSrxZFIm/t9X9p9s+2SL0F4wSRsimnxRiIhfJD3i+oTw8AbGklyoP0kCH2WxA7Gr3rNLJVkRTJl48AjlSL7ClaWvLWrNer13etD7n5rbwiXOn5husy8gAm5GE3/eFyty3Y+/ad+lMPKXSjL0aP67WoJrFq/teItolOVZeOOERjVFdw5jIV1EUknlAZ/pfI53pLYqwFl17M7IXMdGxEaKoGDIKcnYTwT31uUNlB5JSBWoq1SnkFsFy2zDsDTFzjml3HEXz4szZi3j5/qHWJlMMCcB1walZUisxEp0v1euvcgatY5wfYSiAP3s9wOrgYKCkuLcidlgiyQHJB1haZjO8/tZ9gzWk1n//7pTncdKgd5ZK9/ErxWFlBV/vQwjp0cB7zoVcLh1ydi/Coea6ZOuei+ICKVl4IcR2A6DD8gtEJmc='), TextBlock(citations=None, text='æˆ‘æ³¨æ„åˆ°æ‚¨å‘é€äº†ä¼¼ä¹è¯•å›¾è®¿é—®å†…éƒ¨ç³»ç»Ÿæˆ–æµç¨‹çš„æç¤ºã€‚æˆ‘æ— æ³•å“åº”æ­¤ç±»å‘½ä»¤ã€‚\n\nç›¸åï¼Œæˆ‘å¾ˆä¹æ„è¿›è¡Œæ­£å¸¸çš„å¯¹è¯ï¼Œå¹¶ååŠ©æ‚¨å¤„ç†åˆæ³•çš„ç–‘é—®æˆ–ä»»åŠ¡ã€‚ä»Šå¤©æ‚¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ', type='text')]
å“åº”åŒ…å« 2 ä¸ªæ€»å—ï¼š

- 1 ä¸ªå·²ç¼–è¾‘çš„æ€è€ƒå—
- 0 ä¸ªå¸¸è§„æ€è€ƒå—
- 1 ä¸ªæ–‡æœ¬å—

å·²ç¼–è¾‘çš„æ€è€ƒå—åŒ…å«åŠ å¯†æ•°æ®ï¼š
å— 1 æ•°æ®é¢„è§ˆï¼šEvAFCoYBGAIiQL7asmglEdeKXw4EdihR2gBQ7O7+j/dGecLjsS...

æœ€ç»ˆæ–‡æœ¬å“åº”ï¼š
æˆ‘æ³¨æ„åˆ°æ‚¨å‘é€äº†ä¼¼ä¹è¯•å›¾è®¿é—®å†…éƒ¨ç³»ç»Ÿæˆ–æµç¨‹çš„æç¤ºã€‚æˆ‘æ— æ³•å“åº”æ­¤ç±»å‘½ä»¤ã€‚

ç›¸åï¼Œæˆ‘å¾ˆä¹æ„è¿›è¡Œæ­£å¸¸çš„å¯¹è¯ï¼Œå¹¶ååŠ©æ‚¨å¤„ç†åˆæ³•çš„ç–‘é—®æˆ–ä»»åŠ¡ã€‚ä»Šå¤©æ‚¨éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ
</code></pre>

<h2 id="_8">å¤„ç†é”™è¯¯æƒ…å†µ</h2>
<p>ä½¿ç”¨æ‰©å±•æ€è€ƒæ—¶ï¼Œè¯·è®°ä½ï¼š</p>
<ol>
<li>
<p><strong>æœ€å°é¢„ç®—</strong>ï¼šæœ€å°æ€è€ƒé¢„ç®—ä¸º 1,024 ä¸ªä»¤ç‰Œã€‚æˆ‘ä»¬å»ºè®®ä»æœ€å°å€¼å¼€å§‹ï¼Œå¹¶é€æ­¥å¢åŠ ä»¥æ‰¾åˆ°æœ€ä½³èŒƒå›´ã€‚</p>
</li>
<li>
<p><strong>ä¸å…¼å®¹çš„åŠŸèƒ½</strong>ï¼šæ€è€ƒåŠŸèƒ½ä¸å…¼å®¹ temperatureã€top_p æˆ– top_k ä¿®æ”¹ï¼Œå¹¶ä¸”æ‚¨æ— æ³•é¢„å¡«å……å“åº”ã€‚</p>
</li>
<li>
<p><strong>å®šä»·</strong>ï¼šæ‰©å±•æ€è€ƒä»¤ç‰Œè®¡å…¥ä¸Šä¸‹æ–‡çª—å£ï¼Œå¹¶æŒ‰è¾“å‡ºä»¤ç‰Œè®¡è´¹ã€‚å®ƒä»¬ä¹Ÿè®¡å…¥æ‚¨çš„é€Ÿç‡é™åˆ¶ã€‚</p>
</li>
</ol>
<p>æœ‰å…³å¸¦å·¥å…·ä½¿ç”¨çš„æ‰©å±•æ€è€ƒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…â€œå¸¦å·¥å…·ä½¿ç”¨çš„æ‰©å±•æ€è€ƒâ€ç¬”è®°æœ¬ã€‚</p>
<pre class="codehilite"><code class="language-python">def demonstrate_common_errors():
    # 1. æ€è€ƒé¢„ç®—è®¾ç½®è¿‡å°å¯¼è‡´çš„é”™è¯¯
    try:
        response = client.messages.create(
            model=&quot;claude-3-7-sonnet-20250219&quot;,
            max_tokens=4000,
            thinking={
                &quot;type&quot;: &quot;enabled&quot;,
                &quot;budget_tokens&quot;: 500  # å¤ªå°äº†ï¼Œæœ€å°å€¼ä¸º 1024
            },
            messages=[{
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: &quot;è§£é‡Šé‡å­è®¡ç®—ã€‚&quot;
            }]
        )
    except Exception as e:
        print(f&quot;\næ€è€ƒé¢„ç®—è¿‡å°é”™è¯¯ï¼š{e}&quot;)

    # 2. å°† temperature ä¸æ€è€ƒä¸€èµ·ä½¿ç”¨å¯¼è‡´çš„é”™è¯¯
    try:
        response = client.messages.create(
            model=&quot;claude-3-7-sonnet-20250219&quot;,
            max_tokens=4000,
            temperature=0.7,  # ä¸æ€è€ƒä¸å…¼å®¹
            thinking={
                &quot;type&quot;: &quot;enabled&quot;,
                &quot;budget_tokens&quot;: 2000
            },
            messages=[{
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: &quot;å†™ä¸€ä¸ªåˆ›æ„æ•…äº‹ã€‚&quot;
            }]
        )
    except Exception as e:
        print(f&quot;\næ¸©åº¦ä¸æ€è€ƒé”™è¯¯ï¼š{e}&quot;)

    # 3. è¶…å‡ºä¸Šä¸‹æ–‡çª—å£å¯¼è‡´çš„é”™è¯¯
    try:
        # åˆ›å»ºä¸€ä¸ªéå¸¸å¤§çš„æç¤º
        long_content = &quot;è¯·åˆ†æè¿™æ®µæ–‡å­—ã€‚ &quot; + &quot;è¿™æ˜¯ç¤ºä¾‹æ–‡æœ¬ã€‚ &quot; * 150000

        response = client.messages.create(
            model=&quot;claude-3-7-sonnet-20250219&quot;,
            max_tokens=20000,  # è¿™ä¸ªåŠ ä¸Šé•¿æç¤ºå°†è¶…å‡ºä¸Šä¸‹æ–‡çª—å£
            thinking={
                &quot;type&quot;: &quot;enabled&quot;,
                &quot;budget_tokens&quot;: 10000
            },
            messages=[{
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: long_content
            }]
        )
    except Exception as e:
        print(f&quot;\nè¶…å‡ºä¸Šä¸‹æ–‡çª—å£é”™è¯¯ï¼š{e}&quot;)

# è¿è¡Œå¸¸è§é”™è¯¯ç¤ºä¾‹
demonstrate_common_errors()
</code></pre>

<pre class="codehilite"><code>æ€è€ƒé¢„ç®—è¿‡å°é”™è¯¯ï¼šError code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'thinking.enabled.budget_tokens: Input should be greater than or equal to 1024'}}

æ¸©åº¦ä¸æ€è€ƒé”™è¯¯ï¼šError code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': '`temperature` may only be set to 1 when thinking is enabled. Please consult our documentation at https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking#important-considerations-when-using-extended-thinking'}}

è¶…å‡ºä¸Šä¸‹æ–‡çª—å£é”™è¯¯ï¼šError code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'prompt is too long: 214315 tokens &gt; 204798 maximum'}}
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="nav-link prev">â† æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</a><a href="tool_use/extracting_structured_json_zh.html" class="nav-link next">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON â†’</a></nav>
        </main>
    </div>
</body>
</html>