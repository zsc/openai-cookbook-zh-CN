<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <title>é€‰æ‹©å·¥å…·</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="_1">é€‰æ‹©å·¥å…·</h1>
<p>å·¥å…·ä½¿ç”¨æ”¯æŒä¸€ä¸ªåä¸º <code>tool_choice</code> çš„å‚æ•°ï¼Œè¯¥å‚æ•°å…è®¸æ‚¨æŒ‡å®šå¸Œæœ› Claude å¦‚ä½•è°ƒç”¨å·¥å…·ã€‚åœ¨æœ¬ç¬”è®°æœ¬ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å®ƒçš„å·¥ä½œåŸç†ä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç†Ÿæ‚‰ Claude å·¥å…·ä½¿ç”¨çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<p>åœ¨ä½¿ç”¨ <code>tool_choice</code> å‚æ•°æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§å¯èƒ½çš„é€‰é¡¹ï¼š</p>
<ul>
<li><code>auto</code> å…è®¸ Claude å†³å®šæ˜¯å¦è°ƒç”¨ä»»ä½•æä¾›çš„å·¥å…·</li>
<li><code>tool</code> å…è®¸æˆ‘ä»¬å¼ºåˆ¶ Claude å§‹ç»ˆä½¿ç”¨ç‰¹å®šå·¥å…·</li>
<li><code>any</code> å‘Šè¯‰ Claude å¿…é¡»ä½¿ç”¨æä¾›çš„å·¥å…·ä¹‹ä¸€ï¼Œä½†ä¸å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šå·¥å…·</li>
</ul>
<p>è®©æˆ‘ä»¬è¯¦ç»†äº†è§£æ¯ä¸ªé€‰é¡¹ã€‚æˆ‘ä»¬å°†ä»å¯¼å…¥ Anthropic SDK å¼€å§‹ï¼š</p>
<pre class="codehilite"><code class="language-python">from anthropic import Anthropic
client = Anthropic()
MODEL_NAME = &quot;claude-3-sonnet-20240229&quot;
</code></pre>

<h2 id="_2">è‡ªåŠ¨</h2>
<p>å°† <code>tool_choice</code> è®¾ç½®ä¸º <code>auto</code> å…è®¸æ¨¡å‹è‡ªåŠ¨å†³å®šæ˜¯å¦ä½¿ç”¨å·¥å…·ã€‚è¿™æ˜¯ä½¿ç”¨å·¥å…·æ—¶çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä¸º Claude æä¾›ä¸€ä¸ªå‡çš„ç½‘ç»œæœç´¢å·¥å…·ã€‚æˆ‘ä»¬å°†å‘ Claude æé—®ï¼Œå…¶ä¸­ä¸€äº›é—®é¢˜éœ€è¦è°ƒç”¨ç½‘ç»œæœç´¢å·¥å…·ï¼Œè€Œå¦ä¸€äº›é—®é¢˜ Claude åº”è¯¥èƒ½å¤Ÿè‡ªè¡Œå›ç­”ã€‚</p>
<p>è®©æˆ‘ä»¬ä»å®šä¹‰ä¸€ä¸ªåä¸º <code>web_search</code> çš„å·¥å…·å¼€å§‹ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†ä½¿æ­¤æ¼”ç¤ºä¿æŒç®€å•ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¹¶æ²¡æœ‰åœ¨è¿™é‡Œæœç´¢ç½‘ç»œï¼š</p>
<pre class="codehilite"><code class="language-python">def web_search(topic):
    print(f&quot;pretending to search the web for {topic}&quot;)

web_search_tool = {
    &quot;name&quot;: &quot;web_search&quot;,
    &quot;description&quot;: &quot;A tool to retrieve up to date information on a given topic by searching the web&quot;,
    &quot;input_schema&quot;: {
        &quot;type&quot;: &quot;object&quot;,
        &quot;properties&quot;: {
            &quot;topic&quot;: {
                &quot;type&quot;: &quot;string&quot;,
                &quot;description&quot;: &quot;The topic to search the web for&quot;
            },
        },
        &quot;required&quot;: [&quot;topic&quot;]
    }
}
</code></pre>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ¥å— <code>user_query</code> å¹¶å°†å…¶ä¼ é€’ç»™ Claude ä»¥åŠ <code>web_search_tool</code> çš„å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬è¿˜å°† <code>tool_choice</code> è®¾ç½®ä¸º <code>auto</code>ï¼š</p>
<pre class="codehilite"><code class="language-py">tool_choice={&quot;type&quot;: &quot;auto&quot;}
</code></pre>

<p>è¿™æ˜¯å®Œæ•´çš„å‡½æ•°ï¼š</p>
<pre class="codehilite"><code class="language-python">from datetime import date

def chat_with_web_search(user_query):
    messages = [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_query}]

    system_prompt=f&quot;&quot;&quot;
    Answer as many questions as you can using your existing knowledge.  
    Only search the web for queries that you can not confidently answer.
    Today's date is {date.today().strftime(&quot;%B %d %Y&quot;)}
    If you think a user's question involves something in the future that hasn't happened yet, use the search tool.
    &quot;&quot;&quot;

    response = client.messages.create(
        system=system_prompt,
        model=MODEL_NAME,
        messages=messages,
        max_tokens=1000,
        tool_choice={&quot;type&quot;: &quot;auto&quot;},
        tools=[web_search_tool]
    )
    last_content_block = response.content[-1]
    if last_content_block.type == &quot;text&quot;:
        print(&quot;Claude did NOT call a tool&quot;)
        print(f&quot;Assistant: {last_content_block.text}&quot;)
    elif last_content_block.type == &quot;tool_use&quot;:
        print(&quot;Claude wants to use a tool&quot;)
        print(last_content_block)
</code></pre>

<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ª Claude åº”è¯¥èƒ½å¤Ÿå›ç­”è€Œæ— éœ€ä½¿ç”¨å·¥å…·çš„é—®é¢˜å¼€å§‹ï¼š</p>
<pre class="codehilite"><code class="language-python">chat_with_web_search(&quot;What color is the sky?&quot;)
</code></pre>

<pre class="codehilite"><code>Claude did NOT call a tool
Assistant: The sky appears blue during the day. This is because the Earth's atmosphere scatters more blue light from the sun than other colors, making the sky look blue.
</code></pre>

<p>å½“æˆ‘ä»¬é—®â€œå¤©ç©ºæ˜¯ä»€ä¹ˆé¢œè‰²ï¼Ÿâ€æ—¶ï¼ŒClaude ä¸ä¼šä½¿ç”¨è¯¥å·¥å…·ã€‚è®©æˆ‘ä»¬å°è¯•é—®ä¸€äº› Claude åº”è¯¥ä½¿ç”¨ç½‘ç»œæœç´¢å·¥å…·æ¥å›ç­”çš„é—®é¢˜ï¼š</p>
<pre class="codehilite"><code class="language-python">chat_with_web_search(&quot;Who won the 2024 Miami Grand Prix?&quot;)
</code></pre>

<pre class="codehilite"><code>Claude wants to use a tool
ToolUseBlock(id='toolu_staging_018nwaaRebX33pHqoZZXDaSw', input={'topic': '2024 Miami Grand Prix winner'}, name='web_search', type='tool_use')
</code></pre>

<p>å½“æˆ‘ä»¬é—®â€œè°èµ¢å¾—äº† 2024 å¹´è¿ˆé˜¿å¯†å¤§å¥–èµ›ï¼Ÿâ€æ—¶ï¼ŒClaude ä½¿ç”¨äº†ç½‘ç»œæœç´¢å·¥å…·ï¼</p>
<p>è®©æˆ‘ä»¬å†å°è¯•å‡ ä¸ªä¾‹å­ï¼š</p>
<pre class="codehilite"><code class="language-python"># Claude ä¸åº”è¯¥éœ€è¦ä¸ºæ­¤ä½¿ç”¨è¯¥å·¥å…·ï¼š
chat_with_web_search(&quot;Who won the superbowl in 2022?&quot;)
</code></pre>

<pre class="codehilite"><code>Claude did NOT call a tool
Assistant: The Los Angeles Rams won Super Bowl LVI in 2022, defeating the Cincinnati Bengals by a score of 23-20. The game was played on February 13, 2022 at SoFi Stadium in Inglewood, California.
</code></pre>

<pre class="codehilite"><code class="language-python"># Claude åº”è¯¥ä½¿ç”¨è¯¥å·¥å…·æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼š
chat_with_web_search(&quot;Who won the superbowl in 2024?&quot;)
</code></pre>

<pre class="codehilite"><code>Claude wants to use a tool
ToolUseBlock(id='toolu_staging_016XPwcprHAgYJBtN7A3jLhb', input={'topic': '2024 Super Bowl winner'}, name='web_search', type='tool_use')
</code></pre>

<h3 id="_3">æ‚¨çš„æç¤ºå¾ˆé‡è¦ï¼</h3>
<p>åœ¨ä½¿ç”¨ <code>auto</code> çš„ <code>tool_choice</code> æ—¶ï¼ŒèŠ±æ—¶é—´ç¼–å†™è¯¦ç»†çš„æç¤ºéå¸¸é‡è¦ã€‚é€šå¸¸ï¼ŒClaude å¯èƒ½ä¼šè¿‡äºçƒ­è¡·äºè°ƒç”¨å·¥å…·ã€‚ç¼–å†™è¯¦ç»†çš„æç¤ºæœ‰åŠ©äº Claude ç¡®å®šä½•æ—¶è°ƒç”¨å·¥å…·ä»¥åŠä½•æ—¶ä¸è°ƒç”¨ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ç³»ç»Ÿæç¤ºä¸­åŒ…å«äº†ä¸€äº›å…·ä½“è¯´æ˜ï¼š</p>
<pre class="codehilite"><code class="language-py"> system_prompt=f&quot;&quot;&quot;
    Answer as many questions as you can using your existing knowledge.  
    Only search the web for queries that you can not confidently answer.
    Today's date is {date.today().strftime(&quot;%B %d %Y&quot;)}
    If you think a user's question involves something in the future that hasn't happened yet, use the search tool.
&quot;&quot;&quot;
</code></pre>

<h2 id="_4">å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šå·¥å…·</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>tool_choice</code> å¼ºåˆ¶ Claude ä½¿ç”¨ç‰¹å®šå·¥å…·ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„å·¥å…·ï¼š</p>
<ul>
<li><code>print_sentiment_scores</code> - ä¸€ä¸ªâ€œæ¬ºéª—â€ Claude ç”ŸæˆåŒ…å«æƒ…æ„Ÿåˆ†ææ•°æ®çš„ç»“æ„åŒ– JSON è¾“å‡ºçš„å·¥å…·ã€‚æœ‰å…³æ­¤æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://github.com/anthropics/anthropic-cookbook/blob/main/tool_use/extracting_structured_json.ipynb">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨æå–ç»“æ„åŒ– JSON</a></li>
<li><code>calculator</code> - ä¸€ä¸ªéå¸¸ç®€å•çš„è®¡ç®—å™¨å·¥å…·ï¼Œå®ƒæ¥å—ä¸¤ä¸ªæ•°å­—å¹¶å°†å®ƒä»¬ç›¸åŠ </li>
</ul>
<pre class="codehilite"><code class="language-python">tools = [
    {
        &quot;name&quot;: &quot;print_sentiment_scores&quot;,
        &quot;description&quot;: &quot;Prints the sentiment scores of a given tweet or piece of text.&quot;,
        &quot;input_schema&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;positive_score&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;description&quot;: &quot;The positive sentiment score, ranging from 0.0 to 1.0.&quot;},
                &quot;negative_score&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;description&quot;: &quot;The negative sentiment score, ranging from 0.0 to 1.0.&quot;},
                &quot;neutral_score&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;description&quot;: &quot;The neutral sentiment score, ranging from 0.0 to 1.0.&quot;}
            },
            &quot;required&quot;: [&quot;positive_score&quot;, &quot;negative_score&quot;, &quot;neutral_score&quot;]
        }
    },
    {
        &quot;name&quot;: &quot;calculator&quot;,
        &quot;description&quot;: &quot;Adds two number&quot;,
        &quot;input_schema&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;num1&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;description&quot;: &quot;first number to add&quot;},
                &quot;num2&quot;: {&quot;type&quot;: &quot;number&quot;, &quot;description&quot;: &quot;second number to add&quot;},
            },
            &quot;required&quot;: [&quot;num1&quot;, &quot;num2&quot;]
        }
    }
]
</code></pre>

<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¼–å†™ä¸€ä¸ªåä¸º <code>analyze_tweet_sentiment</code> çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€æ¡æ¨æ–‡å¹¶æ‰“å°è¯¥æ¨æ–‡çš„åŸºæœ¬æƒ…æ„Ÿåˆ†æã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å°†â€œå¼ºåˆ¶â€ Claude ä½¿ç”¨æˆ‘ä»¬çš„æƒ…æ„Ÿåˆ†æå·¥å…·ï¼Œä½†æˆ‘ä»¬é¦–å…ˆå±•ç¤ºå½“<strong>ä¸</strong>å¼ºåˆ¶ä½¿ç”¨å·¥å…·æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<p>åœ¨ <code>analyze_tweet_sentiment</code> å‡½æ•°çš„ç¬¬ä¸€ä¸ªâ€œé”™è¯¯â€ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸º Claude æä¾›äº†ä¸¤ä¸ªå·¥å…·ã€‚ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å°†é¦–å…ˆå°† <code>tool_choice</code> è®¾ç½®ä¸ºâ€œautoâ€ï¼š</p>
<pre class="codehilite"><code class="language-python">tool_choice={&quot;type&quot;: &quot;auto&quot;}
</code></pre>

<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ•…æ„æ²¡æœ‰ä¸º Claude æä¾›ç¼–å†™è‰¯å¥½çš„æç¤ºï¼Œä»¥ä¾¿æ›´å®¹æ˜“çœ‹åˆ°å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šå·¥å…·çš„å½±å“ã€‚</p>
<pre class="codehilite"><code class="language-python">def analyze_tweet_sentiment(query):
    response = client.messages.create(
        model=MODEL_NAME,
        max_tokens=4096,
        tools=tools,
        tool_choice={&quot;type&quot;: &quot;auto&quot;},
        messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: query}]
    )
    print(response)
</code></pre>

<p>è®©æˆ‘ä»¬çœ‹çœ‹å½“ä½¿ç”¨æ¨æ–‡â€œHoly cow, I just made the most incredible meal!â€è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<pre class="codehilite"><code class="language-python">analyze_tweet_sentiment(&quot;Holy cow, I just made the most incredible meal!&quot;)
</code></pre>

<pre class="codehilite"><code>ToolsBetaMessage(id='msg_staging_01ApgXx7W7qsDugdaRWh6p21', content=[TextBlock(text=&quot;That's great to hear! I don't actually have the capability to assess sentiment from text, but it sounds like you're really excited and proud of the incredible meal you made. Cooking something delicious that you're proud of can definitely give a sense of accomplishment and happiness. Well done on creating such an amazing dish!&quot;, type='text')], model='claude-3-sonnet-20240229', role='assistant', stop_reason='end_turn', stop_sequence=None, type='message', usage=Usage(input_tokens=429, output_tokens=69))
</code></pre>

<p>Claude æ²¡æœ‰è°ƒç”¨æˆ‘ä»¬çš„æƒ…æ„Ÿåˆ†æå·¥å…·ï¼š</p>
<blockquote>
<p>â€œThat's great to hear! I don't actually have the capability to assess sentiment from text, but it sounds like you're really excited and proud of the incredible meal you madeâ€</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æƒ³è±¡æœ‰äººå‘äº†è¿™æ ·çš„æ¨æ–‡ï¼šâ€œI love my cats! I had four and just adopted 2 more! Guess how many I have now?â€</p>
<pre class="codehilite"><code class="language-python">analyze_tweet_sentiment(&quot;I love my cats! I had four and just adopted 2 more! Guess how many I have now?&quot;)
</code></pre>

<pre class="codehilite"><code>ToolsBetaMessage(id='msg_staging_018gTrwrx6YwBR2jjhdPooVg', content=[TextBlock(text=&quot;That's wonderful that you love your cats and adopted two more! To figure out how many cats you have now, I can use the calculator tool:&quot;, type='text'), ToolUseBlock(id='toolu_staging_01RFker5oMQoY6jErz5prmZg', input={'num1': 4, 'num2': 2}, name='calculator', type='tool_use')], model='claude-3-sonnet-20240229', role='assistant', stop_reason='tool_use', stop_sequence=None, type='message', usage=Usage(input_tokens=442, output_tokens=101))
</code></pre>

<p>Claude æƒ³è¦è°ƒç”¨è®¡ç®—å™¨å·¥å…·ï¼š</p>
<blockquote>
<p>ToolUseBlock(id='toolu_staging_01RFker5oMQoY6jErz5prmZg', input={'num1': 4, 'num2': 2}, name='calculator', type='tool_use')</p>
</blockquote>
<p>æ˜¾ç„¶ï¼Œå½“å‰å®ç° Ğ½Ğµ è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸï¼ˆä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºå¤±è´¥ï¼‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é€šè¿‡æ›´æ–° <code>tool_choice</code> æ¥å¼ºåˆ¶ Claude <strong>å§‹ç»ˆ</strong>ä½¿ç”¨ <code>print_sentiment_scores</code> å·¥å…·ï¼š</p>
<pre class="codehilite"><code class="language-py">tool_choice={&quot;type&quot;: &quot;tool&quot;, &quot;name&quot;: &quot;print_sentiment_scores&quot;}
</code></pre>

<p>é™¤äº†å°† <code>type</code> è®¾ç½®ä¸º <code>tool</code> ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æä¾›ç‰¹å®šçš„å·¥å…·åç§°ã€‚</p>
<pre class="codehilite"><code class="language-python">def analyze_tweet_sentiment(query):
    response = client.messages.create(
        model=MODEL_NAME,
        max_tokens=4096,
        tools=tools,
        tool_choice={&quot;type&quot;: &quot;tool&quot;, &quot;name&quot;: &quot;print_sentiment_scores&quot;},
        messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: query}]
    )
    print(response)
</code></pre>

<p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•ä½¿ç”¨ç›¸åŒçš„æç¤ºä»æ—©æœŸæç¤º Claudeï¼Œå®ƒå°†å§‹ç»ˆè°ƒç”¨ <code>print_sentiment_scores</code> å·¥å…·ï¼š</p>
<pre class="codehilite"><code class="language-python">analyze_tweet_sentiment(&quot;Holy cow, I just made the most incredible meal!&quot;)
</code></pre>

<pre class="codehilite"><code>ToolsBetaMessage(id='msg_staging_018GtYk8Xvee3w8Eeh6pbgoq', content=[ToolUseBlock(id='toolu_staging_01FMRQ9pZniZqFUGQwTcFU4N', input={'positive_score': 0.9, 'negative_score': 0.0, 'neutral_score': 0.1}, name='print_sentiment_scores', type='tool_use')], model='claude-3-sonnet-20240229', role='assistant', stop_reason='tool_use', stop_sequence=None, type='message', usage=Usage(input_tokens=527, output_tokens=79))
</code></pre>

<p>Claude è°ƒç”¨æˆ‘ä»¬çš„ <code>print_sentiment_scores</code> å·¥å…·ï¼š</p>
<blockquote>
<p>ToolUseBlock(id='toolu_staging_01FMRQ9pZniZqFUGQwTcFU4N', input={'positive_score': 0.9, 'negative_score': 0.0, 'neutral_score': 0.1}, name='print_sentiment_scores', type='tool_use')</p>
</blockquote>
<p>å³ä½¿æˆ‘ä»¬å°è¯•ç”¨â€œæ•°å­¦å‘³â€çš„æ¨æ–‡æ¥è¿·æƒ‘ Claudeï¼Œå®ƒä»ç„¶æ€»æ˜¯è°ƒç”¨ <code>print_sentiment_scores</code> å·¥å…·ï¼š</p>
<pre class="codehilite"><code class="language-python">analyze_tweet_sentiment(&quot;I love my cats! I had four and just adopted 2 more! Guess how many I have now?&quot;)
</code></pre>

<pre class="codehilite"><code>ToolsBetaMessage(id='msg_staging_01RACamfrHdpvLxWaNwDfZEF', content=[ToolUseBlock(id='toolu_staging_01Wb6ZKSwKvqVSKLDAte9cKU', input={'positive_score': 0.8, 'negative_score': 0.0, 'neutral_score': 0.2}, name='print_sentiment_scores', type='tool_use')], model='claude-3-sonnet-20240229', role='assistant', stop_reason='tool_use', stop_sequence=None, type='message', usage=Usage(input_tokens=540, output_tokens=79))
</code></pre>

<p>å³ä½¿æˆ‘ä»¬å¼ºåˆ¶ Claude è°ƒç”¨æˆ‘ä»¬çš„ <code>print_sentiment_scores</code> å·¥å…·ï¼Œæˆ‘ä»¬ä»ç„¶åº”è¯¥é‡‡ç”¨ä¸€äº›åŸºæœ¬çš„æç¤ºå·¥ç¨‹ï¼š</p>
<pre class="codehilite"><code class="language-python">def analyze_tweet_sentiment(query):

    prompt = f&quot;&quot;&quot;
    Analyze the sentiment in the following tweet: 
    &lt;tweet&gt;{query}&lt;/tweet&gt;
    &quot;&quot;&quot;

    response = client.messages.create(
        model=MODEL_NAME,
        max_tokens=4096,
        tools=tools,
        tool_choice={&quot;type&quot;: &quot;auto&quot;},
        messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}]
    )
    print(response)
</code></pre>

<h2 id="any">Any</h2>
<p><code>tool_choice</code> çš„æœ€åä¸€ä¸ªé€‰é¡¹æ˜¯ <code>any</code>ï¼Œå®ƒå…è®¸æˆ‘ä»¬å‘Šè¯‰ Claude â€œä½ å¿…é¡»è°ƒç”¨ä¸€ä¸ªå·¥å…·ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©å“ªä¸€ä¸ªâ€ã€‚æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªä½¿ç”¨ Claude çš„çŸ­ä¿¡èŠå¤©æœºå™¨äººã€‚è¿™ä¸ªèŠå¤©æœºå™¨äººå®é™…ä¸ç”¨æˆ·â€œäº¤æµâ€çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡çŸ­ä¿¡ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ–‡æœ¬æ¶ˆæ¯åŠ©æ‰‹ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå·¥å…·ï¼š</p>
<ul>
<li><code>send_text_to_user</code> å‘ç”¨æˆ·å‘é€çŸ­ä¿¡</li>
<li><code>get_customer_info</code> æ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾å®¢æˆ·æ•°æ®</li>
</ul>
<p>ç›®çš„æ˜¯åˆ›å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œè¯¥æœºå™¨äººå§‹ç»ˆè°ƒç”¨å…¶ä¸­ä¸€ä¸ªå·¥å…·ï¼Œå¹¶ä¸”ä»ä¸ä»¥éå·¥å…·å“åº”è¿›è¡Œå›å¤ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼ŒClaude éƒ½åº”è¯¥é€šè¿‡å°è¯•å‘é€çŸ­ä¿¡æˆ–è°ƒç”¨ <code>get_customer_info</code> æ¥è·å–æ›´å¤šå®¢æˆ·ä¿¡æ¯æ¥å“åº”ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å°† <code>tool_choice</code> è®¾ç½®ä¸ºâ€œanyâ€ï¼š</p>
<pre class="codehilite"><code class="language-py">tool_choice={&quot;type&quot;: &quot;any&quot;}
</code></pre>

<pre class="codehilite"><code class="language-python">def send_text_to_user(text):
    # Sends a text to the user
    # We'll just print out the text to keep things simple:
    print(f&quot;TEXT MESSAGE SENT: {text}&quot;)

def get_customer_info(username):
    return {
        &quot;username&quot;: username,
        &quot;email&quot;: f&quot;{username}@email.com&quot;,
        &quot;purchases&quot;: [
            {&quot;id&quot;: 1, &quot;product&quot;: &quot;computer mouse&quot;},
            {&quot;id&quot;: 2, &quot;product&quot;: &quot;screen protector&quot;},
            {&quot;id&quot;: 3, &quot;product&quot;: &quot;usb charging cable&quot;},
        ]
    }

tools = [
    {
        &quot;name&quot;: &quot;send_text_to_user&quot;,
        &quot;description&quot;: &quot;Sends a text message to a user&quot;,
        &quot;input_schema&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;text&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;The piece of text to be sent to the user via text message&quot;},
            },
            &quot;required&quot;: [&quot;text&quot;]
        }
    },
    {
        &quot;name&quot;: &quot;get_customer_info&quot;,
        &quot;description&quot;: &quot;gets information on a customer based on the customer's username.  Response includes email, username, and previous purchases. Only call this tool once a user has provided you with their username&quot;,
        &quot;input_schema&quot;: {
            &quot;type&quot;: &quot;object&quot;,
            &quot;properties&quot;: {
                &quot;username&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;The username of the user in question. &quot;},
            },
            &quot;required&quot;: [&quot;username&quot;]
        }
    },
]

system_prompt = &quot;&quot;&quot;
All your communication with a user is done via text message.
Only call tools when you have enough information to accurately call them.  
Do not call the get_customer_info tool until a user has provided you with their username. This is important.
If you do not know a user's username, simply ask a user for their username.
&quot;&quot;&quot;

def sms_chatbot(user_message):
    messages = [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;:user_message}]

    response = client.messages.create(
        system=system_prompt,
        model=MODEL_NAME,
        max_tokens=4096,
        tools=tools,
        tool_choice={&quot;type&quot;: &quot;any&quot;},
        messages=messages
    )
    if response.stop_reason == &quot;tool_use&quot;:
        last_content_block = response.content[-1]
        if last_content_block.type == 'tool_use':
            tool_name = last_content_block.name
            tool_inputs = last_content_block.input
            print(f&quot;=======Claude Wants To Call The {tool_name} Tool=======&quot;)
            if tool_name == &quot;send_text_to_user&quot;:
                send_text_to_user(tool_inputs[&quot;text&quot;])
            elif tool_name == &quot;get_customer_info&quot;:
                print(get_customer_info(tool_inputs[&quot;username&quot;]))
            else:
                print(&quot;Oh dear, that tool doesn't exist!&quot;)

    else:
        print(&quot;No tool was called. This shouldn't happen!&quot;)
</code></pre>

<p>è®©æˆ‘ä»¬ä»ç®€å•çš„å¼€å§‹ï¼š</p>
<pre class="codehilite"><code class="language-python">sms_chatbot(&quot;Hey there! How are you?&quot;)
</code></pre>

<pre class="codehilite"><code>=======Claude Wants To Call The send_text_to_user Tool=======
TEXT MESSAGE SENT: Hello! I'm doing well, thanks for asking. How can I assist you today?
</code></pre>

<p>Claude å›å¤è°ƒç”¨ <code>send_text_to_user</code> å·¥å…·ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é—® Claude ä¸€ä¸ªæ›´æ£˜æ‰‹çš„é—®é¢˜ï¼š</p>
<pre class="codehilite"><code class="language-python">sms_chatbot(&quot;I need help looking up an order&quot;)
</code></pre>

<pre class="codehilite"><code>=======Claude Wants To Call The send_text_to_user Tool=======
TEXT MESSAGE SENT: Hi there, to look up your order details I'll need your username first. Can you please provide me with your username?
</code></pre>

<p>Claude æƒ³å‘é€ä¸€æ¡çŸ­ä¿¡ï¼Œè¦æ±‚ç”¨æˆ·æä¾›ç”¨æˆ·åã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å‘ Claude æä¾›ç”¨æˆ·åæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<pre class="codehilite"><code class="language-python">sms_chatbot(&quot;I need help looking up an order.  My username is jenny76&quot;)
</code></pre>

<pre class="codehilite"><code>=======Claude Wants To Call The get_customer_info Tool=======
{'username': 'jenny76', 'email': 'jenny76@email.com', 'purchases': [{'id': 1, 'product': 'computer mouse'}, {'id': 2, 'product': 'screen protector'}, {'id': 3, 'product': 'usb charging cable'}]}
</code></pre>

<p>æ­£å¦‚æˆ‘ä»¬æ‰€å¸Œæœ›çš„ï¼ŒClaude è°ƒç”¨äº† <code>get_customer_info</code> å·¥å…·ï¼</p>
<p>å³ä½¿æˆ‘ä»¬å‘ Claude å‘é€ä¹±ç æ¶ˆæ¯ï¼Œå®ƒä»ç„¶ä¼šè°ƒç”¨æˆ‘ä»¬çš„ä¸€ä¸ªå·¥å…·ï¼š</p>
<pre class="codehilite"><code class="language-python">sms_chatbot(&quot;askdj aksjdh asjkdbhas kjdhas 1+1 ajsdh&quot;)
</code></pre>

<pre class="codehilite"><code>=======Claude Wants To Call The send_text_to_user Tool=======
TEXT MESSAGE SENT: I'm afraid I didn't understand your query. Could you please rephrase what you need help with?
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="nav-link prev">â† SubQuestionQueryEngine</a><a href="tool_use/tool_use_with_pydantic_zh.html" class="nav-link next">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨ â†’</a></nav>
        </main>
    </div>
</body>
</html>