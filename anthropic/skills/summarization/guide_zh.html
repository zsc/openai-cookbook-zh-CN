<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <title>æ‘˜è¦ä¸ Claude</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="æœç´¢..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">extended_thinking</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_with_tool_use_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒä¸å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="extended_thinking/extended_thinking_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰©å±•æ€è€ƒ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">finetuning</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="finetuning/finetuning_on_bedrock_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Bedrock ä¸Šå¾®è°ƒ Claude 3 Haiku</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">misc</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‰¹é‡å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_evals_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹è¯„ä¼°</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/building_moderation_filter_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰ Claude çš„å®¡æ ¸è¿‡æ»¤å™¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/generate_test_cases_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `extract_variables` å‡½æ•°ï¼Œ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_enable_json_mode_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æç¤º Claude è·å–â€œJSON æ¨¡å¼â€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/how_to_make_sql_queries_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è¿›è¡Œ SQL æŸ¥è¯¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/illustrated_responses_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„å›¾ç¤ºåŒ–å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/mc_qa_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®éªŒæ€§æµ‹è¯• Claude çš„é•¿ä¸Šä¸‹æ–‡é—®ç­”èƒ½åŠ›</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/metaprompt_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Metaprompt</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/pdf_upload_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">â€œä¸Šä¼ â€PDF åˆ° Claude API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç¼“å­˜æç¤ºï¼ˆPrompt cachingï¼‰é€šè¿‡ Anthropic API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/read_web_pages_with_haiku_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude 3 Haiku æ€»ç»“ç½‘é¡µå†…å®¹</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/sampling_past_max_tokens_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude ä» Claude ä¹‹å¤–çš„é‡‡æ ·å“åº”ï¼Œè¶…å‡ºæœ€å¤§ä»¤ç‰Œé™åˆ¶</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/speculative_prompt_caching_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æŠ•æœºæ€§æç¤ºç¼“å­˜</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="misc/using_citations_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼•è¨€</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/best_practices_for_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/getting_started_with_vision_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¼€å§‹ä¸Šæ‰‹ - å¦‚ä½•å°†å›¾åƒä¼ é€’ç»™ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/how_to_transcribe_text_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude è½¬å½•æ–‡æ¡£</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/reading_charts_graphs_powerpoints_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å›¾è¡¨å’Œå¹»ç¯ç‰‡æ”¾æ˜ </span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="multimodal/using_sub_agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Haiku ä½œä¸ºå­ä»£ç†</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">patterns</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/basic_workflows_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é¦–å…ˆä½¿ç”¨å…·æœ‰æ€ç»´é“¾çš„LLMç¡®å®šé€‚å½“çš„è·¯ç”±</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/evaluator_optimizer_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/orchestrator_workers_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ­¥éª¤1ï¼šè·å–åè°ƒå™¨å“åº”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="patterns/agents/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ„å»ºé«˜æ•ˆä»£ç†çš„é£Ÿè°±</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/citations_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_lead_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="patterns/agents/prompts/research_subagent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">skills</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="skills/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æŠ€èƒ½</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">classification</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/classification/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude åˆ†ç±»æŒ‡å—</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/classification/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">contextual-embeddings</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¢å¼ºæ£€ç´¢çš„RAGä¸ä¸Šä¸‹æ–‡æ£€ç´¢</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/contextual-embeddings/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ç»“åˆä¸Šä¸‹æ–‡åµŒå…¥çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">retrieval_augmented_generation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Retrieval Augmented Generation (RAG)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/retrieval_augmented_generation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/retrieval_augmented_generation/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Promptfoo è¿›è¡Œè¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder expanded" data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">summarization</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item active" style="padding-left: 40px;">
                        <a href="skills/summarization/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ‘˜è¦ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/summarization/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude æ‘˜è¦</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/summarization/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">text_to_sql</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/guide_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Set your Anthropic API key</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="skills/text_to_sql/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Claude çš„æ–‡æœ¬åˆ° SQL</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="skills/text_to_sql/evaluation/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Promptfoo è¯„ä¼°</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Deepgram</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/prerecorded_audio_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è½¬å½•æ·±è“éŸ³é¢‘æ–‡ä»¶å¹¶ä½¿ç”¨ Anthropic å‡†å¤‡é¢è¯•é—®é¢˜ï¼</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Deepgram/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">Deepgram <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">LlamaIndex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Basic_RAG_With_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">RAG ç®¡é“ä¸ LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Document_Agents_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ–‡æ¡£ä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Multi_Modal_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¤šæ¨¡æ€</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/ReAct_Agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ReAct Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/README_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">LlamaIndex <> Anthropic Cookbooks</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/Router_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ³¨æ„ï¼šè¿™ä»…åœ¨ jupyter notebook ä¸­æ˜¯å¿…éœ€çš„ã€‚</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/LlamaIndex/SubQuestion_Query_Engine_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">SubQuestionQueryEngine</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">MongoDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/MongoDB/rag_using_mongodb_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å¦‚ä½•ä½¿ç”¨ Claude 3 å’Œ MongoDB æ„å»º RAG ç³»ç»Ÿ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/claude_3_rag_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">æ£€æŸ¥ Python ç‰ˆæœ¬</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Pinecone/rag_using_pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Pinecone è¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">VoyageAI</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/VoyageAI/how_to_create_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿™å°†è‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡VOYAGE_API_KEYã€‚</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">Wikipedia</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/Wikipedia/wikipedia-search-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è¿­ä»£æœç´¢ç»´åŸºç™¾ç§‘ä¸ Claude</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">WolframAlpha</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="third_party/WolframAlpha/using_llm_api_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Wolfram Alpha LLM API ä½œä¸º Claude çš„å·¥å…·</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">â–¶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tool_use</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/calculator_tool_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨è®¡ç®—å™¨å·¥å…·ä¸ Claude</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/customer_service_agent_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·åˆ›å»ºå®¢æœä»£ç†</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/extracting_structured_json_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Claude å’Œå·¥å…·ä½¿ç”¨åŠŸèƒ½æå–ç»“æ„åŒ– JSON</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/memory_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">å®‰è£…ä¾èµ–</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/parallel_tools_claude_3_7_sonnet_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">åœ¨ Claude 3.7 Sonnet ä¸Šå¹¶è¡Œè°ƒç”¨å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_choice_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">é€‰æ‹©å·¥å…·</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/tool_use_with_pydantic_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">è®°äº‹å·¥å…·ï¼Œæ”¯æŒ Pydantic å’Œ Anthropic å·¥å…·ä½¿ç”¨</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="tool_use/vision_with_tools_zh.html" class="tree-link">
                            <span class="tree-icon">ğŸ“„</span>
                            <span class="tree-title">ä½¿ç”¨ Vision ä¸å·¥å…·</span>
                        </a>
                    </div>
                </div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="claude">æ‘˜è¦ä¸ Claude</h1>
<h2 id="_1">å¼•è¨€</h2>
<p>æ‘˜è¦æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„ä¸€é¡¹å…³é”®ä»»åŠ¡ï¼Œå®ƒæ¶‰åŠå°†å¤§é‡æ–‡æœ¬æµ“ç¼©æˆæ›´çŸ­ã€æ›´æ˜“äºç†è§£çš„æ ¼å¼ï¼ŒåŒæ—¶ä¿ç•™å…³é”®ä¿¡æ¯ã€‚åœ¨å½“ä»Šä¿¡æ¯ä¸°å¯Œçš„ä¸–ç•Œä¸­ï¼Œä»é•¿ç¯‡æ–‡æ¡£ä¸­å¿«é€Ÿæå–å’Œç»¼åˆè¦ç‚¹å¹¶åœ¨å„ç§è¡Œä¸šå’Œåº”ç”¨ä¸­éƒ½éå¸¸æœ‰ä»·å€¼ã€‚</p>
<p>æœ¬æŒ‡å—ä¾§é‡äºåˆ©ç”¨ Claude çš„æ‘˜è¦èƒ½åŠ›ï¼Œå¹¶ç‰¹åˆ«å¼ºè°ƒæ³•å¾‹æ–‡æ¡£ã€‚æ³•å¾‹æ–‡æ¡£é€šå¸¸å†—é•¿ä¸”é˜…è¯»èµ·æ¥å¾ˆè´¹åŠ›â€”â€”å°¤å…¶æ˜¯åœ¨æœ‰å¤§é‡ç»†åˆ™å’Œæ³•å¾‹æœ¯è¯­çš„æƒ…å†µä¸‹ã€‚æˆ‘ä»¬å°†æ¢è®¨æœ‰æ•ˆæ‘˜è¦æ­¤ç±»æ–‡æ¡£çš„æŠ€æœ¯ã€è¯„ä¼°æ‘˜è¦è´¨é‡çš„æ–¹æ³•ä»¥åŠç³»ç»Ÿåœ°æé«˜æ‘˜è¦æ€§èƒ½çš„ç­–ç•¥ã€‚</p>
<p>æˆ‘ä»¬å°†æ¶µç›–çš„å…³é”®æ–¹é¢åŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆ¶ä½œæœ‰æ•ˆçš„æ‘˜è¦æç¤º</li>
<li>ä»æ–‡æ¡£ä¸­æå–ç‰¹å®šå…ƒæ•°æ®</li>
<li>å¤„ç†è¶…å‡ºå¸¸è§„ä»¤ç‰Œé™åˆ¶çš„é•¿æ–‡æ¡£</li>
<li>ä½¿ç”¨è‡ªåŠ¨åŒ–æ–¹æ³•è¯„ä¼°æ‘˜è¦è´¨é‡ï¼ˆä¾‹å¦‚ï¼ŒROUGE åˆ†æ•°å’Œ <a href="https://www.promptfoo.dev/">Promptfoo</a> è‡ªå®šä¹‰æ–¹æ³•ï¼‰</li>
<li>è¿­ä»£æ”¹è¿›æ‘˜è¦æ€§èƒ½</li>
<li>å…³äºå¦‚ä½•ä¼˜åŒ–æ‘˜è¦å·¥ä½œæµç¨‹çš„é€šç”¨ç»“è®ºæ€§æç¤º</li>
</ul>
<p>åœ¨æœ¬æŒ‡å—ç»“æŸæ—¶ï¼Œæ‚¨å°†å¯¹å¦‚ä½•ä½¿ç”¨ Claude å®ç°å’Œä¼˜åŒ–æ‘˜è¦ä»»åŠ¡æœ‰æ‰å®çš„ç†è§£ï¼Œå¹¶æœ‰ä¸€ä¸ªæ¡†æ¶å¯ä»¥å°†è¿™äº›æŠ€æœ¯åº”ç”¨äºæ‚¨è‡ªå·±çš„ç‰¹å®šç”¨ä¾‹ã€‚</p>
<p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå€¼å¾—è°ˆè°ˆæœ¬æŒ‡å—ä¸­çš„è¯„ä¼°ã€‚è¯„ä¼°æ‘˜è¦è´¨é‡æ˜¯ä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ã€‚ä¸è®¸å¤šå…¶ä»–è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸åŒï¼Œæ‘˜è¦è¯„ä¼°é€šå¸¸ç¼ºä¹æ˜ç¡®ã€å®¢è§‚çš„æŒ‡æ ‡ã€‚è¯¥è¿‡ç¨‹å¯èƒ½é«˜åº¦ä¸»è§‚ï¼Œä¸åŒçš„è¯»è€…é‡è§†æ‘˜è¦çš„ä¸åŒæ–¹é¢ã€‚åƒ ROUGE åˆ†æ•°è¿™æ ·çš„ä¼ ç»Ÿç»éªŒæ–¹æ³•è™½ç„¶æœ‰ç”¨ï¼Œä½†åœ¨æ•æ‰è¿è´¯æ€§ã€äº‹å®å‡†ç¡®æ€§å’Œç›¸å…³æ€§ç­‰ç»†å¾®å·®åˆ«æ–¹é¢å­˜åœ¨å±€é™æ€§ã€‚æ­¤å¤–ï¼Œâ€œæœ€ä½³â€æ‘˜è¦å¯èƒ½å› å…·ä½“ç”¨ä¾‹ã€ç›®æ ‡å—ä¼—å’Œæ‰€éœ€çš„è¯¦ç»†ç¨‹åº¦è€Œå¼‚ã€‚å°½ç®¡å­˜åœ¨è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬åœ¨æœ¬æŒ‡å—ä¸­æ¢ç´¢äº†å‡ ç§å¯ä»¥åˆ©ç”¨çš„æ–¹æ³•ï¼Œç»“åˆäº†è‡ªåŠ¨åŒ–æŒ‡æ ‡ã€æ­£åˆ™è¡¨è¾¾å¼å’Œç‰¹å®šä»»åŠ¡çš„æ ‡å‡†ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†åˆ°æœ€æœ‰æ•ˆçš„æ–¹æ³•é€šå¸¸æ˜¯æ ¹æ®æ‰‹å¤´çš„ç‰¹å®šæ‘˜è¦ä»»åŠ¡é‡èº«å®šåˆ¶æŠ€æœ¯ç»„åˆã€‚</p>
<h2 id="_2">ç›®å½•</h2>
<ol>
<li><a href="#setup">è®¾ç½®</a></li>
<li><a href="#data-preparation">æ•°æ®å‡†å¤‡</a></li>
<li><a href="#basic-summarization">åŸºæœ¬æ‘˜è¦</a></li>
<li><a href="#multi-shot-basic-summarization">å¤šè½®åŸºæœ¬æ‘˜è¦</a></li>
<li><a href="#advanced-techniques">é«˜çº§æŠ€æœ¯</a><ul>
<li><a href="#guided-summarization">å¼•å¯¼å¼æ‘˜è¦</a></li>
<li><a href="#domain-specific-guided-summarization">ç‰¹å®šé¢†åŸŸå¼•å¯¼å¼æ‘˜è¦</a></li>
<li><a href="#including-the-context-of-the-entire-document-meta-summarization">å…ƒæ‘˜è¦</a></li>
</ul>
</li>
<li><a href="#summary-indexed-documents-an-advanced-rag-approach">æ‘˜è¦ç´¢å¼•æ–‡æ¡£ï¼šä¸€ç§é«˜çº§ RAG æ–¹æ³•</a><ul>
<li><a href="#best-practices-for-summarization-rag">æ‘˜è¦ RAG çš„æœ€ä½³å®è·µ</a></li>
</ul>
</li>
<li><a href="#evaluations">è¯„ä¼°</a></li>
<li><a href="#iterative-improvement">è¿­ä»£æ”¹è¿›</a></li>
<li><a href="#conclusion-and-best-practices">ç»“è®ºå’Œæœ€ä½³å®è·µ</a></li>
</ol>
<h2 id="_3">è®¾ç½®</h2>
<p>è¦å®Œæˆæœ¬æŒ‡å—ï¼Œæ‚¨éœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶åŒ…ï¼š</p>
<ul>
<li>anthropic</li>
<li>pypdf</li>
<li>pandas</li>
<li>matplotlib</li>
<li>sklearn</li>
<li>numpy</li>
<li>rouge-score</li>
<li>nltk</li>
<li>seaborn</li>
<li><a href="https://www.promptfoo.dev/">promptfoo</a>ï¼ˆç”¨äºè¯„ä¼°ï¼‰</li>
</ul>
<p>æ‚¨è¿˜éœ€è¦ä¸€ä¸ª Anthropic API å¯†é’¥ã€‚</p>
<p>è®©æˆ‘ä»¬å¼€å§‹å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…å¹¶è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒï¼š</p>
<pre class="codehilite"><code class="language-python"># install packages
!pip install anthropic pypdf pandas matplotlib numpy rouge-score nltk seaborn --quiet
</code></pre>

<pre class="codehilite"><code class="language-python">import os
import re
import anthropic
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
from typing import List, Dict, Tuple
import json
import seaborn as sns

# Set up Anthropic client
# You can set up a .env file with your API key to keep it private, and import it like so:
# from dotenv import load_dotenv
# load_dotenv()

# or add your key directly
api_key = 'ANTHROPIC_API_KEY' # Replace ANTHROPIC_API_KEY with your actual API key
client = anthropic.Anthropic(api_key=api_key)

print(&quot;Setup complete!&quot;)
</code></pre>

<pre class="codehilite"><code>Setup complete!
</code></pre>

<h2 id="_4">æ•°æ®å‡†å¤‡</h2>
<p>åœ¨æˆ‘ä»¬å¼€å§‹æ‘˜è¦æ–‡æ¡£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡æ•°æ®ã€‚è¿™åŒ…æ‹¬ä» PDF ä¸­æå–æ–‡æœ¬ã€æ¸…ç†æ–‡æœ¬å¹¶ç¡®ä¿å…¶å·²å‡†å¤‡å¥½è¾“å…¥åˆ°æˆ‘ä»¬çš„è¯­è¨€æ¨¡å‹ä¸­ã€‚ä¸ºäº†æ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬å·²ä» sec.gov ç½‘ç«™è·å–äº†ä¸€ä¸ª<a href="https://www.sec.gov/Archives/edgar/data/1045425/000119312507044370/dex1032.htm">å…¬å¼€å¯ç”¨çš„è½¬ç§Ÿåè®®</a>ã€‚</p>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•è¦åœ¨æ­¤å¤„æµ‹è¯•çš„ PDFï¼Œè¯·éšæ—¶å°†å…¶å¯¼å…¥æ­¤ç›®å½•ï¼Œç„¶åæ›´æ”¹ä¸‹é¢çš„æ–‡ä»¶è·¯å¾„ã€‚<strong>å¦‚æœæ‚¨åªæƒ³é€šè¿‡å¤åˆ¶å’Œç²˜è´´ä½¿ç”¨æ–‡æœ¬å—ï¼Œè¯·è·³è¿‡æ­¤æ­¥éª¤å¹¶å®šä¹‰ <code>text = &lt;text blob&gt;</code></strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€ç»„ç”¨äºå¤„ç†æ­¤è¿‡ç¨‹çš„å‡½æ•°ï¼š</p>
<pre class="codehilite"><code class="language-python">import pypdf
import re

pdf_path = &quot;data/Sample Sublease Agreement.pdf&quot;

def extract_text_from_pdf(pdf_path):
    with open(pdf_path, 'rb') as file:
        reader = pypdf.PdfReader(file)
        text = &quot;&quot;
        for page in reader.pages:
            text += page.extract_text() + &quot;\n&quot;
    return text

def clean_text(text):
    # Remove extra whitespace
    text = re.sub(r'\s+', ' ', text)
    # Remove page numbers
    text = re.sub(r'\n\s*\d+\s*\n', '\n', text)
    return text.strip()

def prepare_for_llm(text, max_tokens=180000):
    # Truncate text to fit within token limit (approximate)
    return text[:max_tokens * 4]  # Assuming average of 4 characters per token

def get_llm_text(path):
    extracted_text = extract_text_from_pdf(path)
    cleaned_text = clean_text(extracted_text)
    llm_ready_text = prepare_for_llm(cleaned_text)
    return llm_ready_text

# You can now use get_llm_text in your LLM prompt
text = get_llm_text(pdf_path)
print(text[:500])
</code></pre>

<pre class="codehilite"><code>EX-10.32 7 dex1032.htm SUBLEASE AGREEMENT Exhibit 10.32 SUBLEASE AGREEMENT THIS SUBLEASE AGREEMENT (â€œSublease â€), is dated as of April 1, 2006, by and between COHEN BROTHERS, LLC d/b/a COHEN &amp; COMP ANY (â€œSublessor â€) and TABERNA CAPIT AL MANAGEMENT , LLC (â€œSublessee â€), collectively , the â€œ Parties â€ and each a â€œ Party â€. WHEREAS, Sublessor is the lessee under a written lease agreement dated June 22, 2005 wherein Brandywine Cira, L.P ., a Delaware limited partnership (â€œ Lessor â€), leased Suite N
</code></pre>

<p>æ­¤è®¾ç½®ä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾å¤„ç† PDF æ–‡æ¡£å¹¶ä¸ºæ‘˜è¦åšå¥½å‡†å¤‡ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»åŸºæœ¬çš„æ‘˜è¦æ–¹æ³•å¼€å§‹ï¼Œç„¶åé€šè¿‡æ›´é«˜çº§çš„æŠ€æœ¯è¿›è¡Œæ”¹è¿›ã€‚</p>
<h2 id="_5">åŸºæœ¬æ‘˜è¦</h2>
<p>è®©æˆ‘ä»¬ä»ä½¿ç”¨ Claude çš„ç®€å•æ‘˜è¦å‡½æ•°å¼€å§‹ã€‚è¿™æ˜¯ä½¿ç”¨ Claude æ‘˜è¦ä¸Šè¿°æ–‡æ¡£æ–‡æœ¬çš„ç®€å•å°è¯•ã€‚éšç€æœ¬æŒ‡å—çš„è¿›è¡Œï¼Œæˆ‘ä»¬å°†æ”¹è¿›æ­¤æ–¹æ³•ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æˆ‘ä»¬å®é™…ä¸Šå·²ç»åœ¨åˆ©ç”¨ Claude çš„ä¸€äº›é‡è¦åŠŸèƒ½ã€‚å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯åŠ©æ‰‹è§’è‰²å’Œåœæ­¢åºåˆ—çš„ä½¿ç”¨ã€‚åŠ©æ‰‹å‰å¯¼è¯­å°† Claude å®šä½ä¸ºåœ¨æœ€åä¸€ä¸ªçŸ­è¯­ <code>&lt;summary&gt;</code> ä¹‹åç›´æ¥åŒ…å«æ‘˜è¦ã€‚åœæ­¢åºåˆ— <code>&lt;/summary&gt;</code> ç„¶åå‘Šè¯‰ Claude åœæ­¢ç”Ÿæˆã€‚è¿™æ˜¯æˆ‘ä»¬å°†ç»§ç»­åœ¨æœ¬æŒ‡å—ä¸­ä½¿ç”¨çš„æ¨¡å¼ã€‚</p>
<pre class="codehilite"><code class="language-python">def basic_summarize(text, max_tokens=1000):

    # Prompt the model to summarize the text
    prompt = f&quot;&quot;&quot;Summarize the following text in bullet points. Focus on the main ideas and key details:
    {text}
    &quot;&quot;&quot;

    response = client.messages.create(
            model=&quot;claude-3-5-sonnet-20241022&quot;,
            max_tokens=max_tokens,
            system=&quot;You are a legal analyst known for highly accurate and detailed summaries of legal documents.&quot;,
            messages=[
                {
                    &quot;role&quot;: &quot;user&quot;,
                    &quot;content&quot;: prompt
                },
                {
                    &quot;role&quot;: &quot;assistant&quot;,
                    &quot;content&quot;: &quot;Here is the summary of the legal document: &lt;summary&gt;&quot;
                }
            ],
            stop_sequences=[&quot;&lt;/summary&gt;&quot;]
        )

    return response.content[0].text
</code></pre>

<pre class="codehilite"><code class="language-python">basic_response = basic_summarize(text, max_tokens=1000)

print(basic_response)
</code></pre>

<pre class="codehilite"><code>Key Points:
â€¢Between parties: COHEN BROTHERS, LLC d/b/a COHEN &amp; COMPANY (Sublessor) and TABERNA CAPITAL MANAGEMENT, LLC (Sublessee).
â€¢Signed on April 1, 2006.
â€¢Premises: 2,000 square feet of office space in Suite 1703 in the Cira Center at 2929 Arch Street, Philadelphia.

Major Terms:
â€¢Term: 5 years starting April 1, 2006
â€¢Payment: Fixed rent increases annually from $34.50/sf to $37.34/sf over the term.
â€¢Utilities: Tenant pays for electricity and pro rata share of building expenses.
â€¢Use: General office use only.
â€¢Assignment/Subletting: Requires prior written consent of landlord.

Key Obligations:
â€¢Tenant must maintain insurance including liability and property insurance.
â€¢Tenant responsible for interior maintenance/condition of the premises.
â€¢Tenant must comply with all building rules and regulations.
â€¢Tenant must maintain premises in good order and repair.

Notable Provisions:
â€¢Sublessor can recapture premises if tenant tries to assign/sublet without proper consent.
â€¢Default provisions give sublessor multiple remedies including termination and accelerated rent.
â€¢Tenant must indemnify landlord for claims related to tenant's use or actions.
â€¢Tenant responsible for maintaining and repairing interior of premises.

This appears to be a fairly standard commercial office sublease with typical provisions regarding tenant obligations, insurance requirements, default remedies, etc. The sublessor retains significant control and remedies while the sublessee has standard obligations for an office tenant.
</code></pre>

<p>è¿™ç§åŸºæœ¬æ–¹æ³•æä¾›äº†ç®€å•çš„æ‘˜è¦ï¼Œä½†å¯¹äºæ³•å¾‹æˆ–è´¢åŠ¡æ–‡ä»¶æ¥è¯´ï¼Œå®ƒå¯èƒ½æ— æ³•æ•æ‰åˆ°æˆ‘ä»¬æ‰€éœ€çš„æ‰€æœ‰ç»†å¾®å·®åˆ«ã€‚æ­£å¦‚æ‚¨åœ¨ä¸Šé¢é‡æ–°è¿è¡Œå•å…ƒæ ¼æ—¶æ³¨æ„åˆ°çš„é‚£æ ·ï¼Œæ²¡æœ‰æ ‡å‡†çš„ã€æ­£å¼åŒ–çš„è¾“å‡ºã€‚ç›¸åï¼Œæˆ‘ä»¬æ£€ç´¢äº†æ–‡æ¡£çš„åŸºæœ¬æ‘˜è¦ï¼Œæ²¡æœ‰å¤ªå¤šå¯ä¾›è§£æçš„ç»“æ„åŒ–è¾“å‡ºã€‚è¿™ä½¿å¾—å®ƒæ›´éš¾é˜…è¯»ï¼Œæ›´éš¾ä¿¡ä»»ï¼ˆæˆ‘ä»¬æ€ä¹ˆçŸ¥é“å®ƒæ²¡æœ‰é—æ¼ä»€ä¹ˆï¼Ÿï¼‰å› æ­¤ï¼Œåœ¨ä»»ä½•å®é™…åº”ç”¨ä¸­ä½¿ç”¨å®ƒéƒ½æ›´åŠ å›°éš¾ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦å¯ä»¥è°ƒæ•´æˆ‘ä»¬çš„æç¤ºä»¥è·å¾—æ›´ç»“æ„åŒ–çš„æ‘˜è¦è¾“å‡ºã€‚</p>
<h2 id="_6">å¤šè½®åŸºæœ¬æ‘˜è¦</h2>
<p>æˆ‘ä»¬èƒ½å¤Ÿå¦‚æ­¤å¿«é€Ÿåœ°æ‘˜è¦å¤§é‡æ–‡æ¡£ï¼Œè¿™å¾ˆé…·ï¼Œä½†æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚è®©æˆ‘ä»¬å°è¯•åœ¨æç¤ºä¸­æ·»åŠ ä¸€äº›ç¤ºä¾‹ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ”¹è¿›è¾“å‡ºå¹¶åœ¨æˆ‘ä»¬ç»§ç»­è¿›è¡Œæ›´é«˜çº§çš„æŠ€æœ¯ä¹‹å‰åˆ›å»ºä¸€äº›ç»“æ„ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬å®é™…ä¸Šå¹¶æ²¡æœ‰æ›´æ”¹è¯·æ±‚çš„å®é™…æ ¼å¼ï¼Œå°½ç®¡æˆ‘ä»¬é™„åŠ äº† 2 ä¸ªé™„åŠ é¡¹ï¼š</p>
<ol>
<li>æˆ‘ä»¬å‘Šè¯‰æ¨¡å‹â€œä¸è¦å‰å¯¼â€ã€‚åœ¨é™åˆ¶æ¨¡å‹è¾“å‡ºä»…ä¸ºæˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆæ—¶ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè€Œæ²¡æœ‰æ‚¨åœ¨ä½¿ç”¨ Claude æ—¶å¯èƒ½ç†Ÿæ‚‰çš„åˆå§‹å½¢å¼çš„å¯¹è¯è§’åº¦ã€‚å½“æˆ‘ä»¬ç¨ååœ¨æœ¬æŒ‡å—ä¸­ä½¿ç”¨å…¶ä»–â€œè¯´æ˜â€æ—¶ï¼Œè¿™å°¤å…¶é‡è¦ã€‚</li>
<li>æˆ‘ä»¬é™„åŠ äº† 3 ä¸ªæ‘˜è¦æ–‡æ¡£çš„ç¤ºä¾‹ã€‚è¿™ç§°ä¸ºå°‘æ ·æœ¬æˆ–å¤šæ ·æœ¬å­¦ä¹ ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ¨¡å‹ç†è§£æˆ‘ä»¬çš„éœ€æ±‚ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¾“å‡ºå¦‚ä½•å˜åŒ–ï¼š</p>
<pre class="codehilite"><code class="language-python"># We import from our data directory to save space in our notebook
from data.multiple_subleases import document1, document2, document3, sample1, sample2, sample3

def basic_summarize_multishot(text, max_tokens=1000):

    # Prompt the model to summarize the text
    prompt = f&quot;&quot;&quot;Summarize the following text in bullet points. Focus on the main ideas and key details:
        {text}

    Do not preamble.

    Use these examples for guidance in summarizing:

    &lt;example1&gt;
        &lt;original1&gt;
            {document1}
        &lt;/original1&gt;

        &lt;summary1&gt;
            {sample1}
        &lt;/summary1&gt;
    &lt;/example1&gt;

    &lt;example2&gt;
        &lt;original2&gt;
            {document2}
        &lt;/original2&gt;

        &lt;summary2&gt;
            {sample2}
        &lt;/summary2&gt;
    &lt;/example2&gt;

    &lt;example3&gt;
        &lt;original3&gt;
            {document3}
        &lt;/original3&gt;

        &lt;summary3&gt;
            {sample3}
        &lt;/summary3&gt;
    &lt;/example3&gt;
    &quot;&quot;&quot;

    response = client.messages.create(
            model=&quot;claude-3-5-sonnet-20241022&quot;,
            max_tokens=max_tokens,
            system=&quot;You are a legal analyst known for highly accurate and detailed summaries of legal documents.&quot;,
            messages=[
                {
                    &quot;role&quot;: &quot;user&quot;,
                    &quot;content&quot;: prompt
                },
                {
                    &quot;role&quot;: &quot;assistant&quot;,
                    &quot;content&quot;: &quot;Here is the summary of the legal document: &lt;summary&gt;&quot;
                }
            ],
            stop_sequences=[&quot;&lt;/summary&gt;&quot;]
        )

    return response.content[0].text
</code></pre>

<pre class="codehilite"><code class="language-python">basic_multishot_response = basic_summarize_multishot(text, max_tokens=1000)

print(basic_multishot_response)
</code></pre>

<pre class="codehilite"><code>Description: This is a sublease agreement between Cohen Brothers, LLC (Sublessor) and Taberna Capital Management, LLC (Sublessee) for office space in Philadelphia.

&lt;parties involved&gt;
Sublessor: Cohen Brothers, LLC d/b/a Cohen &amp; Company
Sublessee: Taberna Capital Management, LLC
Original lessor: Brandywine Cira, L.P.
&lt;/parties involved&gt;

&lt;property details&gt; 
Address: 2929 Arch Street, Suite 1703, Philadelphia, PA
Description: 2,000 square feet of office space with access to file space, printers, copiers, kitchen, conference rooms
Permitted use: General office use
&lt;/property details&gt;

&lt;term and rent&gt;
Start date: April 1, 2006
End date: 5 years from start date
Monthly rent:
â€¢ Months 1-12: $5,750
â€¢ Months 13-24: $5,865
â€¢ Months 25-36: $5,981.67
â€¢ Months 37-48: $6,101.67
â€¢ Months 49-60: $6,223.33
&lt;/term and rent&gt;

&lt;responsibilities&gt;
Utilities: Not explicitly specified
Maintenance: Not explicitly specified
Repairs: Tenant responsible for damage repairs
Insurance: Tenant required to maintain liability insurance with $3M limit and workers compensation insurance
&lt;/responsibilities&gt;

&lt;special provisions&gt;
Default: Detailed events of default and remedies specified
Holdover: Double rent for unauthorized holdover period
Assignment/Subletting: Not permitted without landlord consent
Alterations: Require landlord consent
Access to services: Includes file space, copiers, conference rooms, receptionist services
&lt;/special provisions&gt;
</code></pre>

<p>å¦‚æœæ‚¨æŸ¥çœ‹æˆ‘ä»¬æä¾›çš„ç¤ºä¾‹ï¼Œæ‚¨ä¼šå‘ç°è¾“å‡ºæ ¼å¼ä¸æ­¤ç›¸åŒï¼ˆè¯·è½¬åˆ° data/&lt;ä»»ä½• .txt æ–‡ä»¶&gt; æŸ¥çœ‹ï¼‰ã€‚è¿™å¾ˆæœ‰è¶£â€”â€”æˆ‘ä»¬æ²¡æœ‰æ˜ç¡®å‘Šè¯‰ Claude éµå¾ªç¤ºä¾‹çš„æ ¼å¼ï¼Œä½†å®ƒä¼¼ä¹ä¹Ÿå·²ç»æ³¨æ„åˆ°äº†ã€‚è¿™è¯´æ˜äº†å°‘æ ·æœ¬å­¦ä¹ çš„åŠ›é‡ï¼Œä»¥åŠ Claude å¦‚ä½•ä»å°‘æ•°ç¤ºä¾‹ä¸­æ³›åŒ–åˆ°æ–°è¾“å…¥ã€‚</p>
<h2 id="_7">é«˜çº§æ‘˜è¦æŠ€æœ¯</h2>
<h3 id="_8">å¼•å¯¼å¼æ‘˜è¦</h3>
<p>å¼•å¯¼å¼æ‘˜è¦æ˜¯æŒ‡æˆ‘ä»¬æ˜ç¡®å®šä¹‰ä¸€ä¸ªæ¡†æ¶ä¾›æ¨¡å‹åœ¨å…¶æ‘˜è¦ä»»åŠ¡ä¸­éµå®ˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹æç¤ºçš„è¯¦ç»†ä¿¡æ¯æ¥å®Œæˆæ‰€æœ‰è¿™äº›æ“ä½œï¼Œä»¥æŒ‡å¯¼ Claude çš„è¯¦ç»†ç¨‹åº¦ã€åŒ…å«æˆ–æ’é™¤æŠ€æœ¯æœ¯è¯­çš„ç¨‹åº¦ï¼Œæˆ–è€…æä¾›æ›´é«˜æˆ–æ›´ä½çº§åˆ«çš„ä¸Šä¸‹æ–‡æ‘˜è¦ã€‚å¯¹äºæ³•å¾‹æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼æ‘˜è¦å…³æ³¨ç‰¹å®šæ–¹é¢ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½å¯ä»¥é€šè¿‡ç¤ºä¾‹ï¼ˆæˆ‘ä»¬åœ¨ä¸Šé¢æ¢è®¨è¿‡ï¼ï¼‰æ¥å®Œæˆä¸ä¸‹é¢ç›¸åŒçš„æ ¼å¼åŒ–è¾“å‡ºï¼</p>
<pre class="codehilite"><code class="language-python">def guided_legal_summary(text, max_tokens=1000):

    # Prompt the model to summarize the text
    prompt = f&quot;&quot;&quot;Summarize the following legal document. Focus on these key aspects:

    1. Parties involved
    2. Main subject matter
    3. Key terms and conditions
    4. Important dates or deadlines
    5. Any unusual or notable clauses

    Provide the summary in bullet points under each category.

    Document text:
    {text}

    &quot;&quot;&quot;

    response = client.messages.create(
        model=&quot;claude-3-5-sonnet-20241022&quot;,
        max_tokens=max_tokens,
        system=&quot;You are a legal analyst known for highly accurate and detailed summaries of legal documents.&quot;,
        messages=[
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: prompt
            },
            {
                &quot;role&quot;: &quot;assistant&quot;,
                &quot;content&quot;: &quot;Here is the summary of the legal document: &lt;summary&gt;&quot;
            }
        ],
        stop_sequences=[&quot;&lt;/summary&gt;&quot;]
    )

    return response.content[0].text
</code></pre>

<pre class="codehilite"><code class="language-python"># Example usage
legal_summary = guided_legal_summary(text)
print(legal_summary)
</code></pre>

<pre class="codehilite"><code>1. Parties Involved
- Sublessor: Cohen Brothers, LLC d/b/a Cohen &amp; Company
- Sublessee: Taberna Capital Management, LLC
- Original Landlord: Brandywine Cira, L.P. (Master Lease landlord)

2. Main Subject Matter
- Sublease agreement for Suite 1703 at Cira Centre, 2929 Arch Street, Philadelphia, PA
- 2,000 square feet of office space within the Master Premises of 13,777 rentable square feet
- Includes furniture, file space, printers, copiers, kitchen, conference room facilities and receptionist/secretarial services

3. Key Terms and Conditions
- Initial Term: 5 years from April 1, 2006 
- Fixed Rent: Escalating annual rent schedule starting at $34.50/sq ft in Year 1 ($69,000 annually) up to $37.34/sq ft in Year 5 ($74,680 annually)
- Pro rata share of operating expenses and utilities
- No assignment or subletting without Sublessor's prior written consent
- Sublessee takes premises &quot;AS IS&quot;
- Sublessee must maintain required insurance coverage
- Default provisions for non-payment, breach of lease terms, bankruptcy, etc.

4. Important Dates/Deadlines  
- Commencement Date: April 1, 2006
- Expiration Date: 5 years from Commencement Date
- Fixed Rent payable monthly in advance on 1st of each month
- 5-day grace period for late payments before default

5. Notable Clauses
- Indemnification requirements for both parties
- Holdover rent at 2x monthly rate if Sublessee remains after term ends
- Sublessor not liable for utilities/services interruption
- Sublessee responsible for any construction liens
- Confession of judgment provision
- Waiver of jury trial provision
</code></pre>

<p>è¿™ç¡®å®ä½¿å¾—è§£ææ–‡æ¡£ä¸­æœ€ç›¸å…³çš„éƒ¨åˆ†å¹¶ç†è§£ç‰¹å®šé¡¹ç›®å’Œé‡è¦æ¡æ¬¾çš„å«ä¹‰æ›´åŠ å®¹æ˜“ã€‚</p>
<h3 id="_9">ç‰¹å®šé¢†åŸŸå¼•å¯¼å¼æ‘˜è¦</h3>
<p>æ‚¨å¯ä»¥å°†ä¸Šè¿°å¼•å¯¼å¼æ‘˜è¦æç¤ºåº”ç”¨äºä»»ä½•ç±»å‹çš„æ–‡æ¡£ï¼Œä½†é€šè¿‡é’ˆå¯¹ç‰¹å®šæ–‡æ¡£ç±»å‹è¿›è¡Œå®šåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å…¶åŠŸèƒ½æ›´å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä»½è½¬ç§Ÿåè®®ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼æ¨¡å‹å…³æ³¨è¯¥ç‰¹å®šæ–‡æ¡£ç±»å‹æœ€ç›¸å…³çš„æ³•å¾‹æœ¯è¯­å’Œæ¦‚å¿µã€‚å½“æˆ‘ä»¬ä½¿ç”¨ Claude å¤„ç†ç‰¹å®šç”¨ä¾‹å¹¶æ˜ç¡®çŸ¥é“æˆ‘ä»¬æƒ³è¦æå–çš„æœ€ç›¸å…³å€¼æ—¶ï¼Œè¿™å°†æ˜¯æœ€ç›¸å…³çš„ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¦‚ä½•ä¿®æ”¹è½¬ç§Ÿåè®®çš„å¼•å¯¼å¼æ‘˜è¦å‡½æ•°çš„ä¸€ä¸ªç¤ºä¾‹ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜å°†â€œæ¨¡å‹â€ä½œä¸ºå‡½æ•°çš„é™„åŠ å‚æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»»åŠ¡æ›´è½»æ¾åœ°ä¸ºæ‘˜è¦é€‰æ‹©ä¸åŒçš„æ¨¡å‹ï¼š</p>
<pre class="codehilite"><code class="language-python">def guided_sublease_summary(text, model=&quot;claude-3-5-sonnet-20241022&quot;, max_tokens=1000):

    # Prompt the model to summarize the sublease agreement
    prompt = f&quot;&quot;&quot;Summarize the following sublease agreement. Focus on these key aspects:

    1. Parties involved (sublessor, sublessee, original lessor)
    2. Property details (address, description, permitted use)
    3. Term and rent (start date, end date, monthly rent, security deposit)
    4. Responsibilities (utilities, maintenance, repairs)
    5. Consent and notices (landlord's consent, notice requirements)
    6. Special provisions (furniture, parking, subletting restrictions)

    Provide the summary in bullet points nested within the XML header for each section. For example:

    &lt;parties involved&gt;

    - Sublessor: [Name]
    // Add more details as needed
    &lt;/parties involved&gt;

    If any information is not explicitly stated in the document, note it as &quot;Not specified&quot;. Do not preamble.

    Sublease agreement text:
    {text}

    &quot;&quot;&quot;

    response = client.messages.create(
        model=model,
        max_tokens=max_tokens,
        system=&quot;You are a legal analyst specializing in real estate law, known for highly accurate and detailed summaries of sublease agreements.&quot;,
        messages=[
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: prompt
            },
            {
                &quot;role&quot;: &quot;assistant&quot;,
                &quot;content&quot;: &quot;Here is the summary of the sublease agreement: &lt;summary&gt;&quot;
            }
        ],
        stop_sequences=[&quot;&lt;/summary&gt;&quot;]
    )

    return response.content[0].text
</code></pre>

<pre class="codehilite"><code class="language-python"># Example usage
sublease_summary = guided_sublease_summary(text)
print(sublease_summary)
</code></pre>

<pre class="codehilite"><code>&lt;parties involved&gt;

- Sublessor: Cohen Brothers, LLC (d/b/a Cohen &amp; Company) 
- Sublessee: Taberna Capital Management, LLC
- Original Lessor: Brandywine Cira, L.P. (Master Lease holder)
&lt;/parties involved&gt;

&lt;property details&gt;

- Address: 2929 Arch Street, Suite 1703, Philadelphia, PA
- Description: 2,000 square feet of office space in Suite 1703 
- Permitted Use: General office use
- Includes: Access to file space, printers, copiers, kitchen, conference rooms, receptionist/secretarial services
&lt;/property details&gt;

&lt;term and rent&gt;

- Start Date: April 1, 2006
- End Date: 5 years from commencement
- Monthly Rent: Escalating schedule starting at $5,750 in year 1 up to $6,223.33 in year 5
- Security Deposit: Not specified
&lt;/term and rent&gt;

&lt;responsibilities&gt;

- Utilities: Sublessee pays proportional share of utilities and operating expenses
- Maintenance: Sublessor responsible for base building maintenance
- Repairs: Sublessee responsible for repairs due to its use
- Insurance: Sublessee must maintain general liability and property insurance
&lt;/responsibilities&gt;

&lt;consent and notices&gt;

- Landlord's Consent: Required for assignment/subletting
- Notice Requirements: All notices must be in writing and delivered to specified addresses
- Sublessor's Consent: Required for alterations, improvements, signage
&lt;/consent and notices&gt;

&lt;special provisions&gt;

- Furniture: Included in lease
- Parking: Not included
- Assignment: No assignment/subletting without Sublessor's consent
- Default Remedies: Specified remedies including termination and accelerated rent
&lt;/special provisions&gt;
</code></pre>

<p>ç”±äºæˆ‘ä»¬å†³å®šå°†æ‘˜è¦çš„æ¯ä¸ªéƒ¨åˆ†éƒ½è¾“å‡ºä¸º XML æ ‡ç­¾ï¼Œå› æ­¤æˆ‘ä»¬ç°åœ¨å¯ä»¥åƒè¿™æ ·å•ç‹¬è§£æå®ƒä»¬ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ JSON æˆ–ä»»ä½•å…¶ä»–æ ¼å¼å®Œæˆï¼‰ï¼š</p>
<pre class="codehilite"><code class="language-python">import re

def parse_sections_regex(text):
    pattern = r'&lt;(.*?)&gt;(.*?)&lt;/\1&gt;'
    matches = re.findall(pattern, text, re.DOTALL)

    parsed_sections = {}
    for tag, content in matches:
        items = [item.strip('- ').strip() for item in content.strip().split('\n') if item.strip()]
        parsed_sections[tag] = items

    return parsed_sections


# Parse the sections
parsed_sections = parse_sections_regex(sublease_summary)

# Check if parsing was successful
if isinstance(parsed_sections, dict) and 'parties involved' in parsed_sections:
    print(&quot;Parties involved:&quot;)
    for item in parsed_sections['parties involved']:
        print(f&quot;- {item}&quot;)
else:
    print(&quot;Error: Parsing failed or 'parties involved' section not found.&quot;)
    print(&quot;Parsed result:&quot;, parsed_sections)
</code></pre>

<pre class="codehilite"><code>Parties involved:

- Sublessor: Cohen Brothers, LLC (d/b/a Cohen &amp; Company)
- Sublessee: Taberna Capital Management, LLC
- Original Lessor: Brandywine Cira, L.P. (Master Lease holder)
</code></pre>

<h3 id="_10">åŒ…å«å¤šä¸ªæ–‡æ¡£çš„ä¸Šä¸‹æ–‡ï¼ˆå…ƒæ‘˜è¦ï¼‰</h3>
<p>å¦‚æœæˆ‘ä»¬æœ‰è®¸å¤šä¸åŒä¸€å®¢æˆ·ç›¸å…³çš„æ–‡æ¡£æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†å—æ–¹æ³•æ¥å¤„ç†æ­¤é—®é¢˜ã€‚è¿™æ˜¯ä¸€ç§å°†æ–‡æ¡£åˆ†è§£ä¸ºæ›´å°ã€å¯ç®¡ç†å—ï¼Œç„¶åå•ç‹¬å¤„ç†æ¯ä¸ªå—çš„æŠ€æœ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆå¹¶æ¯ä¸ªå—çš„æ‘˜è¦ï¼Œä»¥åˆ›å»ºæ•´ä¸ªæ–‡æ¡£çš„å…ƒæ‘˜è¦ã€‚å½“æˆ‘ä»¬æƒ³è¦æ‘˜è¦å¤§é‡æ–‡æ¡£æˆ–æƒ³è¦æ‘˜è¦å•ä¸ªéå¸¸é•¿çš„æ–‡æ¡£æ—¶ï¼Œè¿™å¯èƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œçš„ç¤ºä¾‹ï¼š</p>
<pre class="codehilite"><code class="language-python">from data.multiple_subleases import document1, document2, document3

def chunk_text(text, chunk_size=2000):
    return [text[i:i+chunk_size] for i in range(0, len(text), chunk_size)]

def summarize_long_document(text, max_tokens=2000):

    chunks = chunk_text(text)

    # Iterate over chunks and summarize each one
    # We use guided_legal_summary here, but you can use basic_summarize or any other summarization function
    # Note that we'll also use haiku for the interim summaries, and the 3.5 sonnet for the final summary
    chunk_summaries = [guided_sublease_summary(chunk, model=&quot;claude-3-haiku-20240307&quot;, max_tokens=max_tokens) for chunk in chunks]

    final_summary_prompt = f&quot;&quot;&quot;

    You are looking at the chunked summaries of multiple documents that are all related. Combine the following summaries of the document from different truthful sources into a coherent overall summary:

    {&quot;&quot;.join(chunk_summaries)}

    1. Parties involved (sublessor, sublessee, original lessor)
    2. Property details (address, description, permitted use)
    3. Term and rent (start date, end date, monthly rent, security deposit)
    4. Responsibilities (utilities, maintenance, repairs)
    5. Consent and notices (landlord's consent, notice requirements)
    6. Special provisions (furniture, parking, subletting restrictions)

    Provide the summary in bullet points nested within the XML header for each section. For example:

    &lt;parties involved&gt;

    - Sublessor: [Name]
    // Add more details as needed
    &lt;/parties involved&gt;

    If any information is not explicitly stated in the document, note it as &quot;Not specified&quot;.

    Summary:
    &quot;&quot;&quot;

    response = client.messages.create(
        model=&quot;claude-3-5-sonnet-20241022&quot;,
        max_tokens=max_tokens,
        system=&quot;You are a legal expert that summarizes notes on one document.&quot;,
        messages=[
            {
                &quot;role&quot;: &quot;user&quot;,
                &quot;content&quot;: final_summary_prompt
            },
            {
                &quot;role&quot;: &quot;assistant&quot;,
                &quot;content&quot;: &quot;Here is the summary of the legal document: &lt;summary&gt;&quot;
            }
        ],
        stop_sequences=[&quot;&lt;/summary&gt;&quot;]
    )

    return response.content[0].text

# Example usage
# combine 3 documents (all related) together
text = document1 + document2 + document3
long_summary = summarize_long_document(text)
print(long_summary)
</code></pre>

<pre class="codehilite"><code>&lt;parties involved&gt;

- Sublessor: Apex Innovations, Inc. (Delaware corporation) later identified as TechHub Enterprises, LLC
- Sublessee: NanoSphere Solutions, Inc. and Quantum Dynamics, LLC (California LLC)
- Original Lessor: Innovate Properties, LLP
&lt;/parties involved&gt;

&lt;property details&gt;

- Address: 9876 Innovation Park, Building C, San Francisco, CA 94107
- Description: Approximately 15,000-25,000 square feet of office and laboratory space
- Permitted Use: General office purposes, research and development, and laboratory uses consistent with BSL-2 facility requirements
&lt;/property details&gt;

&lt;term and rent&gt;

- Start Date: September 1, 2023
- End Date: August 31, 2026 (with option to extend for 3-5 additional years)
- Monthly Rent: Starting at $75,000/month with annual 3% increases
- Security Deposit: $450,000-$787,500
&lt;/term and rent&gt;

&lt;responsibilities&gt;

- Utilities: Sublessee responsible for all utilities and services, including electricity, gas, water, sewer, telephone, internet, and janitorial
- Maintenance: Sublessee responsible for interior maintenance, repairs and replacements, including walls, floors, ceilings, doors, windows, fixtures
- Repairs: Sublessee responsible for repairs except building structure, exterior walls, roof which are Sublessor's responsibility
&lt;/responsibilities&gt;

&lt;consent and notices&gt;

- Landlord's Consent: Required for assignments, subletting, alterations
- Notice Requirements: 30 days written notice for defaults, insurance changes; 9-12 months notice for term extensions
&lt;/consent and notices&gt;

&lt;special provisions&gt;

- Furniture: Right to install furniture/equipment 15-30 days before commencement
- Parking: Non-exclusive right to use common parking facilities
- Subletting Restrictions: No assignment/subletting without Sublessor's consent, except to affiliated entities
- Additional: Hazardous materials restrictions, OFAC compliance requirements, jury trial waiver
&lt;/special provisions&gt;
</code></pre>

<h2 id="rag">æ‘˜è¦ç´¢å¼•æ–‡æ¡£ï¼šä¸€ç§é«˜çº§ RAG æ–¹æ³•</h2>
<p>æ‘˜è¦ç´¢å¼•æ–‡æ¡£æ˜¯ä¸€ç§å…ˆè¿›çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) æ–¹æ³•ï¼Œå®ƒåœ¨æ–‡æ¡£çº§åˆ«è¿è¡Œã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„ RAG æŠ€æœ¯ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•å…·æœ‰è®¸å¤šä¼˜åŠ¿ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠå¤§å‹æ–‡æ¡£æˆ–éœ€è¦ç²¾ç¡®ä¿¡æ¯æ£€ç´¢çš„æƒ…å†µä¸‹ã€‚</p>
<h4 id="_11">å·¥ä½œåŸç†</h4>
<ol>
<li>æ–‡æ¡£æ‘˜è¦ï¼šä¸ºè¯­æ–™åº“ä¸­çš„æ¯ä¸ªæ–‡æ¡£ç”Ÿæˆç®€æ´çš„æ‘˜è¦ï¼ˆæŸ¥è¯¢å­é›†æ–‡æœ¬å¹¶å¿«é€Ÿæ‘˜è¦ï¼‰ã€‚</li>
<li>ä¸Šä¸‹æ–‡çª—å£ä¼˜åŒ–ï¼šç¡®ä¿æ‰€æœ‰æ‘˜è¦éƒ½é€‚åˆè¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</li>
<li>ç›¸å…³æ€§è¯„åˆ†ï¼šè¦æ±‚æ¨¡å‹å¯¹æ¯ä¸ªæ‘˜è¦ä¸æ­£åœ¨æŸ¥è¯¢çš„ç›¸å…³æ€§è¿›è¡Œæ’åã€‚</li>
<li>é‡æ–°æ’åï¼ˆå¯é€‰ï¼‰ï¼šåº”ç”¨é‡æ–°æ’åæŠ€æœ¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å’Œå‹ç¼© top-K ç»“æœã€‚</li>
<li>å›ç­”å½“å‰æŸ¥è¯¢ã€‚</li>
</ol>
<p>è¿™ç§æ–¹æ³•æœ‰ä¸€äº›æ˜æ˜¾çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ›´é«˜æ•ˆçš„æ–‡æ¡£æ£€ç´¢æ’åæ–¹å¼ï¼Œä½¿ç”¨çš„ä¸Šä¸‹æ–‡æ¯”ä¼ ç»Ÿ RAG æ–¹æ³•å°‘ã€‚</li>
<li>åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¡¨ç°æ›´ä¼˜ï¼šä¼˜äºå…¶ä»– RAG æ–¹æ³•ï¼Œå§‹ç»ˆå°†æ­£ç¡®æ–‡æ¡£æ’åç¬¬ä¸€ã€‚</li>
<li>ä¼˜åŒ–çš„ä¿¡æ¯æ£€ç´¢ï¼šé‡æ–°æ’åæœ‰åŠ©äºå‹ç¼©ç»“æœï¼Œç¡®ä¿å‘æ¨¡å‹å‘ˆç°æœ€ç®€æ´ã€æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<pre class="codehilite"><code class="language-python">class LegalSummaryIndexedDocuments:

    def __init__(self, client):
        self.client = client # Claude client
        self.documents: List[Dict[str, str]] = [] # List of docs to store
        self.summaries: List[str] = []

    def add_document(self, doc_id: str, content: str):
        # Adds a document to the index
        self.documents.append({&quot;id&quot;: doc_id, &quot;content&quot;: content})

    def generate_summaries(self):
        # Generates summaries for all documents in the index
        for doc in self.documents:
            summary = self._generate_legal_summary(doc[&quot;content&quot;])
            self.summaries.append(summary)

    def _generate_legal_summary(self, content: str) -&gt; str:

        # Note how we constrain the content to a maximum of 2000 words. We do this because we don't need that much information for the intial ranking.
        prompt = f&quot;&quot;&quot;
        Summarize the following sublease agreement. Focus on these key aspects:

        1. Parties involved (sublessor, sublessee, original lessor)
        2. Property details (address, description, permitted use)
        3. Term and rent (start date, end date, monthly rent, security deposit)
        4. Responsibilities (utilities, maintenance, repairs)
        5. Consent and notices (landlord's consent, notice requirements)
        6. Special provisions (furniture, parking, subletting restrictions)

        Provide the summary in bullet points nested within the XML header for each section. For example:

        &lt;parties involved&gt;

        - Sublessor: [Name]
        // Add more details as needed
        &lt;/parties involved&gt;

        If any information is not explicitly stated in the document, note it as &quot;Not specified&quot;.

        Sublease agreement text:
        {content[:2000]}...

        Summary:
        &quot;&quot;&quot;

        response = client.messages.create(
            model=&quot;claude-3-5-sonnet-20241022&quot;,
            max_tokens=500,
            temperature=0.2,
            messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt},
                      {&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Here is the summary of the legal document: &lt;summary&gt;&quot;}],
            stop_sequences=[&quot;&lt;/summary&gt;&quot;]        
        )
        return response.content[0].text

    def rank_documents(self, query: str, top_k: int = 3) -&gt; List[Tuple[str, float]]:
        &quot;&quot;&quot;
        Rank documents based on their relevance to the given query.
        We use Haiku here as a cheaper, faster model for ranking. 
        &quot;&quot;&quot;
        ranked_scores = []
        for summary in self.summaries:

            prompt=f&quot;Legal document summary: {summary}\n\nLegal query: {query}\n\nRate the relevance of this legal document to the query on a scale of 0 to 10. Only output the numeric value:&quot;

            response = client.messages.create(
                model=&quot;claude-3-haiku-20240307&quot;,
                max_tokens=2,
                temperature=0,
                messages=[
                    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}
                ]
            )
            ranked_score = float(response.content[0].text)
            ranked_scores.append(ranked_score)

        ranked_indices = np.argsort(ranked_scores)[::-1][:top_k]
        return [(self.documents[i][&quot;id&quot;], ranked_scores[i]) for i in ranked_indices]

    def extract_relevant_clauses(self, doc_id: str, query: str) -&gt; List[str]:
        &quot;&quot;&quot;
        Extracts relevant clauses from a document based on a query.
        &quot;&quot;&quot;
        doc_content = next(doc[&quot;content&quot;] for doc in self.documents if doc[&quot;id&quot;] == doc_id)

        prompt = f&quot;&quot;&quot;
        Given the following legal query and document content, extract the most relevant clauses or sections and write the answer to the query. 
        Provide each relevant clause or section separately, preserving the original legal language:

        Legal query: {query}

        Document content: {doc_content}...

        Relevant clauses or sections (separated by '---'):&quot;&quot;&quot;

        response = client.messages.create(
                model=&quot;claude-3-5-sonnet-20241022&quot;,
                max_tokens=1000,
                temperature=0,
                messages=[
                    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}
                ]
            )

        clauses = re.split(r'\n\s*---\s*\n', response.content[0].text.strip())
        return [clause.strip() for clause in clauses if clause.strip()]
</code></pre>

<pre class="codehilite"><code class="language-python">from data.multiple_subleases import document1, document2, document3

lsid = LegalSummaryIndexedDocuments(client=client)

# Add documents
lsid.add_document(&quot;doc1&quot;, document1)
lsid.add_document(&quot;doc2&quot;, document2)
lsid.add_document(&quot;doc3&quot;, document3)

# Generate summaries - this would happen at ingestion
lsid.generate_summaries()

# Rank documents for a legal query
legal_query = &quot;What contract is for the sublessor Apex Innovations, LLC?&quot;
ranked_results = lsid.rank_documents(legal_query)

print(&quot;Initial ranking:&quot;, ranked_results)

# Extract relevant clauses from the top-ranked document
top_doc_id = ranked_results[0][0]
relevant_clauses = lsid.extract_relevant_clauses(top_doc_id, legal_query)

print(&quot;\nRelevant clauses from the top-ranked document:&quot;)
for i, clause in enumerate(relevant_clauses[1:], 1):
    print(f&quot;Clause {i}: {clause}&quot;)
</code></pre>

<pre class="codehilite"><code>Initial ranking: [('doc1', 8.0), ('doc3', 0.0), ('doc2', 0.0)]

Relevant clauses from the top-ranked document:
Clause 1: COMMERCIAL SUBLEASE AGREEMENT

THIS COMMERCIAL SUBLEASE AGREEMENT (hereinafter referred to as the &quot;Sublease&quot;) is made and entered into on this 15th day of August, 2023 (the &quot;Effective Date&quot;), by and between:

SUBLESSOR: Apex Innovations, Inc., a Delaware corporation with its principal place of business at 1234 Tech Boulevard, Suite 5000, San Francisco, CA 94105 (hereinafter referred to as the &quot;Sublessor&quot;)
Clause 2: WHEREAS, Sublessor is the Tenant under that certain Master Lease Agreement dated January 1, 2020 (hereinafter referred to as the &quot;Master Lease&quot;), wherein Innovate Properties, LLP (hereinafter referred to as the &quot;Master Lessor&quot;) leased to Sublessor those certain premises consisting of approximately 50,000 square feet of office space located at 9876 Innovation Park, Building C, Floors 10-12, San Francisco, CA 94107 (hereinafter referred to as the &quot;Master Premises&quot;);
Clause 3: Answer: There appears to be an error in the legal query. The query refers to &quot;Apex Innovations, LLC&quot; but the document shows that the sublessor is actually &quot;Apex Innovations, Inc.&quot;, a Delaware corporation. The contract for Apex Innovations, Inc. is:

1. A Commercial Sublease Agreement dated August 15, 2023, where they are the Sublessor
2. A Master Lease Agreement dated January 1, 2020, where they are the Tenant under Innovate Properties, LLP
</code></pre>

<h3 id="rag_1">æ‘˜è¦ RAG çš„æœ€ä½³å®è·µ</h3>
<ul>
<li>æœ€ä½³æ‘˜è¦é•¿åº¦ï¼šå°è¯•ä¸åŒçš„æ‘˜è¦é•¿åº¦ï¼Œä»¥åœ¨ç®€æ´æ€§å’Œä¿¡æ¯é‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</li>
<li>è¿­ä»£é‡æ–°æ’åï¼šè€ƒè™‘å¤šè½®é‡æ–°æ’åä»¥è·å¾—æ›´ç²¾ç¡®çš„ç»“æœï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§å‹æ–‡æ¡£é›†æ—¶ã€‚</li>
<li>ç¼“å­˜ï¼šä¸ºæ‘˜è¦å’Œåˆå§‹æ’åå®ç°ç¼“å­˜æœºåˆ¶ï¼Œä»¥æé«˜é‡å¤æŸ¥è¯¢çš„æ€§èƒ½ã€‚</li>
</ul>
<p>æ‘˜è¦ç´¢å¼•æ–‡æ¡£æä¾›äº†ä¸€ç§å¼ºå¤§çš„ RAG æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠå¤§å‹æ–‡æ¡£æˆ–éœ€è¦ç²¾ç¡®ä¿¡æ¯æ£€ç´¢çš„æƒ…å†µä¸‹è¡¨ç°å‡ºè‰²ã€‚é€šè¿‡åˆ©ç”¨æ–‡æ¡£æ‘˜è¦ã€å¯¹æ•°æ¦‚ç‡è¯„åˆ†å’Œå¯é€‰çš„é‡æ–°æ’åï¼Œæ­¤æ–¹æ³•æä¾›äº†ä¸€ç§é«˜æ•ˆæœ‰æ•ˆçš„æ–¹å¼æ¥æ£€ç´¢å’Œå‘ˆç°ç›¸å…³ä¿¡æ¯ç»™è¯­è¨€æ¨¡å‹ã€‚</p>
<h2 id="_12">è¯„ä¼°</h2>
<p>æ­£å¦‚æœ¬é£Ÿè°±å¼•è¨€ä¸­æ‰€æåˆ°çš„ï¼Œè¯„ä¼°æ‘˜è¦è´¨é‡æ˜¯ä¸€é¡¹è‰°å·¨çš„å·¥ä½œã€‚è¿™æ˜¯å› ä¸ºæ‘˜è¦æ–‡æ¡£æœ‰å¤šç§æ–¹æ³•ï¼Œå¹¶ä¸”ä¸åŒçš„æ‘˜è¦å¯èƒ½åŒæ ·æœ‰æ•ˆã€‚æ ¹æ®ç”¨ä¾‹çš„ä¸åŒï¼Œæ‘˜è¦çš„ä¸åŒæ–¹é¢å¯èƒ½æ›´é‡è¦æˆ–æ›´ä¸é‡è¦ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³æˆ‘ä»¬æç¤ºå·¥ç¨‹çš„ç»éªŒæ–¹æ³•<a href="https://docs.anthropic.com/en/docs/prompt-engineering">æ­¤å¤„</a>ã€‚ä½¿ç”¨ Jupyter Notebook æ˜¯å¼€å§‹æç¤ºå·¥ç¨‹çš„å¥½æ–¹æ³•ï¼Œä½†éšç€æ•°æ®é›†çš„å¢é•¿å’Œæç¤ºæ•°é‡çš„å¢åŠ ï¼Œåˆ©ç”¨èƒ½å¤Ÿä¸æ‚¨ä¸€èµ·æ‰©å±•çš„å·¥å…·éå¸¸é‡è¦ã€‚</p>
<p>åœ¨æœ¬æŒ‡å—çš„è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä½¿ç”¨ <a href="https://www.promptfoo.dev/">Promptfoo</a>ï¼Œä¸€ä¸ªå¼€æº LLM è¯„ä¼°å·¥å…·åŒ…ã€‚è¦å¼€å§‹ï¼Œè¯·å‰å¾€ <code>./evaluation</code> ç›®å½•å¹¶æŸ¥çœ‹ <code>./evaluation/README.md</code>ã€‚</p>
<p>æˆåŠŸè¿è¡Œè¯„ä¼°åï¼Œè¯·è¿”å›æ­¤å¤„æŸ¥çœ‹ç»“æœã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>npx promptfoo@latest view</code> ä»¥åŠ¨æ€æ–¹å¼æŸ¥çœ‹ç»“æœï¼Œåœ¨åˆ›å»ºä¸€äº›ç»“æœä¹‹åã€‚</p>
<pre class="codehilite"><code class="language-python">import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import re

%matplotlib inline
plt.style.use('seaborn')

# Load the data
df = pd.read_csv('data/results.csv')

# Function to extract PASS/FAIL and score
def extract_result(text):
    match = re.search(r'\[(PASS|FAIL)\]\s*\((\d+\.\d+)\)', str(text))
    if match:
        return match.group(1), float(match.group(2))
    return 'UNKNOWN', 0.0

# Apply the extraction to relevant columns
for col in df.columns[2:]:
    df[f'{col}_result'], df[f'{col}_score'] = zip(*df[col].apply(extract_result))

# Prepare data for grouped accuracy score
models = ['3.5 Sonnet', '3.0 Haiku']
prompts = ['basic_summarize', 'guided_legal_summary', 'summarize_long_document']

results = []
for model in models:
    for prompt in prompts:
        col = f'[{model}] prompts.py:{prompt}_result'
        if col in df.columns:
            pass_rate = (df[col] == 'PASS').mean()
            results.append({'Model': model, 'Prompt': prompt, 'Pass Rate': pass_rate})

result_df = pd.DataFrame(results)

# 1. Grouped bar chart for accuracy scores
plt.figure(figsize=(12, 6))
result_pivot = result_df.pivot(index='Prompt', columns='Model', values='Pass Rate')
result_pivot.plot(kind='bar')
plt.title('Pass Rate by Model and Prompt')
plt.ylabel('Pass Rate')
plt.legend(title='Model')
plt.xticks(rotation=45, ha='right')
plt.tight_layout()
plt.show()

# 2. Box plot of scores
plt.figure(figsize=(8, 8))
score_cols = [col for col in df.columns if col.endswith('_score')]
score_data = df[score_cols].melt()
sns.boxplot(x='variable', y='value', data=score_data)
plt.title('Distribution of Scores')
plt.xticks(rotation=90)
plt.xlabel('Model and Prompt')
plt.ylabel('Score')
plt.tight_layout()
plt.show()

# Display summary statistics
summary_stats = df[[col for col in df.columns if col.endswith('_score')]].describe()
display(summary_stats)
</code></pre>

<pre class="codehilite"><code>/var/folders/c8/rjj6d5_15tj4qh_zhlnz9xxr0000gp/T/ipykernel_58010/2701104606.py:7: MatplotlibDeprecationWarning: The seaborn styles shipped by Matplotlib are deprecated since 3.6, as they no longer correspond to the styles shipped by seaborn. However, they will remain available as 'seaborn-v0_8-&lt;style&gt;'. Alternatively, directly use the seaborn API instead.
  plt.style.use('seaborn')



&lt;Figure size 1200x600 with 0 Axes&gt;
</code></pre>

<p><img alt="png" src="guide_files/guide_30_2.png" /></p>
<p><img alt="png" src="guide_files/guide_30_3.png" /></p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>[3.0 Haiku] prompts.py:basic_summarize_score</th>
      <th>[3.0 Haiku] prompts.py:guided_legal_summary_score</th>
      <th>[3.0 Haiku] prompts.py:summarize_long_document_score</th>
      <th>[3.5 Sonnet] prompts.py:basic_summarize_score</th>
      <th>[3.5 Sonnet] prompts.py:guided_legal_summary_score</th>
      <th>[3.5 Sonnet] prompts.py:summarize_long_document_score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>9.000000</td>
      <td>9.000000</td>
      <td>9.000000</td>
      <td>9.000000</td>
      <td>9.000000</td>
      <td>9.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.423333</td>
      <td>1.443333</td>
      <td>1.522222</td>
      <td>1.088889</td>
      <td>1.330000</td>
      <td>1.475556</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.135647</td>
      <td>0.146969</td>
      <td>0.092030</td>
      <td>0.535547</td>
      <td>0.086458</td>
      <td>0.285750</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.190000</td>
      <td>1.270000</td>
      <td>1.440000</td>
      <td>0.000000</td>
      <td>1.230000</td>
      <td>0.750000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.400000</td>
      <td>1.300000</td>
      <td>1.460000</td>
      <td>1.210000</td>
      <td>1.280000</td>
      <td>1.450000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.440000</td>
      <td>1.450000</td>
      <td>1.460000</td>
      <td>1.290000</td>
      <td>1.310000</td>
      <td>1.600000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.510000</td>
      <td>1.490000</td>
      <td>1.630000</td>
      <td>1.400000</td>
      <td>1.340000</td>
      <td>1.640000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.600000</td>
      <td>1.660000</td>
      <td>1.660000</td>
      <td>1.490000</td>
      <td>1.480000</td>
      <td>1.650000</td>
    </tr>
  </tbody>
</table>
</div>

<p>ä»ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬çš„æœ€ä½³è¡¨ç°è€…ä¼¼ä¹æ˜¯ 3.5 Sonnetï¼Œåœ¨æ‰€æœ‰è¯„ä¼°ä¸­é€šè¿‡ç‡ä¸º 66%ï¼Œä»…å¤±è´¥äº† 3 ä¸ªæµ‹è¯•ï¼ˆå½“ä¸€ä¸ªæµ‹è¯•å¤±è´¥æ—¶ï¼Œå®ƒå°±è¢«è§†ä¸ºå¤±è´¥ï¼‰ã€‚è€Œè¿™ä»…ä»…æ˜¯å¼€å§‹â€”â€”æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å®Œå…¨è™šæ„çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®è¦ä¹ˆæ˜¯ï¼ˆaï¼‰ç”± Claude ç”Ÿæˆçš„ï¼Œè¦ä¹ˆæ˜¯ï¼ˆbï¼‰å–è‡ª SEC gov ç½‘ç«™ã€‚å½“æˆ‘ä»¬æ‹¥æœ‰çœŸå®æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„ç‰¹å®šé—®é¢˜é›†æœ‰äº†æ›´å¤šçš„äº†è§£ã€‚</p>
<h2 id="_13">è¿­ä»£æ”¹è¿›</h2>
<p>å½“æˆ‘ä»¬è¿›ä¸€æ­¥æŸ¥çœ‹è¯„ä¼°ç»“æœæ—¶ï¼Œä»æœ‰æ”¹è¿›çš„ç©ºé—´ã€‚è¿™å°±æ˜¯æç¤ºå·¥ç¨‹çš„è¿­ä»£éƒ¨åˆ†å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬ä¸ºæ”¹è¿›ç»“æœå¯ä»¥é‡‡å–çš„ä¸€äº›æ­¥éª¤ï¼š</p>
<ol>
<li>åˆ†æ Promptfoo ç»“æœä»¥ç¡®å®šä¼˜åŠ¿å’ŒåŠ£åŠ¿â€”â€”ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„åŒ…å«è¯„ä¼°ä¼¼ä¹ç»å¸¸å¤±è´¥ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºä¸€äº›æ–‡æ¡£ä¸åŒ…å« XML æ ‡ç­¾æ‰€éœ€çš„ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬æƒ³å‡†ç¡®è¯„ä¼°æ€§èƒ½ï¼Œåº”è¯¥æ”¹è¿›æ­¤è¯„ä¼°ï¼ˆä½†è¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ï¼‰ã€‚</li>
<li>ä¼˜åŒ–æç¤ºä»¥è§£å†³ç‰¹å®šé—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œæé«˜ç®€æ´æ€§æˆ–å®Œæ•´æ€§ï¼‰â€”â€”æˆ‘ä»¬çœ‹åˆ°å¤šè½®æ˜¯æœ€åˆéå¸¸å¥½çš„å°è¯•ã€‚è¿™æ˜¯æˆ‘ä»¬åº”è¯¥ç»“åˆä¸€äº›é«˜çº§æŠ€æœ¯æ¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½çš„å†…å®¹ã€‚</li>
<li>å°è¯•é•¿æ–‡æ¡£çš„ä¸åŒåˆ†å—ç­–ç•¥ã€‚</li>
<li>å¾®è°ƒæ¸©åº¦å’Œ max_tokens å‚æ•°ã€‚</li>
<li>å®ç°åå¤„ç†æ­¥éª¤ä»¥å¢å¼ºæ‘˜è¦è´¨é‡ã€‚</li>
</ol>
<h2 id="_14">ç»“è®ºå’Œæœ€ä½³å®è·µ</h2>
<p>åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬æ¶µç›–äº†ä¸€ç³»åˆ—ä½¿ç”¨ Claude æ‘˜è¦æ–‡æ¡£çš„æŠ€æœ¯ï¼Œé‡ç‚¹å…³æ³¨æ³•å¾‹æ–‡æ¡£ã€‚æ„å»ºå®Œç¾çš„æ‘˜è¦ç³»ç»Ÿå’Œæ‘˜è¦è¯„ä¼°æ¡†æ¶æ˜¯ä¸€é—¨è‰ºæœ¯ï¼šå®ƒéœ€è¦ç»“åˆè¿™äº›æ–¹æ³•æ‰èƒ½æˆåŠŸã€‚æ­£å¦‚æˆ‘ä»¬ä¸€å¼€å§‹æåˆ°çš„ï¼Œæ‘˜è¦æ˜¯ä¸€ä¸ªéå¸¸ä¸»è§‚çš„è¯é¢˜ï¼Œä½†æˆ‘ä»¬å·²ç»å¾ˆå¥½åœ°å°è¯•å¯»æ‰¾å¯è¡Œçš„è¯„ä¼°æ–¹æ³•ï¼Œå¹¶å¯¹æˆ‘ä»¬çš„ç»“æœæ„Ÿåˆ°æ»¡æ„ã€‚è¯·å§‹ç»ˆè®°ä½â€”â€”æ‚¨ä¸æ˜¯åœ¨å°†ç»“æœä¸ 100% çš„å‡†ç¡®æ€§è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚æ‚¨æ˜¯åœ¨ä¸æ‚¨è‡ªå·±æ‰§è¡Œè¿™é¡¹å¤æ‚ä»»åŠ¡çš„èƒ½åŠ›è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼›å€ŸåŠ©æœ¬æŒ‡å—æ‰€ç¤ºçš„ Claude çš„é€Ÿåº¦å’Œæ•ˆç‡ï¼Œæ‚¨å¯ä»¥å¼€å§‹çœŸæ­£ä½“ä¼šåˆ°è¿™ç§æ–¹æ³•è®ºçš„å¥½å¤„ï¼Œä»è€Œå°†æ—¶é—´ç”¨äºçœŸæ­£çš„å†³ç­–ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹è¿™é‡Œçš„å»ºè®®ï¼Œæˆ‘ä»¬åŒ…å«äº†ä¸€äº›æœ€ä½³å®è·µä¾›æ‚¨å‚è€ƒï¼š</p>
<ol>
<li>åˆ¶ä½œæ¸…æ™°å…·ä½“çš„æç¤ºã€‚ä½¿ç”¨â€œä¸è¦å‰å¯¼â€ä¹‹ç±»çš„çŸ­è¯­æ¥é™åˆ¶è¾“å‡ºã€‚</li>
<li>ä½¿ç”¨è‡³å°‘ 2 ä¸ªç¤ºä¾‹ã€‚</li>
<li>å¯¹ç‰¹å®šé¢†åŸŸçš„æ–‡æ¡£ä½¿ç”¨å¼•å¯¼å¼æ‘˜è¦ã€‚</li>
<li>ä¸ºé•¿æ–‡æ¡£å®æ–½æœ‰æ•ˆçš„é«˜çº§ç­–ç•¥ã€‚</li>
<li>å®šæœŸè¯„ä¼°å’Œä¼˜åŒ–æ‚¨çš„æ–¹æ³•ã€‚</li>
<li>è€ƒè™‘ AI ç”Ÿæˆæ‘˜è¦çš„ä¼¦ç†å½±å“å’Œå±€é™æ€§ã€‚</li>
</ol>
            </article>
            
            <nav class="page-nav"><a href="skills/classification/guide_zh.html" class="nav-link prev">â† è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒ</a><a href="skills/retrieval_augmented_generation/guide_zh.html" class="nav-link next">Retrieval Augmented Generation (RAG) â†’</a></nav>
        </main>
    </div>
</body>
</html>