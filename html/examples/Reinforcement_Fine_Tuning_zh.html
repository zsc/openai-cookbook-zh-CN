<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <title>**探索用于强化微调的模型评分器**</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="搜索..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">articles</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/how_to_work_with_large_language_models_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用大型语言模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/openai-harmony_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">OpenAI harmony 响应格式</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/related_resources_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">网上相关资源</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/run-nvidia_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 NVIDIA TensorRT-LLM 优化 OpenAI GPT-OSS 模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/techniques_to_improve_reliability_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">提高可靠性的技术</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/text_comparison_examples_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">文本比较示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="articles/what_makes_documentation_good_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">什么样的文档是好文档</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">gpt-oss</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/fine-tune-transfomers_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">微调多语言推理器，使用 Hugging Face</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/handle-raw-cot_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">gpt-oss 中如何处理原始思维链</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/run-colab_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/run-locally-lmstudio_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何在本地使用 LM Studio 运行 gpt-oss</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/run-locally-ollama_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何在本地运行 gpt-oss 并使用 Ollama</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/run-transformers_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 Hugging Face Transformers 运行 gpt-oss</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="articles/gpt-oss/run-vllm_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 vLLM 运行 gpt-oss</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder expanded" data-level="0" >
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">examples</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Assistants_API_overview_python_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Assistants API 概述 (Python SDK)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/batch_processing_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">批量处理与 Batch API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Chat_finetuning_data_prep_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">数据准备与分析，用于聊天模型微调</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Classification_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">split data into train and test</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Clustering_for_transaction_classification_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">交易分类聚类</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Clustering_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">导入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Code_search_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">数据加载</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/completions_usage_api_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">OpenAI Completions 使用 API 扩展示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Context_summarization_with_realtime_api_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">摘要 — 实时 API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Creating_slides_with_Assistants_API_and_DALL-E3_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Assistants API (GPT-4) 和 DALL·E-3 创建幻灯片</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Custom-LLM-as-a-Judge_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Braintrust 构建 LLM-as-a-judge 评估来检测幻觉</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/custom_image_embedding_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">安装</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Customizing_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">0. 导入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Data-intensive-Realtime-apps_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">实用指南：使用实时 API 处理数据密集型应用</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Data_extraction_transformation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Developing_hallucination_guardrails_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">设置 pandas 显示选项的函数</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Embedding_long_inputs_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Embedding 长度超过模型最大上下文的文本</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Embedding_Wikipedia_articles_for_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">嵌入维基百科文章以供搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Enhance_your_prompts_with_meta_prompting_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">元提示：自动化提示优化指南</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Entity_extraction_for_long_documents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">长文档内容提取</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/File_Search_Responses_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用文件搜索工具的响应 API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Fine-tuned_classification_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">示例：微调分类器</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Fine_tuning_for_function_calling_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Function_calling_finding_nearby_places_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">函数调用，查找附近地点：利用谷歌地图 API 和客户档案</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Function_calling_with_an_OpenAPI_spec_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Function-calling with an OpenAPI specification</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Generate_Images_With_GPT_Image_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 GPT Image 生成和编辑图像</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Generate_Images_With_High_Input_Fidelity_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">以高输入保真度生成图像</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Get_embeddings_from_dataset_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">从数据集中获取嵌入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/gpt4-1_prompting_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT-4.1 提示指南</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_build_a_tool-using_agent_with_Langchain_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 LangChain 构建一个使用工具的 Agent</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_call_functions_for_knowledge_retrieval_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用具有知识库的函数</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_call_functions_with_chat_models_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何结合聊天模型调用函数</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_combine_GPT4o_with_RAG_Outfit_Assistant_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何结合 GPT-4o Mini 与 RAG - 创建服装搭配应用</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_count_tokens_with_tiktoken_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 tiktoken 计算 token 数量</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_finetune_chat_models_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何微调聊天模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_format_inputs_to_ChatGPT_models_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何为 ChatGPT 模型格式化输入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_handle_rate_limits_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何处理速率限制</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_stream_completions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何流式传输补全</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_use_guardrails_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用护栏</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/How_to_use_moderation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用审核 API</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Leveraging_model_distillation_to_fine-tune_a_model_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">利用模型蒸馏微调模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Multiclass_classification_for_transactions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">多类别交易分类</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Named_Entity_Recognition_to_enrich_text_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">naively consider the first result as the best</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Optimize_Prompts_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">优化提示词</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Orchestrating_agents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">代理编排：例程和交接</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Prompt_Caching101_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">提示缓存入门</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Prompt_migration_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Question_answering_using_a_search_API_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Question_answering_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用基于嵌入的搜索来回答问题</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/RAG_with_graph_db_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">检索增强生成与图数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/reasoning_function_calls_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用推理模型管理函数调用</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Recommendation_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用嵌入和最近邻搜索进行推荐</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Regression_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" style="padding-left: 20px;">
                        <a href="examples/Reinforcement_Fine_Tuning_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">**探索用于强化微调的模型评分器**</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Reproducible_outputs_with_the_seed_parameter_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何通过新的 seed 参数使您的 completions 输出可复现</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/SDG1_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">生成合成数据（第一部分）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Search_reranking_with_cross-encoders_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">搜索重排与交叉编码器</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Semantic_text_search_using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">搜索特定产品的评论</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Speech_transcription_methods_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">🗣️ 说话转文本方法与 OpenAI API 的比较</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Structured_Outputs_Intro_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">结构化输出简介</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Structured_outputs_multi_agent_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">结构化输出用于多代理系统</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Summarizing_long_documents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">总结长文档</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Tag_caption_images_with_GPT4V_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 GPT-4o mini 标记和说明图片</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Unit_test_writing_using_a_multi-step_prompt_with_older_completions_API_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">单元测试编写：多步提示（使用旧版 API）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Unit_test_writing_using_a_multi-step_prompt_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">多步提示单元测试</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/User_and_product_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">将嵌入作为推荐项在 X_test 上进行评估</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Using_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">负面示例（速度慢且有速率限制）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Using_logprobs_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 logprobs 进行分类和问答评估</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Using_tool_required_for_customer_service_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用工具处理客户服务</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Visualizing_embeddings_in_2D_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">加载嵌入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Visualizing_embeddings_in_3D_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">三维可视化嵌入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Whisper_correct_misspelling_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">imports</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Whisper_processing_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Whisper_prompting_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">提示词指南</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 20px;">
                        <a href="examples/Zero-shot_classification_with_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">convert 5-star rating to binary sentiment</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">agents_sdk</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/agents_sdk/dispute_agent_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">引言</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/agents_sdk/evaluate_agents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Langfuse 评估代理</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/agents_sdk/parallel_agents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">并行运行OpenAI Agents SDK的专用代理</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multi-agent-portfolio-collaboration</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/multi_agent_portfolio_collaboration_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">多智能体编排与OpenAI Agents SDK：金融投资组合分析示例</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">prompts</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/code_interpreter_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">代码解释器提示（最佳实践，GPT-4.1）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/editor_base_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">备忘录编辑器 – 提示</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/fundamental_base_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">首席基本面分析师 – 提示</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/macro_base_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/pm_base_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">投资组合经理 – 系统提示</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/quant_base_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">定量研究员 – 提示</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/agents_sdk/multi-agent-portfolio-collaboration/prompts/tool_retry_prompt_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">工具调用重试说明</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">azure</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/azure/chat_with_your_own_data_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure chat completion models with your own data (preview)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/azure/chat_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 聊天补全示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/azure/embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 嵌入示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/azure/functions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 函数示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/azure/whisper_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 音频耳语（预览）示例</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">archive</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/chat_with_your_own_data_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure OpenAI on your own data is only supported by the 2023-08-01-preview API version</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/chat_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 聊天补全示例 (预览)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/completions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure completions 示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/DALL-E_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure DALL·E 图像生成示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 嵌入示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/functions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 函数示例</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/azure/archive/whisper_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure 音频耳语（预览）示例</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">book_translation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/book_translation/translate_latex_book_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">翻译一本用LaTeX写成的斯洛文尼亚语书籍成英语</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">chatgpt</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">gpt_actions_library</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/.gpt_action_getting_started_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT Action 库：入门指南 (Weather.gov)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_bigquery_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT Action 库：BigQuery</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_box_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Box</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_canvas_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Canvas LMS 食谱</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_confluence_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Confluence</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_github_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：GitHub</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_gmail_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Gmail</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_google_calendar_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Google 日历</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_google_drive_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">**GPT 操作库：Google 云端硬盘**</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_googleads_adzviser_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库 - 通过 Adzviser 连接 Google Ads</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_jira_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Jira</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_notion_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT Action 库：Notion</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_outlook_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Outlook</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_redshift_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：AWS RedShift</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_retool_workflow_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Retool 工作流</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_salesforce_gong_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Salesforce + Gong</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_salesforce_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_doc_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Sharepoint (返回文件以供数据分析/文档摘要)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_text_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Sharepoint (以文档形式返回)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_snowflake_direct_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT Actions - Snowflake 直接连接</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_snowflake_middleware_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作 - Snowflake 中间件</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_sql_database_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：SQL 数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_trayai_apim_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Tray.ai API 管理操作</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_workday_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">**Workday GPT 操作手册**</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_action_zapier_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库：Zapier</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_middleware_aws_function_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT Action 库（中间件）：AWS Lambda</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_middleware_azure_function_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库（中间件）：Azure Function</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/gpt_actions_library/gpt_middleware_google_cloud_function_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT 操作库（中间件）：Google Cloud Function</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">rag-quickstart</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">azure</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/chatgpt/rag-quickstart/azure/Azure_AI_Search_with_Azure_Functions_and_GPT_Actions_in_ChatGPT_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">架构</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">gcp</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/chatgpt/rag-quickstart/gcp/Getting_started_with_bigquery_vector_search_and_openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GCP BigQuery 与 GCP Functions 和 ChatGPT 中的 GPT 操作</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">pinecone-retool</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/chatgpt/rag-quickstart/pinecone-retool/gpt-action-pinecone-retool-rag_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">sharepoint_azure_function</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/chatgpt/sharepoint_azure_function/Using_Azure_Functions_and_Microsoft_Graph_to_Query_SharePoint_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Azure Functions 结合 OAuth 和 Microsoft Graph API 从 ChatGPT 搜索 O365 / SharePoint</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">codex</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/codex/jira-github_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 `codex-cli` 自动化 Jira ↔ GitHub</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">dalle</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/dalle/How_to_create_dynamic_masks_with_DALL-E_and_Segment_Anything_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 DALL·E 和 Segment Anything 创建动态蒙版</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/dalle/Image_generations_edits_and_variations_with_DALL-E_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用 DALL·E API</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">data</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">structured_outputs_articles</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/data/structured_outputs_articles/cnns_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/data/structured_outputs_articles/llms_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/data/structured_outputs_articles/moe_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">deep_research_api</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/deep_research_api/introduction_to_deep_research_api_agents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">深度研究代理食谱</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/deep_research_api/introduction_to_deep_research_api_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Deep Research API 入门</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">how_to_build_a_deep_research_mcp_server</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/deep_research_api/how_to_build_a_deep_research_mcp_server/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">深度研究的 MCP</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">evaluation</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/evaluation/Evaluate_RAG_with_LlamaIndex_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 LlamaIndex 构建和评估 RAG</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/evaluation/Getting_Started_with_OpenAI_Evals_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 OpenAI Evals 入门</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/evaluation/How_to_eval_abstractive_summarization_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何评估摘要任务</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/evaluation/How_to_evaluate_LLMs_for_SQL_generation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何为 SQL 生成测试和评估 LLM</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">use-cases</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/bulk-experimentation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">设置您的评估</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/completion-monitoring_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">生成我们的测试数据</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/EvalsAPI_Image_Inputs_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Evals API：图像输入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/mcp_eval_notebook_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用自定义数据集评估基于 MCP 的答案</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/regression_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">设置你的评估</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/responses-evaluation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">评估现有响应的新模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/structured-outputs-evaluation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">结构化输出评估食谱</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/tools-evaluation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 OpenAI Evals 进行工具评估</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/evaluation/use-cases/web-search-evaluation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用自定义数据集评估网络搜索质量</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">fine-tuned_qa</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/fine-tuned_qa/ft_retrieval_augmented_generation_qdrant_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Qdrant 和少样本学习对 OpenAI 模型进行检索增强生成 (RAG) 微调</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/fine-tuned_qa/olympics-1-collect-data_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">1. 收集关于 2020 年奥运会的维基百科数据</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/fine-tuned_qa/olympics-2-create-qa_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">2. 创建合成问答数据集</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/fine-tuned_qa/olympics-3-train-qa_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">3. 训练专门用于问答的微调模型</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/fine-tuned_qa/reinforcement_finetuning_healthbench_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 OpenAI API 进行对话推理的强化微调</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">gpt-5</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/gpt-5/gpt-5_frontend_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT-5 驱动的前端开发</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/gpt-5/gpt-5_new_params_and_tools_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT-5 新参数和工具</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/gpt-5/gpt-5_prompting_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT-5 提示指南</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/gpt-5/prompt-optimization-cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">GPT-5 提示迁移与改进：使用新的提示优化器</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">mcp</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/mcp/databricks_mcp_cookbook_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用OpenAI Agent SDK和Databricks MCP服务器构建供应链Copilot</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/mcp/mcp_tool_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">指南：使用响应式API的MCP工具</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">building-a-supply-chain-copilot-with-agent-sdk-and-databricks-mcp</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/mcp/building-a-supply-chain-copilot-with-agent-sdk-and-databricks-mcp/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Databricks MCP 助手（含 React UI）</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">ui</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/mcp/building-a-supply-chain-copilot-with-agent-sdk-and-databricks-mcp/ui/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">React + Vite</span>
                        </a>
                    </div>
                </div></div></div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">multimodal</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/multimodal/image_understanding_with_rag_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Download the dataset</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/multimodal/Using_GPT4_Vision_With_Function_Calling_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用具有函数调用的 GPT-4o Vision</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/multimodal/Vision_Fine_tuning_on_GPT4o_for_Visual_Question_Answering_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">加载数据集</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">o-series</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/o-series/o3o4-mini_prompting_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">o3/o4-mini 函数调用指南</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">o1</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/o1/Using_chained_calls_for_o1_structured_outputs_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">提示</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/o1/Using_reasoning_for_data_validation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Generate data three times using the existing dataGeneration function</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/o1/Using_reasoning_for_routine_generation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Set display options to show all text in the dataframe cells</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">object_oriented_agentic_approach</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/object_oriented_agentic_approach/Secure_code_interpreter_tool_for_LLM_agents_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Run the container in restricted mode. The container will run in the background.</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">partners</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">eval_driven_system_design</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/partners/eval_driven_system_design/receipt_inspection_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">评估驱动的系统设计：从原型到生产</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">model_selection_guide</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/partners/model_selection_guide/model_selection_guide_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">实用模型选择指南，面向真实用例</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">temporal_agents_with_knowledge_graphs</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/partners/temporal_agents_with_knowledge_graphs/Appendix_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">A. 原型到生产</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/partners/temporal_agents_with_knowledge_graphs/temporal_agents_with_knowledge_graphs_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">1. 执行摘要</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">responses_api</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/responses_api/reasoning_items_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">调用函数</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/responses_api/responses_api_tool_orchestration_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/responses_api/responses_example_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Display the image from the provided URL</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">stripe_model_eval</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/stripe_model_eval/selecting_a_model_based_on_stripe_conversion_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">根据 Stripe 转化率选择模型：初创公司的实用评估</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">third_party</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Code_quality_and_security_scan_with_GitHub_Actions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Reasoning over Code Quality and Security in GitHub Pull Requests</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/financial_document_analysis_with_llamaindex_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">金融文档分析与 LlamaIndex</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/How_to_automate_S3_storage_with_functions_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">如何使用函数自动化任务（S3 存储桶示例）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Openai_monitoring_with_wandb_weave_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 W&B Weave 进行 OpenAI API 监控</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Visualizing_embeddings_in_Kangas_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Column                Non-Null Count DataGrid Type</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Visualizing_embeddings_in_wandb_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">加载嵌入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Visualizing_embeddings_with_Atlas_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">加载嵌入</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/third_party/Web_search_with_google_api_bring_your_own_browser_tool_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Check if 'items' exists in the results</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">vector_databases</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/vector_databases/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">PolarDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/PolarDB/Getting_started_with_PolarDB_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 PolarDB-PG 作为 OpenAI 嵌入的向量数据库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">SingleStoreDB</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/SingleStoreDB/OpenAI_wikipedia_semantic_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">简介</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/SingleStoreDB/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">analyticdb</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/analyticdb/Getting_started_with_AnalyticDB_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 AnalyticDB 作为 OpenAI 嵌入的向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/analyticdb/QA_with_Langchain_AnalyticDB_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">问答系统：Langchain、AnalyticDB 和 OpenAI</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">azuresearch</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/azuresearch/Getting_started_with_azure_ai_search_and_openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Azure AI Search 作为 OpenAI 嵌入的向量数据库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">cassandra_astradb</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/cassandra_astradb/Philosophical_Quotes_AstraPy_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">哲学与向量嵌入、OpenAI 和 Astra DB</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/cassandra_astradb/Philosophical_Quotes_cassIO_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Philosophy with Vector Embeddings, OpenAI and Cassandra / Astra DB through CQL</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/cassandra_astradb/Philosophical_Quotes_CQL_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">哲学与向量嵌入、OpenAI 和 Cassandra / Astra DB</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/cassandra_astradb/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">RAG 与 Astra DB 和 Cassandra</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">chroma</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/chroma/hyde-with-chroma-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">鲁棒问答系统：结合 Chroma 和 OpenAI</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/chroma/Using_Chroma_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Chroma 进行嵌入搜索</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">deeplake</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/deeplake/deeplake_langchain_qa_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 LangChain、Deep Lake 和 OpenAI 进行问答</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">elasticsearch</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/elasticsearch/elasticsearch-retrieval-augmented-generation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">检索增强生成，使用 Elasticsearch 和 OpenAI</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/elasticsearch/elasticsearch-semantic-search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Elasticsearch 和 OpenAI 进行语义搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/elasticsearch/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Elasticsearch</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">hologres</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/hologres/Getting_started_with_Hologres_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用Hologres作为OpenAI嵌入的向量数据库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">kusto</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/kusto/Getting_started_with_kusto_and_openai_embeddings_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">文件大约为 700 MB，因此这需要一些时间</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/kusto/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Kusto 作为向量数据库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">milvus</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/milvus/Filtered_search_with_Milvus_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Milvus 和 OpenAI 进行过滤搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/milvus/Getting_started_with_Milvus_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Milvus 和 OpenAI 入门指南</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">mongodb_atlas</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/mongodb_atlas/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">MongoDB Atlas 向量搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/mongodb_atlas/semantic_search_using_mongodb_atlas_vector_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 1 步：设置环境</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">myscale</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/myscale/Getting_started_with_MyScale_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 MyScale 作为 OpenAI 嵌入的向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/myscale/Using_MyScale_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 MyScale 进行嵌入搜索</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">neon</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/neon/neon-postgres-vector-search-pgvector_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Neon Postgres 向量相似性搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/neon/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">什么是 Neon？</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">pinecone</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/Gen_QA_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Pinecone 进行检索增强生成问答</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/GPT4_Retrieval_Augmentation_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">create the length function</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Pinecone 向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/Semantic_Search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">我们可以将嵌入提取到一个列表中</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/Using_Pinecone_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Pinecone 进行嵌入搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/pinecone/Using_vision_modality_for_RAG_with_Pinecone_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">导入Pinecone库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">qdrant</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/qdrant/Getting_started_with_Qdrant_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Qdrant 作为 OpenAI embedding 的向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/qdrant/QA_with_Langchain_Qdrant_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Langchain、Qdrant 和 OpenAI 的问答系统</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/qdrant/Using_Qdrant_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Qdrant 进行嵌入搜索</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">redis</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/redis/getting-started-with-redis-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Redis 和 OpenAI 作为向量数据库</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/redis/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Redis</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/redis/redis-hybrid-query-examples_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Redis 和 OpenAI 运行混合 VSS 查询</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/redis/Using_Redis_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Redis 进行嵌入搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">redisjson</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/vector_databases/redis/redisjson/redisjson_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Redis Vectors as JSON with OpenAI</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="3" style="padding-left: 60px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">redisqna</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 80px;">
                        <a href="examples/vector_databases/redis/redisqna/redisqna_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Redis 作为上下文存储与 OpenAI Chat</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">supabase</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/supabase/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Supabase 向量数据库</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">tair</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/tair/Getting_started_with_Tair_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Tair作为OpenAI嵌入的向量数据库使用指南</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/tair/QA_with_Langchain_Tair_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Langchain、Tair 和 OpenAI 进行问答</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">typesense</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/typesense/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Typesense</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/typesense/Using_Typesense_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Typesense 进行嵌入搜索</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">weaviate</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/generative-search-with-weaviate-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">导出 OpenAI API 密钥</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/getting-started-with-weaviate-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">安装 Weaviate Python 客户端</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/hybrid-search-with-weaviate-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">安装用于 Python 的 Weaviate 客户端</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/question-answering-with-weaviate-and-openai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">在 Weaviate 中使用 OpenAI Q&A 模块进行问答</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Weaviate <> OpenAI</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/weaviate/Using_Weaviate_for_embeddings_search_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">使用 Weaviate 进行嵌入搜索</span>
                        </a>
                    </div>
                </div></div>
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">zilliz</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/zilliz/Filtered_search_with_Zilliz_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Zilliz和OpenAI的过滤搜索</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/vector_databases/zilliz/Getting_started_with_Zilliz_and_OpenAI_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Zilliz 和 OpenAI 入门指南</span>
                        </a>
                    </div>
                </div></div></div></div>
                    <div class="tree-folder " data-level="1" style="padding-left: 20px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">voice_solutions</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/voice_solutions/running_realtime_api_speech_on_esp32_arduino_edge_runtime_elatoai_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">在 .env.local 中设置您的环境变量</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/voice_solutions/steering_tts_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                
                    <div class="tree-item " style="padding-left: 40px;">
                        <a href="examples/voice_solutions/voice_translation_into_different_languages_using_GPT-4o_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">确保已安装 requests 包</span>
                        </a>
                    </div>
                
                    <div class="tree-folder " data-level="2" style="padding-left: 40px;">
                        <div class="tree-folder-header">
                            <span class="tree-arrow">▶</span>
                            <span class="tree-icon"></span>
                            <span class="tree-title">one_way_translation_using_realtime_api</span>
                        </div>
                        <div class="tree-folder-content">
                
                    <div class="tree-item " style="padding-left: 60px;">
                        <a href="examples/voice_solutions/one_way_translation_using_realtime_api/README_zh.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Translation Demo</span>
                        </a>
                    </div>
                </div></div></div></div></div></div></nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="_1"><strong>探索用于强化微调的模型评分器</strong></h1>
<p><em>本指南面向已熟悉 OpenAI API、对强化微调 (RFT) 有基本了解，并希望将其微调模型用于研究或其他用途的开发人员和机器学习从业者。OpenAI 的服务并非用于任何医疗状况的个性化治疗或诊断，并受我们<a href="https://openai.com/policies/">适用条款</a>的约束。</em></p>
<p><a href="https://platform.openai.com/docs/guides/reinforcement-fine-tuning">强化微调 (RFT)</a> 旨在通过探索解决方案空间并强化能带来更高奖励的策略来提高推理模型的推理性能。RFT 有助于模型做出更敏锐的决策并更有效地解释上下文。</p>
<p>在本指南中，我们将介绍如何将 RFT 应用于 OpenAI <code>o4-mini</code> 推理模型，使用生命科学研究领域的一个任务：根据医患对话和描述预测结果，这是许多健康研究研究中的必要评估。我们将使用医学-o1-可验证问题 <a href="https://huggingface.co/datasets/FreedomIntelligence/medical-o1-verifiable-problem">数据集</a> 的一个子集。您将学习成功运行 RFT 作业以满足您用例的关键步骤。</p>
<p>我们将涵盖以下内容：</p>
<ul>
<li><strong><a href="#1-setup">1. 设置</a></strong></li>
<li><strong><a href="#2-gathering-the-dataset">2. 收集数据集</a></strong></li>
<li><strong><a href="#3-benchmarking-the-base-model">3. 对基础模型进行基准测试</a></strong></li>
<li><strong><a href="#4-defining-your-grader">4. 定义评分器</a></strong></li>
<li><strong><a href="#5-training">5. 训练</a></strong></li>
<li><strong><a href="#6-using-your-fine-tuned-model">6. 使用微调后的模型</a></strong></li>
</ul>
<hr />
<h2 id="1"><strong>1. 设置</strong></h2>
<p>即使是强大的推理模型，在专家级行为方面也可能达不到目标——尤其是在医学等细微差别和精确性至关重要的领域。想象一个模型试图从对话中提取 <a href="https://www.cms.gov/medicare/coding-billing/icd-10-codes">ICD-10</a> 代码：即使它理解了要点，它也可能不会使用医学专业人员期望的确切术语。</p>
<p>RFT 的其他绝佳应用场景包括分类账标准化或分级欺诈风险等主题——在这些场景中，您需要精确、可靠且可重复的推理。请查看我们的 <a href="https://platform.openai.com/docs/guides/rft-use-cases">RFT 用例指南</a> 以获取精彩示例。</p>
<p>在我们的案例中，我们将专注于教导 <code>o4-mini</code> 更好地预测临床对话和描述的结果。具体来说，我们想看看 RFT 是否能提高预测的准确性。</p>
<p>在此过程中，我们将讨论如何编写有效的评分器、它们如何指导模型的学习以及如何警惕经典的奖励黑客行为陷阱。</p>
<hr />
<h2 id="2"><strong>2. 收集数据集</strong></h2>
<p>让我们从 Hugging Face 加载数据集开始。我们对那些被构成为患者病例描述及其相关问题，然后是正确答案的样本感兴趣。这些样本代表了医生总结病例并分配结果的真实对话记录。对于任何用例，验证黄金答案的准确性至关重要，需要仔细考虑。在这里，我们将信任数据集的质量。</p>
<pre class="codehilite"><code class="language-python">import re
from datasets import load_dataset
ds = load_dataset(&quot;FreedomIntelligence/medical-o1-verifiable-problem&quot;)

def is_age_question(sample):
    question = sample.get('Open-ended Verifiable Question', '')
    # Match &quot;A 88-year-old&quot;, &quot;An 8-year-old&quot;, &quot;A 23-year-old&quot;, etc. at the start
    return re.match(r&quot;^(A|An) \d{1,2}-year-old&quot;, question) is not None

filtered_samples = [s for s in ds[&quot;train&quot;] if is_age_question(s)]
print(f&quot;Filtered samples: {len(filtered_samples)}&quot;)
</code></pre>

<pre class="codehilite"><code>/Users/theophile/Documents/repos/jupyter-env/lib/python3.12/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm


Filtered samples: 9169
</code></pre>

<p>RFT 的优势之一是它不需要数千个样本就能开始产生差异。得益于轨迹采样和训练期间的反馈循环，模型不仅能学习正确的行为，还能避免不良模式。这意味着即使使用小型数据集，我们也能看到稳健的收益。</p>
<p>对于本次运行，我们将随机抽取 100 个训练样本和 100 个测试样本，并对其进行轻微标准化。</p>
<pre class="codehilite"><code class="language-python">import random

# Set a random seed for reproducibility
random.seed(42)

# Randomly select 100 training samples from filtered_samples
train_samples = random.sample(filtered_samples, min(100, len(filtered_samples)))

# Remove training samples from filtered_samples to avoid overlap
remaining_samples = [s for s in filtered_samples if s not in train_samples]

# Randomly select 100 test samples from the remaining samples (no overlap)
test_samples = random.sample(remaining_samples, min(100, len(remaining_samples)))

print(f&quot;Number of training samples: {len(train_samples)}&quot;)
print(f&quot;Number of test samples: {len(test_samples)}&quot;)
</code></pre>

<pre class="codehilite"><code>Number of training samples: 100
Number of test samples: 100
</code></pre>

<pre class="codehilite"><code class="language-python"># Standardize the 'Ground-True Answer' fields to all lowercase in train and test samples
for sample in train_samples:
    if 'Ground-True Answer' in sample and isinstance(sample['Ground-True Answer'], str):
        sample['Ground-True Answer'] = sample['Ground-True Answer'].lower()

for sample in test_samples:
    if 'Ground-True Answer' in sample and isinstance(sample['Ground-True Answer'], str):
        sample['Ground-True Answer'] = sample['Ground-True Answer'].lower()
</code></pre>

<p>我们将这些样本转换为 <code>jsonl</code> 格式，这是 <a href="https://platform.openai.com/docs/api-reference/fine-tuning/reinforcement-input">强化微调 API</a> 所期望的。</p>
<pre class="codehilite"><code class="language-python">import json

def convert_to_jsonl_format(samples, filename):
    with open(filename, &quot;w&quot;) as f:
        for sample in samples:
            user_content = sample.get(&quot;Open-ended Verifiable Question&quot;, &quot;&quot;)
            reference_answer = sample.get(&quot;Ground-True Answer&quot;, &quot;&quot;)
            json_obj = {
                &quot;messages&quot;: [
                    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_content}
                ],
                &quot;reference_answer&quot;: reference_answer
            }
            f.write(json.dumps(json_obj) + &quot;\n&quot;)

def load_jsonl(filename):
    samples = []
    with open(filename, &quot;r&quot;) as f:
        for line in f:
            samples.append(json.loads(line))
    return samples

# Save the datasets to jsonl files
convert_to_jsonl_format(train_samples, &quot;data/medical_01_verifiable_problem_train.jsonl&quot;)
convert_to_jsonl_format(test_samples, &quot;data/medical_01_verifiable_problem_val.jsonl&quot;)

# Load the datasets back from jsonl files
train_samples_loaded = load_jsonl(&quot;data/medical_01_verifiable_problem_train.jsonl&quot;)
test_samples_loaded = load_jsonl(&quot;data/medical_01_verifiable_problem_val.jsonl&quot;)
</code></pre>

<p>接下来，我们将了解基础模型开箱即用的表现——以及它还有多大的成长空间。</p>
<hr />
<h2 id="3"><strong>3. 对基础模型进行基准测试</strong></h2>
<p>在微调任何内容之前，我们需要了解我们的起点。基准测试让我们清楚地了解模型最初的优势和劣势——以便我们以后衡量它的进步程度。</p>
<p>我们将首先依赖两个简单而强大的评估器：</p>
<ol>
<li><code>clinical_phrase_binary_grader</code> - 一个精确匹配检查器。</li>
<li><code>clinical_phrase_grader</code> - 一个更宽松的、基于令牌的相似度评分器。</li>
</ol>
<pre class="codehilite"><code class="language-python">from rapidfuzz import fuzz, utils

def clinical_phrase_grader(sample: dict, item: dict) -&gt; float:
    from rapidfuzz import fuzz, utils
    score = fuzz.token_set_ratio(sample[&quot;output_text&quot;], item[&quot;reference_answer&quot;], processor=utils.default_process)
    return score / 100.0

def clinical_phrase_binary_grader(sample: dict, item: dict) -&gt; float:
    return 1.0 if sample[&quot;output_text&quot;] == item[&quot;reference_answer&quot;] else 0.0

def combined_grader(sample: dict, item: dict, weights: list[float] = [0.85, 0.15]) -&gt; float:
    clinical_phrase_score = clinical_phrase_grader(sample, item)
    binary_score = clinical_phrase_binary_grader(sample, item)
    return weights[0] * clinical_phrase_score + weights[1] * binary_score
</code></pre>

<p>这种组合使我们能够跟踪严格的正确性和部分词汇重叠。二进制评分器给出清晰的 0 或 1：模型是否产生了精确匹配？更宽松的评分器提供了更多细微差别——输出与黄金答案有多接近？我们同时使用两者，因为结果通常以多种有效方式表达。例如，模型可能响应“痛风性关节炎”而不是“痛风”。虽然人工评估者可能认为这部分可接受，但严格的字符串匹配则不行。结合精确和模糊评分可确保对模型输出进行更准确和公平的评估。</p>
<p>我们构建一个辅助函数来在示例前添加系统提示。</p>
<pre class="codehilite"><code class="language-python">def prepend_system_prompt_to_first_user_message(samples, system_prompt, path=None):
    new_samples = []
    for sample in samples:
        # Deep copy to avoid mutating the original
        sample_copy = json.loads(json.dumps(sample))
        messages = sample_copy.get(&quot;messages&quot;, [])
        if messages and messages[0].get(&quot;role&quot;) == &quot;user&quot; and isinstance(messages[0].get(&quot;content&quot;), str):
            if not messages[0][&quot;content&quot;].startswith(system_prompt):
                messages[0][&quot;content&quot;] = f&quot;{system_prompt}\n\n{messages[0]['content']}&quot;
        new_samples.append(sample_copy)
    if path is not None:
        with open(path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
            for item in new_samples:
                f.write(json.dumps(item, ensure_ascii=False) + &quot;\n&quot;)
    return new_samples
</code></pre>

<pre class="codehilite"><code class="language-python">simple_prompt = &quot;&quot;&quot;You are an expert clinician. For each clinical vignette, respond with exactly one phrase: the single most likely outcome or phenomenon, all in lowercase. 

- Do not add punctuation, articles, explanations, or commentary - output only the term itself.
- Sometimes, the expected answer can be a synonym of what you think.
- Use the standard clinical name (e.g. “thought withdrawal”, “Toxoplasma encephalitis”).&quot;&quot;&quot;
train_samples_loaded_simple_sys_prompt = prepend_system_prompt_to_first_user_message(
    train_samples_loaded, simple_prompt, path=&quot;data/medical_01_verifiable_problem_train_simple_prompt.jsonl&quot;
)
test_samples_loaded_simple_sys_prompt = prepend_system_prompt_to_first_user_message(
    test_samples_loaded, simple_prompt, path=&quot;data/medical_01_verifiable_problem_val_simple_prompt.jsonl&quot;
)
</code></pre>

<p>然后构建一个辅助函数来生成和存储模型的预测。</p>
<pre class="codehilite"><code class="language-python">from openai import OpenAI
import concurrent.futures
from tqdm import tqdm
import os

client = OpenAI()

def generate_model_predictions(
    subset,
    prompt_type,
    model_name=&quot;o4-mini-2025-04-16&quot;,
    reasoning_effort=&quot;medium&quot;,
    n_runs=1,
    verbose=False,
):
    if isinstance(subset, str):
        samples_path = f&quot;data/medical_01_verifiable_problem_{subset}_{prompt_type}_prompt.jsonl&quot;
        with open(samples_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
            test_samples = [json.loads(line) for line in f if line.strip()]
    else:
        test_samples = [subset]

    def run_inference(item):
        resp = client.responses.create(
            model=model_name,
            input=item[&quot;messages&quot;],
            reasoning={&quot;effort&quot;: reasoning_effort, &quot;summary&quot;: &quot;detailed&quot;},
        )
        model_prediction = {'output_text': resp.output_text}
        reasoning_tokens_used = resp.usage.output_tokens_details.reasoning_tokens
        summaries = [seg.text for item in resp.output if item.type == &quot;reasoning&quot; for seg in item.summary]
        summaries_string = &quot;\n&quot;.join(summaries)
        if verbose:
            print(&quot;Prompt: {}&quot;.format(item[&quot;messages&quot;][0][&quot;content&quot;]))
            print(f&quot;Model Sample: {model_prediction}\nSolution: {item['reference_answer']}\n&quot;)
        return {
            &quot;model_prediction&quot;: model_prediction[&quot;output_text&quot;],
            &quot;input&quot;: item,
            &quot;reasoning_tokens_used&quot;: reasoning_tokens_used,
            &quot;reference_answer&quot;: item[&quot;reference_answer&quot;],
            &quot;summaries&quot;: summaries_string
        }

    # Ensure the predictions directory exists before any file operations
    predictions_dir = os.path.join(&quot;data&quot;, &quot;rft&quot;, &quot;predictions&quot;)
    os.makedirs(predictions_dir, exist_ok=True)

    # Check if results already exist for all runs
    results_per_run = []
    for run_idx in range(n_runs):
        run_save_path = os.path.join(
            predictions_dir,
            f&quot;{subset}_{prompt_type}_{model_name}_{reasoning_effort}_predictions_run{run_idx+1}.json&quot;
        )
        if os.path.exists(run_save_path):
            print(f&quot;Results for run {run_idx+1} already exist at {run_save_path}. Loading results.&quot;)
            with open(run_save_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
                run_results = json.load(f)
            results_per_run.append(run_results)
        else:
            if len(test_samples) == 1:
                run_results = [run_inference(test_samples[0])]
            else:
                run_results = []
                with concurrent.futures.ThreadPoolExecutor() as executor:
                    futures = [executor.submit(run_inference, item) for item in test_samples]
                    for future in tqdm(futures, total=len(futures), desc=f&quot;Generating predictions (run {run_idx+1})&quot;):
                        result = future.result()
                        run_results.append(result)
                with open(run_save_path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
                    json.dump(run_results, f, ensure_ascii=False, indent=2)
            results_per_run.append(run_results)

    # Return a flat list for backward compatibility
    if n_runs == 1:
        return results_per_run[0]
    else:
        return results_per_run
</code></pre>

<p>要生成预测，请先确保您的 API 密钥已设置：</p>
<pre class="codehilite"><code class="language-bash">export OPENAI_API_KEY=...
</code></pre>

<pre class="codehilite"><code class="language-python"># OpenAI o4-mini model
results_simple_o4mini = generate_model_predictions(
    subset=&quot;train&quot;,
    prompt_type=&quot;simple&quot;,
    model_name=&quot;o4-mini&quot;,
    reasoning_effort=&quot;medium&quot;,
    n_runs=3
)
</code></pre>

<pre class="codehilite"><code class="language-python"># OpenAI o3 model
results_simple_o3 = generate_model_predictions(
    subset=&quot;train&quot;,
    prompt_type=&quot;simple&quot;,
    model_name=&quot;o3&quot;,
    reasoning_effort=&quot;medium&quot;,
    n_runs=3
)
</code></pre>

<p>现在我们有了可以评估的预测。<br>我们将构建一个辅助函数，使我们能够轻松地切换不同的评分方法，</p>
<pre class="codehilite"><code class="language-python">import functools

def evaluate_predictions_with_grader(
    predictions,
    grader_func=combined_grader,
):
    results = []

    if isinstance(predictions, dict):
        predictions = [predictions]

    def run_grading(pred):
        model_prediction = {&quot;output_text&quot;: pred[&quot;model_prediction&quot;]}
        item = pred[&quot;input&quot;]
        score = grader_func(model_prediction, item)
        result = pred.copy()
        result[&quot;score&quot;] = score
        return result

    if len(predictions) == 1:
        result = run_grading(predictions[0])
        results.append(result)
    else:
        with concurrent.futures.ThreadPoolExecutor() as executor:
            futures = [executor.submit(run_grading, pred) for pred in predictions]
            for future in tqdm(concurrent.futures.as_completed(futures), total=len(futures), desc=&quot;Grading predictions&quot;):
                results.append(future.result())

    total = len(results)
    correct = sum(r[&quot;score&quot;] for r in results)
    accuracy = correct / total if total else 0.0

    metrics = {
        &quot;total_samples&quot;: total,
        &quot;accuracy&quot;: accuracy,
    }
    print(metrics)
    return metrics, results

def run_prediction_evaluation(
    model_name=&quot;o4-mini&quot;,
    reasoning_effort=&quot;medium&quot;,
    prompt_type=&quot;simple&quot;,
    subset=&quot;train&quot;,
    grader_func=combined_grader,
    num_runs=3,
):
    if isinstance(grader_func, functools.partial):
        name = grader_func.func.__name__
        mg = grader_func.keywords[&quot;model_grader&quot;]
        mg_name = mg[&quot;name&quot;]
        name = f&quot;{name}_{mg_name}&quot;
    else:
        name = getattr(grader_func, &quot;__name__&quot;, getattr(grader_func, &quot;__class__&quot;, type(grader_func)).__name__)
    grader_func_name = name.replace(&quot; &quot;, &quot;_&quot;).replace(&quot;:&quot;, &quot;_&quot;).replace(&quot;/&quot;, &quot;_&quot;).replace(&quot;,&quot;, &quot;_&quot;)

    for i in range(num_runs):
        preds_path = f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_predictions_run{i+1}.json&quot;
        with open(preds_path, &quot;r&quot;) as f:
            preds = json.load(f)
        metrics, results_with_scores = evaluate_predictions_with_grader(preds, grader_func=grader_func)
        # Save the scored results
        with open(f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_{grader_func_name}_predictions_run_{i+1}_scored.json&quot;, &quot;w&quot;) as f:
            json.dump(results_with_scores, f, indent=2)
        # Save the metrics
        with open(f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_{grader_func_name}_predictions_run_{i+1}_metrics.json&quot;, &quot;w&quot;) as f:
            json.dump(metrics, f, indent=2)
        # Save the scores (if present in results_with_scores)
        scores = [item.get(&quot;score&quot;) for item in results_with_scores if &quot;score&quot; in item]
        with open(f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_{grader_func_name}_predictions_run_{i+1}_scores.json&quot;, &quot;w&quot;) as f:
            json.dump(scores, f, indent=2)
    return metrics, results_with_scores # Return last metrics and results for convenience

def load_predictions(
    model_name=&quot;o4-mini&quot;,
    reasoning_effort=&quot;medium&quot;,
    prompt_type=&quot;simple&quot;,
    subset=&quot;train&quot;,
    grader_func_name=&quot;clinical_phrase_grader&quot;,
    num_runs=3
):
    all_predictions = []
    all_metrics = []
    for run in range(1, num_runs + 1):
        pred_path = f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_{grader_func_name}_predictions_run_{run}_scored.json&quot;
        metrics_path = f&quot;data/rft/predictions/{subset}_{prompt_type}_{model_name}_{reasoning_effort}_{grader_func_name}_predictions_run_{run}_metrics.json&quot;
        try:
            with open(pred_path, &quot;r&quot;) as f:
                predictions = json.load(f)
        except FileNotFoundError:
            predictions = None
        try:
            with open(metrics_path, &quot;r&quot;) as f:
                metrics = json.load(f)
        except FileNotFoundError:
            metrics = None
        all_predictions.append(predictions)
        all_metrics.append(metrics)
    return all_predictions, all_metrics
</code></pre>

<p>然后运行评估。</p>
<pre class="codehilite"><code class="language-python">model_name = &quot;o4-mini&quot;
reasoning_effort = &quot;medium&quot;
prompt_type = &quot;simple&quot;
subset = &quot;train&quot;
grader_func = combined_grader
grader_func_name = &quot;combined_grader&quot;
num_runs = 3
run_prediction_evaluation(
    model_name=model_name, 
    reasoning_effort=reasoning_effort, 
    prompt_type=prompt_type, 
    subset=subset, 
    grader_func=grader_func, 
    num_runs=num_runs
)
predictions_o4mini_medium_simple_prompt, metrics_o4mini_medium_simple_prompt = load_predictions(model_name=model_name, reasoning_effort=reasoning_effort, prompt_type=prompt_type, subset=subset, grader_func_name=grader_func_name, num_runs=num_runs)
</code></pre>

<pre class="codehilite"><code>Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 610524.60it/s]


{'total_samples': 100, 'accuracy': 0.590985993228499}


Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 311612.48it/s]


{'total_samples': 100, 'accuracy': 0.5750433490539723}


Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 769597.06it/s]

{'total_samples': 100, 'accuracy': 0.5943742483874717}
</code></pre>

<p>可视化结果使我们能够发现趋势和失败模式。</p>
<pre class="codehilite"><code class="language-python"># Print mistakes where the model did not get the correct answer (score &lt; 1.0)
mistakes = [
    {&quot;index&quot;: i, **res}
    for i, res in enumerate(predictions_o4mini_medium_simple_prompt[0])
    if res[&quot;score&quot;] &lt; 1.0
]

print(f&quot;\nTotal mistakes: {len(mistakes)}&quot;)
for m in mistakes[15:20]:
    print(f&quot;\n[Sample {m['index']}]&quot;)
    print(f&quot;  Model prediction: {m['model_prediction']}&quot;)
    print(f&quot;  Reference answer: {m['reference_answer']}&quot;)
    print(f&quot;  Score: {m['score']}&quot;)
</code></pre>

<pre class="codehilite"><code>Total mistakes: 86

[Sample 18]
  Model prediction: acute anterior uveitis
  Reference answer: recurring eye redness and pain
  Score: 0.3596153846153846

[Sample 19]
  Model prediction: 390 meq
  Reference answer: 150 meq
  Score: 0.6071428571428571

[Sample 20]
  Model prediction: adamts13 deficiency
  Reference answer: decreased adamts13 activity in serum
  Score: 0.5037037037037037

[Sample 22]
  Model prediction: todd paralysis
  Reference answer: seizure
  Score: 0.16190476190476194

[Sample 23]
  Model prediction: hypokalemia
  Reference answer: hypomagnesemia
  Score: 0.612
</code></pre>

<p>如上所示，典型的失败模式分为三类：</p>
<ol>
<li>微小差异和格式问题，得分 &gt;=0.8。</li>
<li>部分词汇匹配，0.3 &lt; 得分 &lt; 0.8。</li>
<li>词汇上不相关，得分 &lt; 0.3。</li>
</ol>
<p>我们可以可视化训练集上的完整得分分布。</p>
<blockquote>
<p>注意：在实践中，大规模分析模型错误通常涉及手动审查和自动化方法的结合——例如标记失败类型或按得分和内容对预测进行聚类。该工作流程超出了本指南的范围，但一旦您确定了广泛的模式，这是一个有价值的后续步骤。</p>
</blockquote>
<pre class="codehilite"><code class="language-python">import matplotlib.pyplot as plt
scores_distribution = [m['score'] for m in predictions_o4mini_medium_simple_prompt[0]]
plt.hist(scores_distribution, alpha=0.6, label='o4-mini medium simple prompt')
plt.legend()
</code></pre>

<pre class="codehilite"><code>&lt;matplotlib.legend.Legend at 0x125f6b7a0&gt;
</code></pre>

<p><img alt="png" src="Reinforcement_Fine_Tuning_files/Reinforcement_Fine_Tuning_28_1.png" /></p>
<p>让我们与其他模型和提示进行比较，并可视化得分。</p>
<pre class="codehilite"><code class="language-python"># OpenAI o3 model
model_name = &quot;o3&quot;
reasoning_effort = &quot;medium&quot;
prompt_type = &quot;simple&quot;
subset = &quot;train&quot;
grader_func = combined_grader
grader_func_name = &quot;combined_grader&quot;
num_runs = 3
run_prediction_evaluation(model_name=model_name, reasoning_effort=reasoning_effort, prompt_type=prompt_type, subset=subset, grader_func=grader_func, num_runs=num_runs)
predictions_o3_medium_simple_prompt, metrics_o3_medium_simple_prompt = load_predictions(model_name=model_name, reasoning_effort=reasoning_effort, prompt_type=prompt_type, subset=subset, grader_func_name=grader_func_name, num_runs=num_runs)
</code></pre>

<pre class="codehilite"><code>Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 820803.13it/s]


{'total_samples': 100, 'accuracy': 0.6186850707880021}


Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 523633.46it/s]


{'total_samples': 100, 'accuracy': 0.6149897683385446}


Grading predictions: 100%|██████████| 100/100 [00:00&lt;00:00, 515270.76it/s]

{'total_samples': 100, 'accuracy': 0.6254662232084496}
</code></pre>

<pre class="codehilite"><code class="language-python">import numpy as np
import pandas as pd
import seaborn as sns

def average_and_std_metrics(metrics_list):
    &quot;&quot;&quot;Returns dicts of mean and std for a list of metrics dicts.&quot;&quot;&quot;
    if not metrics_list: return {}, {}
    keys = metrics_list[0].keys()
    arr = {k: np.array([m[k] for m in metrics_list]) for k in keys}
    mean = {k: float(np.mean(arr[k])) for k in keys}
    std = {k: float(np.std(arr[k])) for k in keys}
    return mean, std

def plot_model_accuracies(model_metrics_avg, model_metrics_std, grader_title=&quot;Combined Grader Accuracy&quot;, sharey: bool = True) -&gt; None:
    &quot;&quot;&quot;Plots model accuracies with standard deviation error bars.&quot;&quot;&quot;
    # Convert the nested dicts into tidy DataFrames
    df_avg = pd.DataFrame(model_metrics_avg).T.reset_index().rename(columns={&quot;index&quot;: &quot;Model&quot;})
    df_std = pd.DataFrame(model_metrics_std).T.reset_index().rename(columns={&quot;index&quot;: &quot;Model&quot;})

    # Long-form for Seaborn
    long_df_avg = df_avg.melt(id_vars=&quot;Model&quot;, value_vars=[&quot;accuracy&quot;], var_name=&quot;Metric&quot;, value_name=&quot;Accuracy&quot;)
    long_df_std = df_std.melt(id_vars=&quot;Model&quot;, value_vars=[&quot;accuracy&quot;], var_name=&quot;Metric&quot;, value_name=&quot;Std&quot;)

    # Merge avg and std for error bars
    long_df = pd.merge(long_df_avg, long_df_std, on=[&quot;Model&quot;, &quot;Metric&quot;])

    pretty_names = {&quot;accuracy&quot;: grader_title}

    # Create a separate figure for each metric
    for metric_key in [&quot;accuracy&quot;]:
        metric_df = long_df[long_df[&quot;Metric&quot;] == metric_key].copy()
        plt.figure(figsize=(8, 5))
        # Plot bars with error bars
        ax = sns.barplot(data=metric_df, x=&quot;Model&quot;, y=&quot;Accuracy&quot;, hue=&quot;Model&quot;, palette=&quot;tab10&quot;, legend=False, errorbar=None)
        bars = ax.patches
        # Add error bars manually
        for i, row in enumerate(metric_df.itertuples()):
            bar = bars[i]
            x = bar.get_x() + bar.get_width() / 2
            y = row.Accuracy
            yerr = row.Std
            ax.errorbar(x=x, y=y, yerr=yerr, fmt='none', ecolor='black', capsize=5, elinewidth=2, capthick=2, zorder=10)
        plt.title(pretty_names[metric_key])
        plt.ylabel(&quot;Accuracy&quot;)
        plt.xlabel(&quot;&quot;)
        if sharey: plt.ylim(0, 1)
        # Annotate bars with exact values
        for bar in bars:
            height = bar.get_height()
            ax.annotate(f&quot;{height:.2f}&quot;, xy=(bar.get_x() + bar.get_width() / 2, height), xytext=(0, 6), textcoords=&quot;offset points&quot;, ha='center', va='bottom', fontsize=10, fontweight='bold')
        plt.xticks(rotation=15, ha=&quot;right&quot;)
        plt.tight_layout()
        plt.show()
</code></pre>

<pre class="codehilite"><code class="language-python">avg_metrics_o4mini_medium_simple_prompt, std_metrics_o4mini_medium_simple_prompt = average_and_std_metrics(metrics_o4mini_medium_simple_prompt)
avg_metrics_o3_medium_simple_prompt, std_metrics_o3_medium_simple_prompt = average_and_std_metrics(metrics_o3_medium_simple_prompt)
model_metrics_avg = {
    &quot;o4-mini-medium-simple-prompt&quot;: avg_metrics_o4mini_medium_simple_prompt,
    &quot;o3-medium-simple-prompt&quot;: avg_metrics_o3_medium_simple_prompt,
}
model_metrics_std = {
    &quot;o4-mini-medium-simple-prompt&quot;: std_metrics_o4mini_medium_simple_prompt,
    &quot;o3-medium-simple-prompt&quot;: std_metrics_o3_medium_simple_prompt,
}
plot_model_accuracies(model_metrics_avg, model_metrics_std, grader_title=&quot;Combined Grader Accuracy&quot;)
</code></pre>

<p><img alt="png" src="Reinforcement_Fine_Tuning_files/Reinforcement_Fine_Tuning_32_0.png" /></p>
<p>我们可以看到模型的性能有明显的局限性。在实践中，迭代提示通常有助于提高基线结果并从基础模型中获得更多收益。然而，在这种情况下，我们的提示工程并未带来有意义的改进——因此我们排除了这些运行的分析。</p>
<p>RFT 起作用的一个关键要求是基础模型能够成功完成任务的至少一些示例。初始准确率约为 0.6 是一个强烈信号，表明 RFT 可以提高性能。如果模型从未在您的任务上成功过，那么就没有可以攀登的学习信号。</p>
<p>此评估过程为我们准备了下一步：使用结构化、高质量的评分器反馈来指导模型。</p>
<hr />
<h2 id="4"><strong>4. 定义评分器</strong></h2>
<p>评分器定义了塑造 RFT 期间模型行为的奖励函数。它提供所需输出的示例——并惩罚不良输出。设计有效的评分器需要原则性的结构和深思熟虑的领域见解，这也许是成功 RFT 最重要的任务。</p>
<p>在本节中，我们将介绍 3 个评分器，展示如何设置它们以适应 API，并讨论它们产生的结果。然后，我们将展示如何实际启动 RFT 任务。</p>
<h3 id="_2">基于字符串的评分器</h3>
<p>我们从一个使用我们早期评估函数的双评分器开始，因为它提供了一个得分分布，该分布将与预测与参考答案的词汇接近度保持一致。它提供了一个起点，但信号不够丰富，无法让 <code>o4-mini</code> 真正学习和改进，第一次实验表明在 RFT 运行期间奖励停滞不前。对于 API 调用，您应该构建如下所示的 Python 评分函数。</p>
<pre class="codehilite"><code class="language-python">import inspect

# --- Utility functions ---
def build_python_grader_payload(grader_fn) :
    &quot;&quot;&quot;Build a payload for a python grader.&quot;&quot;&quot;
    grader_source = inspect.getsource(grader_fn)
    # Enforce function name to be `grade`
    grader_source = grader_source.replace(grader_fn.__name__, &quot;grade&quot;, 1)
    return {
        &quot;type&quot;: &quot;python&quot;,
        &quot;source&quot;: grader_source,
    }

multi_python_grader_tool_call = {
    &quot;type&quot;: &quot;multi&quot;,
    &quot;graders&quot;: {
        &quot;clinical_phrase&quot;: {
            &quot;name&quot;: &quot;clinical_phrase_grader&quot;,
            &quot;image_tag&quot;: &quot;2025-05-08&quot;,
            **build_python_grader_payload(clinical_phrase_grader),
        },
        &quot;clinical_phrase_binary&quot;: {
            &quot;name&quot;: &quot;clinical_phrase_binary_grader&quot;,
            &quot;image_tag&quot;: &quot;2025-05-08&quot;,
            **build_python_grader_payload(clinical_phrase_binary_grader),
        },
    },
    &quot;calculate_output&quot;: &quot;0.85 * clinical_phrase + 0.15 * clinical_phrase_binary&quot;,
}
</code></pre>

<p>这是其训练曲线的快照，其中绿色曲线是训练集奖励，蓝色曲线是测试集奖励：</p>
<p><img alt="RFT String Grader" src="../images/rft_string_grader.png" /></p>
<h3 id="1_1">模型评分器 1</h3>
<p>为了解决这个限制，我们引入了一种更高级的方法：<strong>模型评分器</strong>。基于模型的评分器使我们能够将语义理解和细微差别嵌入到反馈中。当涉及特定领域的同义词或模糊推理时，这尤其强大。</p>
<p>我们使用 gpt-4.1 作为评分模型，并以强调语义保真度的规则为指导：临床同义词、正确的疾病分类和概念对齐。评分器旨在回答“这是否反映了正确的结果或现象？”，而不是关注肤浅的措辞——例如，“这是否是相同的字符串？”</p>
<p>为确保评分器与专家期望保持一致，我们在基础模型预测的子集上对其进行了评估。对于任何生产用例，领域专家评审员应确认模型分配的分数是否反映了首选答案顺序并与领域判断一致。这通常涉及确认模型评分器是否正确地对预测进行排名。在此食谱的范围内，我们通过使用 OpenAI <code>o3</code> 来检查较高质量的预测是否相对于其替代方案得到了一致的奖励来近似此评估。</p>
<p>通过对 <code>o3</code> 的这些讨论，我们迭代更新模型评分器，直到结果一致。</p>
<pre class="codehilite"><code class="language-python">GRADER_PROMPT_1 = &quot;&quot;&quot;
System:
  You are an expert medical grader. Compare the **Reference Answer** to the **Model's Answer** and produce **only** a JSON object with:
    • **result**: a float between 0.0 and 1.0  
    • **steps**: a list of reasoning steps (each with a `&quot;description&quot;` and a `&quot;conclusion&quot;`)

  Scoring rubric (start at 0.0, then add or subtract):

    1. Exact lexical match: **+0.15**  
    2. Clinical synonym (e.g. “withdrawal of thought” ↔ “thought withdrawal”): **+0.35**  
    3. Same disease family (e.g. two viral encephalitides): **+0.35**  
    4. Partial term overlap (e.g. “ulcer” in both phrases): **+0.15**  
    5. Completely unrelated: **-0.10**

  • If multiple criteria apply, sum their weights (max 1.0).  
  • Cap the final score to the [0.0, 1.0] range.  
  • In your **steps**, show which rule you applied and the running subtotal.
&quot;&quot;&quot;
</code></pre>

<p>为了通过 API 提交，字典的构建方式如下。</p>
<pre class="codehilite"><code class="language-python">model_grader_1 = {
   &quot;type&quot;: &quot;score_model&quot;,
   &quot;name&quot;: &quot;gpt41_score_model_1&quot;,
   &quot;input&quot;: [
        {
            &quot;role&quot;: &quot;system&quot;,
            &quot;content&quot;: GRADER_PROMPT_1
        },
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;Reference Answer: {{item.reference_answer}}. Model's Answer: {{sample.output_text}}&quot;
        }
   ],
   &quot;pass_threshold&quot;: 0.75,
   &quot;model&quot;: &quot;gpt-4.1-2025-04-14&quot;,
   &quot;range&quot;: [0, 1],
   &quot;sampling_params&quot;: {
       &quot;seed&quot;: 42,
       &quot;temperature&quot;: 0,
   },
}
</code></pre>

<p>因此，我们本地设置了模型评分器来检查我们接下来要微调的模型的结果。</p>
<pre class="codehilite"><code class="language-python">response_format = {
  &quot;name&quot;: &quot;float_score_classification&quot;,
  &quot;strict&quot;: True,
  &quot;schema&quot;: {
    &quot;type&quot;: &quot;object&quot;,
    &quot;properties&quot;: {
      &quot;steps&quot;: {
        &quot;type&quot;: &quot;array&quot;,
        &quot;description&quot;: &quot;A sequence of steps outlining the reasoning process.&quot;,
        &quot;items&quot;: {
          &quot;type&quot;: &quot;object&quot;,
          &quot;properties&quot;: {
            &quot;description&quot;: {
              &quot;type&quot;: &quot;string&quot;,
              &quot;description&quot;: &quot;Detailed description of the reasoning in this step.&quot;
            },
            &quot;conclusion&quot;: {
              &quot;type&quot;: &quot;string&quot;,
              &quot;description&quot;: &quot;The conclusion of the reasoning in this step.&quot;
            }
          },
          &quot;required&quot;: [&quot;description&quot;, &quot;conclusion&quot;],
          &quot;additionalProperties&quot;: False
        }
      },
      &quot;result&quot;: {
        &quot;type&quot;: &quot;number&quot;,
        &quot;description&quot;: &quot;The float score assigned to the response. This should be in inclusive range RANGE_MIN to RANGE_MAX.&quot;
      }
    },
    &quot;required&quot;: [&quot;steps&quot;, &quot;result&quot;],
    &quot;additionalProperties&quot;: False
  }
}

# for completions
response_format = {
    &quot;type&quot;: &quot;json_schema&quot;,
    &quot;json_schema&quot;: response_format
}

# Adapted python_model_grader to match the other graders' interface
def python_model_grader(sample, item, model_grader=model_grader_1):
    &quot;&quot;&quot;
    Calls an OpenAI model to grade the model output against the reference answer.
    Expects sample to have &quot;output_text&quot;, item to have &quot;reference_answer&quot;.
    Returns a float score (parsed from the model's JSON response).
    &quot;&quot;&quot;
    # Prepare the prompt as the grader expects
    system_prompt = model_grader[&quot;input&quot;][0][&quot;content&quot;]
    user_prompt = model_grader[&quot;input&quot;][1][&quot;content&quot;]
    user_prompt_filled = user_prompt.replace(&quot;{{item.reference_answer}}&quot;, item[&quot;reference_answer&quot;]).replace(&quot;{{sample.output_text}}&quot;, sample[&quot;output_text&quot;])
    messages = [
        {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_prompt},
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_prompt_filled}
    ]
    # Call the OpenAI API with the grader's model
    response = client.chat.completions.create(
        model=model_grader[&quot;model&quot;],
        messages=messages,
        seed=model_grader.get(&quot;sampling_params&quot;, {}).get(&quot;seed&quot;, None),
        temperature=model_grader.get(&quot;sampling_params&quot;, {}).get(&quot;temperature&quot;, 0),
        response_format=response_format,
    )
    # Parse the float score from the model's JSON response
    parsed = json.loads(response.choices[0].message.content)

    return float(parsed[&quot;result&quot;])
</code></pre>

<p>虽然规则最初提供了合理的反馈，但模型很快发现了一个漏洞并开始<strong>奖励黑客行为</strong>。分数飙升——有时提高 20-30 个百分点——不是因为临床准确性提高了，而是因为模型用同义词、剂量和完整的管理计划填充了它的“一个短语”答案。您可能会看到 <code>begin warfarin therapy **and** continue unfractionated heparin for ≥5 days, overlapping until the INR is in the therapeutic range (2–3)</code> 或 <code>chewable aspirin 325 mg stat plus nitroglycerin…</code> 而不是要求的 <code>continue unfractionated heparin</code> 或 <code>aspirin</code>。尽管系统提示很明确——<em>“仅回复一个短语：最可能的结果或现象”</em>——但这些冗长的输出会人为地提高<em>词汇相似度</em>得分，而没有精确地增加预测价值。这种经验凸显了持续检查模型输出的必要性，并对可能悄悄扭曲评估指标的奖励黑客行为保持警惕。</p>
<p>这是其训练曲线的快照（绿色是训练奖励，蓝色是测试奖励）：</p>
<p><img alt="RFT Model Hacking" src="../images/rft_hacking.png" /></p>
<h3 id="2_1">模型评分器 2</h3>
<p>为了缓解这种奖励黑客行为，我们通过澄清期望、强制执行更严格的输出约束并提供正确与不正确行为的对比示例来改进评分器提示。同样，我们使用 <code>o3</code> 进行了迭代，利用了基础 <code>o4-mini</code> 和先前模型黑客行为示例的预测，来设计和验证我们的评分器。此更新评分器的另一个重要点是降低<em>词汇相似度</em>的权重，以确保<em>临床相似度</em>占主导地位。</p>
<pre class="codehilite"><code class="language-python">GRADER_PROMPT_2 = &quot;&quot;&quot;You are an expert medical grader.

Compare the reference_answer (gold standard) with the model_prediction
and return **exactly** this JSON object:

{
  &quot;steps&quot;: [            // each: {&quot;description&quot;: &quot;...&quot;, &quot;conclusion&quot;: &quot;...&quot;}
    …
  ],
  &quot;result&quot;: &lt;float 0-1 rounded to 3 decimals&gt;
}

──────────────── Input placeholders ───────────────
reference_answer:
model_prediction:

──────────── Normalisation steps ────────────
• lowercase, strip punctuation / excess whitespace  
• expand common abbreviations (e.g. cll → chronic lymphocytic leukemia)  
• map both strings to ICD-10 / SNOMED concepts when possible

──────────── Clinical layer rubric ───────────
L1  exact concept or universally accepted synonym  
L2  same concept but benign modifier differs (e.g. “acute”, “left”)  
L3  same disease / drug family but wrong subtype or variant  
L4  same organ system but entirely different disease / intervention  
L5  only partial mechanistic overlap (e.g. both vasodilators)  
L6  unrelated or nonsensical

──────────── Scoring parameters ─────────────
clinical_weight  = 0.90
lexical_weight   = 0.10
clinical_similarity = {1:1.00, 2:0.85, 3:0.45, 4:0.30, 5:0.10, 6:0.00}

lexical_similarity = normalized_levenshtein(reference_answer,
                                            model_prediction)

# Optional penalty if a clinically critical adjective is missing
critical_modifiers = [
  &quot;wide&quot;, &quot;narrow&quot;, &quot;acute&quot;, &quot;chronic&quot;, &quot;posteromedial&quot;,
  &quot;oxidized&quot;, &quot;oxidised&quot;, &quot;left&quot;, &quot;right&quot;
]
modifier_pen = -0.05 if any(
    w in reference_answer and w not in model_prediction
    for w in critical_modifiers
) else 0.0

# Determine layer L (1-6) per rubric above using ontology + judgment.
if L == 6:
    score = 0.0
else:
    score = (clinical_weight * clinical_similarity[L] +
             lexical_weight  * lexical_similarity) + modifier_pen

Clamp to [0,1] and round to 3 decimals.  
Output **only** the JSON.

──────────────── Worked examples ─────────────
reference_answer: beta-thalassemia major  
model_prediction: beta-thalassemia minor  
reasoning: Both involve β-globin chain synthesis, but “major” causes
          transfusion-dependent anemia while “minor” is largely benign;
          same family, wrong subtype → **L3**. Lexical ≈ 0.83.  
score = 0.90·0.45 + 0.10·0.83 = 0.488 → **0.488**

reference_answer: ACE inhibitor  
model_prediction: angiotensin-receptor blocker  
reasoning: Both act on the renin–angiotensin axis yet on different
          targets; only partial mechanistic overlap → **L5**.
          Lexical ≈ 0.31.  
score = 0.90·0.10 + 0.10·0.31 = 0.121 → **0.121**

reference_answer: acute pancreatitis  
model_prediction: pancreatitis  
reasoning: Same disorder but missing timing adjective “acute”;
          benign modifier difference → **L2**. Lexical ≈ 0.78.  
score = 0.90·0.85 + 0.10·0.78 = 0.843 → **0.843**

reference_answer: valproate  
model_prediction: valproic acid  
reasoning: Valproic acid is the active moiety of valproate; mechanisms
          and indications are identical → **L1**. Lexical ≈ 0.82.  
score = 0.90·1.00 + 0.10·0.82 = 0.982 → **0.982**

reference_answer: riboflavin  
model_prediction: riboflavin deficiency  
reasoning: Adds “deficiency” but refers to the same vitamin (B₂);
          benign modifier difference → **L2**. Lexical ≈ 0.60.  
score = 0.90·0.85 + 0.10·0.60 = 0.825 → **0.825**

reference_answer: splenectomy  
model_prediction: acetaminophen overdose  
reasoning: Surgical removal of the spleen has no mechanistic or anatomic
          relationship to toxic drug ingestion → **L6**.  
score = **0.000**

reference_answer: ulcerative colitis  
model_prediction: Crohn disease  
reasoning: Both are inflammatory-bowel diseases but differ in location,
          histology and management; same organ system, different disease
          → **L4**. Lexical ≈ 0.38.  
score = 0.90·0.30 + 0.10·0.38 = 0.308 → **0.308**&quot;&quot;&quot;
</code></pre>

<pre class="codehilite"><code class="language-python">model_grader_2 = {
   &quot;type&quot;: &quot;score_model&quot;,
   &quot;name&quot;: &quot;gpt41_score_model_2&quot;,
   &quot;input&quot;: [
        {
            &quot;role&quot;: &quot;system&quot;,
            &quot;content&quot;: GRADER_PROMPT_2
        },
        {
            &quot;role&quot;: &quot;user&quot;,
            &quot;content&quot;: &quot;Reference Answer: {{item.reference_answer}}. Model's Answer: {{sample.output_text}}&quot;
        }
   ],
   &quot;pass_threshold&quot;: 0.75,
   &quot;model&quot;: &quot;gpt-4.1-2025-04-14&quot;,
   &quot;range&quot;: [0, 1],
   &quot;sampling_params&quot;: {
       &quot;seed&quot;: 42,
       &quot;temperature&quot;: 0,
   },
}
</code></pre>

<p>最终结果是一个高信号、领域敏感的评分器，它指导模型进行更合适、更简洁的预测。</p>
<p><strong>关于成本的注意事项：</strong>LLM 评分器除了训练计算外，还会产生令牌使用费。为了有效管理成本，我们建议：</p>
<ol>
<li>在本地对基础模型完成项（以及可选的合成完成项）进行测试，以确保评分器符合您的规则或人类偏好。在可用时，使用 <a href="https://platform.openai.com/docs/guides/flex-processing">flex processing</a> 以获得更有效的评估。</li>
<li>从小规模 RFT 运行开始，以验证评分器的一致性并在扩大规模之前检测潜在的奖励黑客行为。</li>
</ol>
<p>让我们在下一步中看看如何启动训练！</p>
<hr />
<h2 id="5"><strong>5. 训练</strong></h2>
<p>在您的提示和评分器最终确定后，您可以继续进行训练。本节展示了如何使用您最终的评分器启动 RFT——但自然地，您在尝试早期评分器以评估其性能时已经运行了类似的命令。</p>
<p>我们确保评分器通过了 API 测试，</p>
<pre class="codehilite"><code class="language-python">import requests

API_KEY = os.environ[&quot;OPENAI_API_KEY&quot;]
HEADERS = {&quot;Authorization&quot;: f&quot;Bearer {API_KEY}&quot;}

# Validate a grader configuration for fine-tuning
payload = {&quot;grader&quot;: model_grader_2}
try:
    response = requests.post(
        &quot;https://api.openai.com/v1/fine_tuning/alpha/graders/validate&quot;,
        json=payload,
        headers=HEADERS,
    )
    response.raise_for_status()
    print(&quot;Grader validated&quot;)
except requests.exceptions.RequestException as e:
    print(f&quot;Error validating grader: {e}&quot;)
    if 'response' in locals():
        print(f&quot;Response: {response.text}&quot;)
</code></pre>

<pre class="codehilite"><code>Grader validated
</code></pre>

<p>并将训练集和测试集上传到 OpenAI 文件系统。</p>
<pre class="codehilite"><code class="language-python"># Set your training and test file paths
train_file = &quot;data/medical_01_verifiable_problem_train_simple_prompt.jsonl&quot;
test_file = &quot;data/medical_01_verifiable_problem_val_simple_prompt.jsonl&quot;

def upload_file(file_path: str) -&gt; str:
    &quot;&quot;&quot;Upload a file to the OpenAI platform for fine-tuning.&quot;&quot;&quot;
    print(f&quot;Uploading file: {file_path}&quot;)
    with open(file_path, 'rb') as f:
        response = requests.post(
            &quot;https://api.openai.com/v1/files&quot;,
            headers=HEADERS,
            files={&quot;file&quot;: f},
            data={&quot;purpose&quot;: &quot;fine-tune&quot;}
        )
        response.raise_for_status()
        file_id = response.json()[&quot;id&quot;]
        print(f&quot;File uploaded successfully. File ID: {file_id}&quot;)
        return file_id

train_file_id = train_file
if train_file.endswith(&quot;jsonl&quot;):
    print(f&quot;Training file detected: {train_file}&quot;)
    train_file_id = upload_file(train_file)
test_file_id = test_file
if test_file and test_file.endswith(&quot;jsonl&quot;):
    print(f&quot;test file detected: {test_file}&quot;)
    test_file_id = upload_file(test_file)
</code></pre>

<pre class="codehilite"><code>Training file detected: data/medical_01_verifiable_problem_train_simple_prompt.jsonl
Uploading file: data/medical_01_verifiable_problem_train_simple_prompt.jsonl
File uploaded successfully. File ID: file-19L9jKsJXNJ17DtjvPwN3M
test file detected: data/medical_01_verifiable_problem_val_simple_prompt.jsonl
Uploading file: data/medical_01_verifiable_problem_val_simple_prompt.jsonl
File uploaded successfully. File ID: file-78q2N1QAMKhLiRK3zVB6MC
</code></pre>

<p>现在让我们定义运行的超参数。我们将微调 <code>o4-mini</code>，使用 <code>medium</code> 推理强度。此参数将通过限制模型用于推理的令牌数量来影响持续时间。我们使用中等的计算乘数和合理的 epoch 数进行调整，优先考虑效率和快速迭代。此外，我们将 <code>eval_samples</code> 参数设置为 3，以使验证曲线在 <code>o4-mini</code> 输出的随机性方面更加稳健。对多个样本进行平均可以减少噪声，并有助于揭示一致的学习模式。</p>
<p>您需要根据您的预算、期望的泛化能力和数据集难度来定制这些参数。</p>
<pre class="codehilite"><code class="language-python"># Set the model and other parameters
model = &quot;o4-mini-2025-04-16&quot;
suffix = &quot;medical_01_verifiable_problem_gpt41_grader&quot;
reasoning_effort = &quot;medium&quot;
n_epochs = 5
seed = 42
grader = model_grader_2
response_format_predictions = None
compute_multiplier = 1.0
eval_samples = 3
eval_interval = 5
</code></pre>

<p>我们现在准备启动运行！</p>
<pre class="codehilite"><code class="language-python"># Launch the RFT job
payload = dict(
    training_file=train_file_id,
    validation_file=test_file_id,
    model=model,
    suffix=suffix,
    method=dict(
        type=&quot;reinforcement&quot;,
        reinforcement=dict(
            grader=grader,
            response_format=response_format_predictions,
            hyperparameters=dict(
                compute_multiplier=compute_multiplier,
                eval_samples=eval_samples,
                eval_interval=eval_interval,
                n_epochs=n_epochs,
                reasoning_effort=reasoning_effort,
            )
        )
    ),
    seed=seed
)

try:
    response = requests.post(
        &quot;https://api.openai.com/v1/fine_tuning/jobs&quot;,
        json=payload,
        headers=HEADERS,
    )
    response.raise_for_status()
    job_id = response.json().get(&quot;id&quot;)
    if job_id:
        print(&quot;Training job created with ID:&quot;, job_id)
        print(
            f&quot;View the job details at: https://platform.openai.com/finetune/{job_id}&quot;)
    else:
        print(&quot;Failed to retrieve job ID from response.&quot;)
except requests.exceptions.RequestException as e:
    print(f&quot;An error occurred while creating the training job: {e}&quot;)
    if 'response' in locals():
        print(f&quot;Response: {response.text}&quot;)
</code></pre>

<pre class="codehilite"><code>Training job created with ID: ftjob-tt3B7l45hLUoaXGJRfoL1lLT
View the job details at: https://platform.openai.com/finetune/ftjob-tt3B7l45hLUoaXGJRfoL1lLT
</code></pre>

<p>在 <a href="https://platform.openai.com/finetune/">仪表板</a> 上，您可以观察奖励图——它们让您能够跟踪整体性能在各个步骤中的改进情况，而每个评分器的图表则分解了多评分器情况下的特定组件。推理令牌使用趋势（通常随着模型变得更加自信而减少）和步骤持续时间指标可以洞察效率。评分器延迟和错误计数图有助于确保您的评分器在运行期间保持高性能且无错误。</p>
<p>这是我们训练曲线的快照，其中绿色和橙色曲线代表训练集，而蓝色和红色曲线代表测试子集：</p>
<p><img alt="RFT Dashboard Example" src="../images/rft_dashboard_modelgrader2.png" /></p>
<p>在训练期间，测试集上的评估运行会直接记录到 <a href="https://platform.openai.com/evaluations?tab=runs">评估 API</a>。您可以前往那里跟踪样本的表现，并了解预测如何随时间演变。</p>
<hr />
<h2 id="6"><strong>6. 使用微调后的模型</strong></h2>
<p>训练完成后，您可以通过其 <code>model_id</code> 调用新模型并对其改进进行基准测试。期待更敏锐的预测！</p>
<pre class="codehilite"><code class="language-python"># To retrieve information about a fine-tuning job (including the fine-tuned model id), use the job_id:
response = requests.get(
    f&quot;https://api.openai.com/v1/fine_tuning/jobs/{job_id}&quot;,
    headers=HEADERS,
)
if response.ok:
    data = response.json()
    if data.get(&quot;status&quot;) == &quot;succeeded&quot;:
        fine_tuned_model_id = data.get(&quot;fine_tuned_model&quot;)
    else:
        fine_tuned_model_id = None
else:
    raise Exception(f&quot;Request failed: {response.status_code} - {response.text}&quot;)
print(&quot;Fine-tuned model id:&quot;, fine_tuned_model_id)
</code></pre>

<h3 id="_3">模型的预测得分</h3>
<p>让我们计算基础模型和微调模型的得分进行比较。</p>
<pre class="codehilite"><code class="language-python">from functools import partial
model_name = fine_tuned_model_id
reasoning_effort = &quot;medium&quot;
prompt_type = &quot;simple&quot;
subset = &quot;val&quot;
grader_func = partial(python_model_grader, model_grader=model_grader_2)
grader_func_name = &quot;python_model_grader_gpt41_score_model_2&quot;
num_runs = 3

results_ft_model_grader_2 = generate_model_predictions(
    subset=subset,
    prompt_type=prompt_type,
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    n_runs=num_runs
)

run_prediction_evaluation(
    model_name=model_name, 
    reasoning_effort=reasoning_effort, 
    prompt_type=prompt_type, 
    subset=subset,
    grader_func=grader_func, 
    num_runs=num_runs
)
predictions_ftmodel_medium_simple_prompt_model_grader_2, metrics_ftmodel_medium_simple_prompt_model_grader_2 = load_predictions(
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    prompt_type=prompt_type,
    subset=subset,
    grader_func_name=grader_func_name,
    num_runs=num_runs
)
</code></pre>

<pre class="codehilite"><code>Generating predictions (run 1): 100%|██████████| 100/100 [01:16&lt;00:00,  1.30it/s]
Generating predictions (run 2): 100%|██████████| 100/100 [01:25&lt;00:00,  1.17it/s]
Generating predictions (run 3): 100%|██████████| 100/100 [01:07&lt;00:00,  1.49it/s]


Grading predictions: 100%|██████████| 100/100 [00:22&lt;00:00,  4.51it/s]


{'total_samples': 100, 'accuracy': 0.7730899999999999}


Grading predictions: 100%|██████████| 100/100 [00:17&lt;00:00,  5.57it/s]


{'total_samples': 100, 'accuracy': 0.7697499999999999}


Grading predictions: 100%|██████████| 100/100 [00:19&lt;00:00,  5.01it/s]

{'total_samples': 100, 'accuracy': 0.78996}
</code></pre>

<pre class="codehilite"><code class="language-python">model_name = &quot;o4-mini&quot;
reasoning_effort = &quot;medium&quot;
prompt_type = &quot;simple&quot;
subset = &quot;val&quot;
grader_func = partial(python_model_grader, model_grader=model_grader_2)
grader_func_name = &quot;python_model_grader_gpt41_score_model_2&quot;
num_runs = 3

results_o4mini_model_grader_2 = generate_model_predictions(
    subset=subset,
    prompt_type=prompt_type,
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    n_runs=num_runs
)
run_prediction_evaluation(
    model_name=model_name, 
    reasoning_effort=reasoning_effort, 
    prompt_type=prompt_type, 
    subset=subset,
    grader_func=grader_func, 
    num_runs=num_runs
)
predictions_o4mini_medium_simple_prompt_model_grader_2, metrics_o4mini_medium_simple_prompt_model_grader_2 = load_predictions(
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    prompt_type=prompt_type,
    subset=subset,
    grader_func_name=grader_func_name,
    num_runs=num_runs
)
</code></pre>

<pre class="codehilite"><code>Generating predictions (run 1):   0%|          | 0/100 [00:00&lt;?, ?it/s]

Generating predictions (run 1): 100%|██████████| 100/100 [01:11&lt;00:00,  1.39it/s]
Generating predictions (run 2): 100%|██████████| 100/100 [00:42&lt;00:00,  2.34it/s]
Generating predictions (run 3): 100%|██████████| 100/100 [00:41&lt;00:00,  2.40it/s]
Grading predictions: 100%|██████████| 100/100 [00:19&lt;00:00,  5.20it/s]


{'total_samples': 100, 'accuracy': 0.72282}


Grading predictions: 100%|██████████| 100/100 [00:19&lt;00:00,  5.14it/s]


{'total_samples': 100, 'accuracy': 0.72807}


Grading predictions: 100%|██████████| 100/100 [00:17&lt;00:00,  5.65it/s]

{'total_samples': 100, 'accuracy': 0.74812}
</code></pre>

<pre class="codehilite"><code class="language-python">model_name = &quot;o3&quot;
reasoning_effort = &quot;medium&quot;
prompt_type = &quot;simple&quot;
subset = &quot;val&quot;
grader_func = partial(python_model_grader, model_grader=model_grader_2)
grader_func_name = &quot;python_model_grader_gpt41_score_model_2&quot;
num_runs = 3

results_o3_model_grader_2 = generate_model_predictions(
    subset=subset,
    prompt_type=prompt_type,
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    n_runs=num_runs
)
run_prediction_evaluation(
    model_name=model_name, 
    reasoning_effort=reasoning_effort, 
    prompt_type=prompt_type, 
    subset=subset,
    grader_func=grader_func, 
    num_runs=num_runs
)
predictions_o3_medium_simple_prompt_model_grader_2, metrics_o3_medium_simple_prompt_model_grader_2 = load_predictions(
    model_name=model_name,
    reasoning_effort=reasoning_effort,
    prompt_type=prompt_type,
    subset=subset,
    grader_func_name=grader_func_name,
    num_runs=num_runs
)
</code></pre>

<pre class="codehilite"><code>Generating predictions (run 1):   0%|          | 0/100 [00:00&lt;?, ?it/s]

Generating predictions (run 1): 100%|██████████| 100/100 [01:01&lt;00:00,  1.62it/s]
Generating predictions (run 2): 100%|██████████| 100/100 [00:52&lt;00:00,  1.90it/s]
Generating predictions (run 3): 100%|██████████| 100/100 [01:13&lt;00:00,  1.37it/s]
Grading predictions: 100%|██████████| 100/100 [00:21&lt;00:00,  4.55it/s]


{'total_samples': 100, 'accuracy': 0.74015}


Grading predictions: 100%|██████████| 100/100 [00:16&lt;00:00,  6.08it/s]


{'total_samples': 100, 'accuracy': 0.7515900000000001}


Grading predictions: 100%|██████████| 100/100 [00:16&lt;00:00,  6.13it/s]

{'total_samples': 100, 'accuracy': 0.74235}
</code></pre>

<pre class="codehilite"><code class="language-python">avg_metrics_o4mini_medium_simple_prompt_model_grader_2, std_metrics_o4mini_medium_simple_prompt_model_grader_2 = average_and_std_metrics(metrics_o4mini_medium_simple_prompt_model_grader_2)
avg_metrics_o3_medium_simple_prompt_model_grader_2, std_metrics_o3_medium_simple_prompt_model_grader_2 = average_and_std_metrics(metrics_o3_medium_simple_prompt_model_grader_2)
avg_metrics_ftmodel_medium_simple_prompt_model_grader_2, std_metrics_ftmodel_medium_simple_prompt_model_grader_2 = average_and_std_metrics(metrics_ftmodel_medium_simple_prompt_model_grader_2)
model_metrics_avg = {
    &quot;o4-mini-medium-simple-prompt&quot;: avg_metrics_o4mini_medium_simple_prompt_model_grader_2,
    &quot;o3-medium-simple-prompt&quot;: avg_metrics_o3_medium_simple_prompt_model_grader_2,
    &quot;ftmodel-medium-simple-prompt&quot;: avg_metrics_ftmodel_medium_simple_prompt_model_grader_2
}
model_metrics_std = {
    &quot;o4-mini-medium-simple-prompt&quot;: std_metrics_o4mini_medium_simple_prompt_model_grader_2,
    &quot;o3-medium-simple-prompt&quot;: std_metrics_o3_medium_simple_prompt_model_grader_2,
    &quot;ftmodel-medium-simple-prompt&quot;: std_metrics_ftmodel_medium_simple_prompt_model_grader_2
}
plot_model_accuracies(model_metrics_avg, model_metrics_std, grader_title=&quot;Model Grader 2 Accuracy&quot;)
</code></pre>

<p><img alt="png" src="Reinforcement_Fine_Tuning_files/Reinforcement_Fine_Tuning_67_0.png" /></p>
<pre class="codehilite"><code class="language-python"># Print mistakes where the model did not get the correct answer (score &lt; 1.0)
mistakes = [
    {&quot;index&quot;: i, **res}
    for i, res in enumerate(predictions_ftmodel_medium_simple_prompt_model_grader_2[0])
    if res[&quot;score&quot;] &lt; 1.0
]

print(f&quot;\nTotal mistakes: {len(mistakes)}&quot;)
for m in mistakes[5:10]:
    print(f&quot;\n[Sample {m['index']}]&quot;)
    print(f&quot;  Model prediction: {m['model_prediction']}&quot;)
    print(f&quot;  Reference answer: {m['reference_answer']}&quot;)
    print(f&quot;  Score: {m['score']}&quot;)
</code></pre>

<pre class="codehilite"><code>Total mistakes: 84

[Sample 9]
  Model prediction: ventilation-perfusion scan
  Reference answer: lung ventilation-perfusion scan
  Score: 0.989

[Sample 11]
  Model prediction: autoimmune destruction of melanocytes (vitiligo)
  Reference answer: autoimmune melanocyte destruction
  Score: 0.991

[Sample 12]
  Model prediction: contrast enhanced computed tomography of the abdomen
  Reference answer: ct abdomen
  Score: 0.812

[Sample 13]
  Model prediction: unfractionated heparin
  Reference answer: enoxaparin
  Score: 0.428

[Sample 15]
  Model prediction: t cell–mediated delayed (type iv) hypersensitivity
  Reference answer: th1-mediated cytotoxicity
  Score: 0.932
</code></pre>

<p>我们看到微调后准确率提高了约 5 个点。从前几个错误来看，模型倾向于严厉惩罚那些接近但临床上不完全相同的答案——例如<em>未分级肝素</em>与<em>依诺肝素</em>。它还会因为答案过长而扣分，即使答案是正确的，例如<em>腹部增强 CT</em>。</p>
<pre class="codehilite"><code class="language-python">scores_o4 = [p['score'] for p in predictions_o4mini_medium_simple_prompt_model_grader_2[0]]
scores_ft = [p['score'] for p in predictions_ftmodel_medium_simple_prompt_model_grader_2[0]]

# Determine common bins for both histograms
all_scores = scores_o4 + scores_ft
bins = plt.hist(all_scores, bins=5, alpha=0)[1]

# Plot histograms and capture the counts
counts_o4, _, _ = plt.hist(
    scores_o4,
    bins=bins,
    alpha=0.6,
    label='o4-mini-medium-simple-prompt'
)
counts_ft, _, _ = plt.hist(
    scores_ft,
    bins=bins,
    alpha=0.6,
    label='ftmodel-medium-simple-prompt'
)

plt.title(&quot;Model Grader 2 Score Distribution by Model&quot;)
plt.xlabel(&quot;Score&quot;)
plt.ylabel(&quot;Count&quot;)
plt.ylim(top=75)
plt.legend()

# Print the bin counts
print(&quot;o4-mini-medium-simple-prompt bin counts:&quot;, counts_o4)
print(&quot;ftmodel-medium-simple-prompt bin counts:&quot;, counts_ft)
print(&quot;Max bin count (y-axis):&quot;, max(max(counts_o4), max(counts_ft)))
</code></pre>

<pre class="codehilite"><code>o4-mini-medium-simple-prompt bin counts: [ 2. 20. 13.  5. 60.]
ftmodel-medium-simple-prompt bin counts: [ 3. 12.  9.  6. 70.]
Max bin count (y-axis): 70.0
</code></pre>

<p><img alt="png" src="Reinforcement_Fine_Tuning_files/Reinforcement_Fine_Tuning_70_1.png" /></p>
<p>从得分分布来看，我们观察到 RFT 帮助将模型的预测从中间到低得分区域（0.2-0.6）转移到高得分区域（0.8-1.0）。由于评分器强调临床相似性而非词汇匹配，因此这种转变反映了更强的医学推理能力——而不仅仅是更好的措辞——根据我们的<em>专家</em>评分器。如（0.0-0.1）范围所示，一些本已较弱的预测得分更低，这暗示了残留的知识差距。</p>
<p>请注意，由于早期的 <code>combined_grader</code> 被设计为奖励词汇正确性，因此其准确性没有太大提高——这是符合预期的。这种差距再次强调了验证模型评分器的重要性，以及为什么您应该监控奖励黑客行为。在我们的案例中，我们使用 <code>o3</code> 来抽查评分行为，但领域专家评审至关重要。</p>
<h3 id="_4">模型的推理</h3>
<p>微调模型的分析中的另一个重要点是推理摘要。模型可能在这些摘要中提供关键信息，探索它们以了解模型失败的地方可以驱动模型和评分器的系统提示更新。下面，我们展示了模型为展示其回答问题的方式而生成的推理摘要示例。</p>
<pre class="codehilite"><code class="language-python"># Flatten the list of lists into a single list of dicts
predictions = {
    &quot;o4-mini&quot;: predictions_o4mini_medium_simple_prompt_model_grader_2,
    &quot;o3&quot;: predictions_o3_medium_simple_prompt_model_grader_2,
    &quot;ftmodel&quot;: predictions_ftmodel_medium_simple_prompt_model_grader_2,
}

for model_name, predictions in predictions.items():
    all_preds = [item for sublist in predictions for item in sublist]
    reasoning_tokens = [p['reasoning_tokens_used'] for p in all_preds if 'reasoning_tokens_used' in p]
    mean_reasoning_tokens = np.mean(reasoning_tokens)
    print(f&quot;Mean reasoning_tokens_used {model_name}: {mean_reasoning_tokens:.0f}&quot;)
</code></pre>

<pre class="codehilite"><code>Mean reasoning_tokens_used o4-mini: 404
Mean reasoning_tokens_used o3: 384
Mean reasoning_tokens_used ftmodel: 925
</code></pre>

<p>微调模型花费更多推理令牌来思考问题。让我们通过推理摘要来可视化一个示例。</p>
<pre class="codehilite"><code class="language-python">from IPython.display import Markdown, display
markdown_text = results_o4mini_model_grader_2[0][30][&quot;summaries&quot;]
display(Markdown(markdown_text))
</code></pre>

<pre class="codehilite"><code>**Choosing imaging study**

The user is looking for a single phrase regarding the imaging study for a 49-year-old male with chronic alcohol consumption and related symptoms. I'm considering whether to suggest a CT scan or MRI; however, a CT scan is often the initial choice for chronic pancreatitis. I’ll go with &quot;abdominal ct scan&quot; since it's standardized. I need to ensure I format it in lowercase without punctuation, following the user’s request. So the output is &quot;abdominal ct scan.&quot;
</code></pre>

<pre class="codehilite"><code class="language-python">markdown_text = results_ft_model_grader_2[0][30][&quot;summaries&quot;]
display(Markdown(markdown_text))
</code></pre>

<pre class="codehilite"><code>**Considering imaging options**

I'm analyzing the user's question about a 49-year-old male with symptoms suggesting steatorrhea, possibly indicating exocrine pancreatic insufficiency from chronic alcohol use. It raises concerns about chronic pancreatitis or pancreatic cancer. I think the best imaging choice is a contrast-enhanced CT scan of the abdomen because it effectively examines structural abnormalities. Alternatively, an endoscopic ultrasound could be more sensitive, but CT is generally preferred. So, my recommendation is to start with a contrast-enhanced CT scan.
**Determining the appropriate imaging study**

I'm analyzing the question about the most suitable imaging study for a patient with symptoms suggesting chronic pancreatitis. The standard approach for suspected chronic pancreatitis is a contrast-enhanced CT scan of the abdomen, as it effectively identifies pancreatic calcifications and structural changes. While MRCP and endoscopic ultrasound provide additional details, CT is often preferred as the initial test. Therefore, my answer should focus on recommending a &quot;contrast-enhanced abdominal CT&quot; as the next step in evaluation.
</code></pre>

<p>基础 <code>o4-mini</code> 的推理直接指向“腹部 CT 扫描”，主要关注小写格式，并且只给出了一个简短的“通常是首选”的理由。而<em>微调模型</em>则首先将患者的脂肪泻和饮酒史与慢性胰腺炎或癌症联系起来，权衡 CT 与 MRCP 和 EUS，并解释为什么增强腹部 CT 扫描能更好地显示钙化和结构改变。后者似乎更仔细，并且似乎学会了更详细地分解病例描述。</p>
<h3 id="_5">进一步提高得分</h3>
<p>基础 <code>o3</code> 和我们微调的 <code>o4-mini</code> 在相同的样本上得分有时为零——这是一个危险信号，表明参考标签可能错误。在增加计算量之前，请投资于数据质量：让领域专家重新标记有噪声的切片，分析模型的推理，然后收紧评分器提示。干净、可信的数据和有条理的更新几乎总是比额外的 epoch 能带来更高的准确性。</p>
<hr />
<h2 id="_6"><strong>结论</strong></h2>
<p>我们已经研究了如何设计评分器，为 <code>o4-mini</code> 在 RFT 期间提供所需的详细反馈。这种信号正是帮助模型在基线之上真正学习和改进的关键。模型评分器在这方面功能强大——但前提是它们设计得当。粗心的评分器或粗心的数据可能会发送错误的信号，并将模型引向错误的方向。</p>
<p>您现在已经准备好使用 OpenAI API 在您自己的模型上应用强化微调。我们期待看到您如何通过自定义评分器和更智能的模型行为来突破推理和工具使用的界限！</p>
<p>有关故障排除或后续步骤，请参阅 <a href="https://platform.openai.com/docs/guides/fine-tuning">OpenAI 微调文档</a>。</p>
            </article>
            
            <nav class="page-nav"><a href="examples/evaluation/use-cases/regression_zh.html" class="nav-link prev">← 设置你的评估</a><a href="examples/fine-tuned_qa/reinforcement_finetuning_healthbench_zh.html" class="nav-link next">使用 OpenAI API 进行对话推理的强化微调 →</a></nav>
        </main>
    </div>
</body>
</html>